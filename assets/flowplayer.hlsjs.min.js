(function(){function s(l,e,n){function t(o,i){if(!e[o]){if(!l[o]){var d="function"==typeof require&&require;if(!i&&d)return d(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var a=e[o]={exports:{}};l[o][0].call(a.exports,function(e){var a=l[o][1][e];return t(a||e)},a,a.exports,s,l,e,n)}return e[o].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)t(n[a]);return t}return s})()({1:[function(e){var t=e("flowplayer"),a=e("flowplayer-hlsjs");a(t),window.flowplayer=t},{flowplayer:5,"flowplayer-hlsjs":4}],2:[function(e,t,a){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");-1===a&&(a=t);var n=a===t?0:4-a%4;return[a,n]}function r(e,t,a){return 3*(t+a)/4-a}function o(e){var t=n(e),a=t[0],o=t[1],s=new c(r(e,a,o)),l=0,d=0<o?a-4:a,p,f;for(f=0;f<d;f+=4)p=u[e.charCodeAt(f)]<<18|u[e.charCodeAt(f+1)]<<12|u[e.charCodeAt(f+2)]<<6|u[e.charCodeAt(f+3)],s[l++]=255&p>>16,s[l++]=255&p>>8,s[l++]=255&p;return 2===o&&(p=u[e.charCodeAt(f)]<<2|u[e.charCodeAt(f+1)]>>4,s[l++]=255&p),1===o&&(p=u[e.charCodeAt(f)]<<10|u[e.charCodeAt(f+1)]<<4|u[e.charCodeAt(f+2)]>>2,s[l++]=255&p>>8,s[l++]=255&p),s}function s(e){return p[63&e>>18]+p[63&e>>12]+p[63&e>>6]+p[63&e]}function l(e,t,a){for(var n=[],r=t,o;r<a;r+=3)o=(16711680&e[r]<<16)+(65280&e[r+1]<<8)+(255&e[r+2]),n.push(s(o));return n.join("")}function d(e){for(var t=e.length,a=t%3,n=[],r=16383,o=0,s=t-a,d;o<s;o+=r)n.push(l(e,o,o+r>s?s:o+r));return 1===a?(d=e[t-1],n.push(p[d>>2]+p[63&d<<4]+"==")):2===a&&(d=(e[t-2]<<8)+e[t-1],n.push(p[d>>10]+p[63&d>>4]+p[63&d<<2]+"=")),n.join("")}a.byteLength=function(e){var t=n(e),a=t[0],r=t[1];return 3*(a+r)/4-r},a.toByteArray=o,a.fromByteArray=d;for(var p=[],u=[],c="undefined"==typeof Uint8Array?Array:Uint8Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,m=f.length;g<m;++g)p[g]=f[g],u[f.charCodeAt(g)]=g;u[45]=62,u[95]=63},{}],3:[function(e,t,a){var n=Math.pow,r=String.fromCharCode,o=Math.min;(function(){(function(){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */'use strict';function t(e){if(2147483647<e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"");var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,a){if("number"==typeof e){if("string"==typeof t)throw new TypeError("The \"string\" argument must be of type string. Received type number");return u(e)}return l(e,t,a)}function l(e,t,a){if("string"==typeof e)return c(e,t);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return g(e,t,a);if("number"==typeof e)throw new TypeError("The \"value\" argument must not be of type number. Received type number");var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return s.from(n,t,a);var r=m(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be of type number");else if(0>e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}function p(e,a,n){return d(e),0>=e?t(e):void 0===a?t(e):"string"==typeof n?t(e).fill(a,n):t(e).fill(a)}function u(e){return d(e),t(0>e?0:0|y(e))}function c(e,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var n=0|h(e,a),r=t(n),o=r.write(e,a);return o!==n&&(r=r.slice(0,o)),r}function f(e){for(var a=0>e.length?0:0|y(e.length),n=t(a),r=0;r<a;r+=1)n[r]=255&e[r];return n}function g(e,t,a){if(0>t||e.byteLength<t)throw new RangeError("\"offset\" is outside of buffer bounds");if(e.byteLength<t+(a||0))throw new RangeError("\"length\" is outside of buffer bounds");var n;return n=void 0===t&&void 0===a?new Uint8Array(e):void 0===a?new Uint8Array(e,t):new Uint8Array(e,t,a),n.__proto__=s.prototype,n}function m(e){if(s.isBuffer(e)){var a=0|y(e.length),n=t(a);return 0===n.length?n:(e.copy(n,0,0,a),n)}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0:"number"!=typeof e.length||J(e.length)?t(0):f(e)}function y(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof e);var a=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===a)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return Z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return W(e).length;default:if(r)return n?-1:Z(e).length;t=(""+t).toLowerCase(),r=!0;}}function b(e,t,a){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),0>=a)return"";if(a>>>=0,t>>>=0,a<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,a);case"utf8":case"utf-8":return D(this,t,a);case"ascii":return _(this,t,a);case"latin1":case"binary":return k(this,t,a);case"base64":return R(this,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,a);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function v(e,t,a){var n=e[t];e[t]=e[a],e[a]=n}function I(e,t,a,n,r){if(0===e.length)return-1;if("string"==typeof a?(n=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,J(a)&&(a=r?0:e.length-1),0>a&&(a=e.length+a),a>=e.length){if(r)return-1;a=e.length-1}else if(0>a)if(r)a=0;else return-1;if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:E(e,t,a,n,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,a):Uint8Array.prototype.lastIndexOf.call(e,t,a):E(e,[t],a,n,r);throw new TypeError("val must be string, number or Buffer")}function E(e,t,a,n,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,l=e.length,d=t.length;if(void 0!==n&&(n=(n+"").toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;s=2,l/=2,d/=2,a/=2}var p;if(r){var u=-1;for(p=a;p<l;p++)if(o(e,p)!==o(t,-1===u?0:p-u))-1!==u&&(p-=p-u),u=-1;else if(-1===u&&(u=p),p-u+1===d)return u*s}else for(a+d>l&&(a=l-d),p=a;0<=p;p--){for(var c=!0,f=0;f<d;f++)if(o(e,p+f)!==o(t,f)){c=!1;break}if(c)return p}return-1}function S(e,t,a,n){a=+a||0;var r=e.length-a;n?(n=+n,n>r&&(n=r)):n=r;var o=t.length;n>o/2&&(n=o/2);for(var s=0,l;s<n;++s){if(l=parseInt(t.substr(2*s,2),16),J(l))return s;e[a+s]=l}return s}function T(e,t,a,n){return H(Z(t,e.length-a),e,a,n)}function A(e,t,a,n){return H(Y(t),e,a,n)}function L(e,t,a,n){return A(e,t,a,n)}function w(e,t,a,n){return H(W(t),e,a,n)}function C(e,t,a,n){return H(z(t,e.length-a),e,a,n)}function R(e,t,a){return 0===t&&a===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,a))}function D(e,t,a){a=o(e.length,a);for(var n=[],r=t;r<a;){var s=e[r],l=null,d=239<s?4:223<s?3:191<s?2:1;if(r+d<=a){var p,u,c,f;1===d?128>s&&(l=s):2===d?(p=e[r+1],128==(192&p)&&(f=(31&s)<<6|63&p,127<f&&(l=f))):3===d?(p=e[r+1],u=e[r+2],128==(192&p)&&128==(192&u)&&(f=(15&s)<<12|(63&p)<<6|63&u,2047<f&&(55296>f||57343<f)&&(l=f))):4===d?(p=e[r+1],u=e[r+2],c=e[r+3],128==(192&p)&&128==(192&u)&&128==(192&c)&&(f=(15&s)<<18|(63&p)<<12|(63&u)<<6|63&c,65535<f&&1114112>f&&(l=f))):void 0}null===l?(l=65533,d=1):65535<l&&(l-=65536,n.push(55296|1023&l>>>10),l=56320|1023&l),n.push(l),r+=d}return x(n)}function x(e){var t=e.length;if(t<=4096)return r.apply(String,e);for(var a="",n=0;n<t;)a+=r.apply(String,e.slice(n,n+=4096));return a}function _(e,t,a){var n="";a=o(e.length,a);for(var s=t;s<a;++s)n+=r(127&e[s]);return n}function k(e,t,a){var n="";a=o(e.length,a);for(var s=t;s<a;++s)n+=r(e[s]);return n}function P(e,t,a){var n=e.length;(!t||0>t)&&(t=0),(!a||0>a||a>n)&&(a=n);for(var r="",o=t;o<a;++o)r+=U(e[o]);return r}function O(e,t,a){for(var n=e.slice(t,a),o="",s=0;s<n.length;s+=2)o+=r(n[s]+256*n[s+1]);return o}function M(e,t,a){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>a)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,a,n,r,o){if(!s.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>r||t<o)throw new RangeError("\"value\" argument is out of bounds");if(a+n>e.length)throw new RangeError("Index out of range")}function F(e,t,a,n){if(a+n>e.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range")}function B(e,t,a,n,r){return t=+t,a>>>=0,r||F(e,t,a,4,34028234663852886e22,-34028234663852886e22),X.write(e,t,a,n,23,4),a+4}function G(e,t,a,n,r){return t=+t,a>>>=0,r||F(e,t,a,8,17976931348623157e292,-17976931348623157e292),X.write(e,t,a,n,52,8),a+8}function j(e){if(e=e.split("=")[0],e=e.trim().replace(Q,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Z(e,t){t=t||1/0;for(var a=e.length,n=null,r=[],o=0,s;o<a;++o){if(s=e.charCodeAt(o),55295<s&&57344>s){if(!n){if(56319<s){-1<(t-=3)&&r.push(239,191,189);continue}else if(o+1===a){-1<(t-=3)&&r.push(239,191,189);continue}n=s;continue}if(56320>s){-1<(t-=3)&&r.push(239,191,189),n=s;continue}s=(n-55296<<10|s-56320)+65536}else n&&-1<(t-=3)&&r.push(239,191,189);if(n=null,128>s){if(0>(t-=1))break;r.push(s)}else if(2048>s){if(0>(t-=2))break;r.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(t-=3))break;r.push(224|s>>12,128|63&s>>6,128|63&s)}else if(1114112>s){if(0>(t-=4))break;r.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}else throw new Error("Invalid code point")}return r}function Y(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}function z(e,t){for(var a=[],n=0,r,o,s;n<e.length&&!(0>(t-=2));++n)r=e.charCodeAt(n),o=r>>8,s=r%256,a.push(s),a.push(o);return a}function W(e){return K.toByteArray(j(e))}function H(e,t,a,n){for(var r=0;r<n&&!(r+a>=t.length||r>=e.length);++r)t[r+a]=e[r];return r}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!==e}var K=e("base64-js"),X=e("ieee754");a.Buffer=s,a.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},a.INSPECT_MAX_BYTES=50;a.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){return s.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return s.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,a){return l(e,t,a)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,a){return p(e,t,a)},s.allocUnsafe=function(e){return u(e)},s.allocUnsafeSlow=function(e){return u(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(V(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(e===t)return 0;for(var n=e.length,r=t.length,l=0,d=o(n,r);l<d;++l)if(e[l]!==t[l]){n=e[l],r=t[l];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return s.alloc(0);var a;if(t===void 0)for(t=0,a=0;a<e.length;++a)t+=e[a].length;var n=s.allocUnsafe(t),r=0;for(a=0;a<e.length;++a){var o=e[a];if(V(o,Uint8Array)&&(o=s.from(o)),!s.isBuffer(o))throw new TypeError("\"list\" argument must be an Array of Buffers");o.copy(n,r),r+=o.length}return n},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?D(this,0,e):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},s.prototype.compare=function(e,t,a,n,r){if(V(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof e);if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),0>t||a>e.length||0>n||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=a)return 0;if(n>=r)return-1;if(t>=a)return 1;if(t>>>=0,a>>>=0,n>>>=0,r>>>=0,this===e)return 0;for(var l=r-n,d=a-t,p=o(l,d),u=this.slice(n,r),c=e.slice(t,a),f=0;f<p;++f)if(u[f]!==c[f]){l=u[f],d=c[f];break}return l<d?-1:d<l?1:0},s.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},s.prototype.indexOf=function(e,t,a){return I(this,e,t,a,!0)},s.prototype.lastIndexOf=function(e,t,a){return I(this,e,t,a,!1)},s.prototype.write=function(e,t,a,n){if(void 0===t)n="utf8",a=this.length,t=0;else if(void 0===a&&"string"==typeof t)n=t,a=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(a)?(a>>>=0,void 0===n&&(n="utf8")):(n=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((void 0===a||a>r)&&(a=r),0<e.length&&(0>a||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return S(this,e,t,a);case"utf8":case"utf-8":return T(this,e,t,a);case"ascii":return A(this,e,t,a);case"latin1":case"binary":return L(this,e,t,a);case"base64":return w(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,a);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};s.prototype.slice=function(e,t){var a=this.length;e=~~e,t=t===void 0?a:~~t,0>e?(e+=a,0>e&&(e=0)):e>a&&(e=a),0>t?(t+=a,0>t&&(t=0)):t>a&&(t=a),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=s.prototype,n},s.prototype.readUIntLE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return n},s.prototype.readUIntBE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},s.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var r=this[e],o=1,s=0;++s<t&&(o*=256);)r+=this[e+s]*o;return o*=128,r>=o&&(r-=n(2,8*t)),r},s.prototype.readIntBE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var r=t,o=1,s=this[e+--r];0<r&&(o*=256);)s+=this[e+--r]*o;return o*=128,s>=o&&(s-=n(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},s.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),X.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),X.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),X.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),X.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,a,r){if(e=+e,t>>>=0,a>>>=0,!r){var o=n(2,8*a)-1;N(this,e,t,a,o,0)}var s=1,l=0;for(this[t]=255&e;++l<a&&(s*=256);)this[t+l]=255&e/s;return t+a},s.prototype.writeUIntBE=function(e,t,a,r){if(e=+e,t>>>=0,a>>>=0,!r){var o=n(2,8*a)-1;N(this,e,t,a,o,0)}var s=a-1,l=1;for(this[t+s]=255&e;0<=--s&&(l*=256);)this[t+s]=255&e/l;return t+a},s.prototype.writeUInt8=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,a,r){if(e=+e,t>>>=0,!r){var o=n(2,8*a-1);N(this,e,t,a,o-1,-o)}var s=0,l=1,d=0;for(this[t]=255&e;++s<a&&(l*=256);)0>e&&0===d&&0!==this[t+s-1]&&(d=1),this[t+s]=255&(e/l>>0)-d;return t+a},s.prototype.writeIntBE=function(e,t,a,r){if(e=+e,t>>>=0,!r){var o=n(2,8*a-1);N(this,e,t,a,o-1,-o)}var s=a-1,l=1,d=0;for(this[t+s]=255&e;0<=--s&&(l*=256);)0>e&&0===d&&0!==this[t+s+1]&&(d=1),this[t+s]=255&(e/l>>0)-d;return t+a},s.prototype.writeInt8=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,a){return e=+e,t>>>=0,a||N(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,a){return B(this,e,t,!0,a)},s.prototype.writeFloatBE=function(e,t,a){return B(this,e,t,!1,a)},s.prototype.writeDoubleLE=function(e,t,a){return G(this,e,t,!0,a)},s.prototype.writeDoubleBE=function(e,t,a){return G(this,e,t,!1,a)},s.prototype.copy=function(e,t,a,n){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(a||(a=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<a&&(n=a),n===a)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-a&&(n=e.length-t+a);var r=n-a;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,a,n);else if(this===e&&a<t&&t<n)for(var o=r-1;0<=o;--o)e[o+t]=this[o+a];else Uint8Array.prototype.set.call(e,this.subarray(a,n),t);return r},s.prototype.fill=function(e,t,a,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,a=this.length):"string"==typeof a&&(n=a,a=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var r=e.charCodeAt(0);("utf8"===n&&128>r||"latin1"===n)&&(e=r)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<a)throw new RangeError("Out of range index");if(a<=t)return this;t>>>=0,a=a===void 0?this.length:a>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<a;++o)this[o]=e;else{var l=s.isBuffer(e)?e:s.from(e,n),d=l.length;if(0===d)throw new TypeError("The value \""+e+"\" is invalid for argument \"value\"");for(o=0;o<a-t;++o)this[o+t]=l[o%d]}return this};var Q=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":2,buffer:3,ieee754:7}],4:[function(e,t){var a=Math.round,n=Math.min;/*!

   hlsjs engine plugin for Flowplayer HTML5

   Copyright (c) 2015-2017, Flowplayer Drive Oy

   Released under the MIT License:
   http://www.opensource.org/licenses/mit-license.php

   Includes hls.js
   Copyright (c) 2017 Dailymotion (http://www.dailymotion.com)
   https://github.com/video-dev/hls.js/blob/master/LICENSE

   Requires Flowplayer HTML5 version 6 or greater
   $GIT_DESC$

*/(function(){"use strict";var r=function(t,r){var o=r.common,s=r.extend,l=r.support,d=l.browser,p=r.version,u=0===p.indexOf("6."),c=window,f=c.MediaSource||c.WebKitMediaSource,g=c.performance,m=function(e){return-1<e.toLowerCase().indexOf("mpegurl")},y=function(e){var t=e.clip&&e.clip.hlsQualities||e.hlsQualities;return l.inlineVideo&&(!0===t||t&&t.length)},h=function(e){var t=o.findDirect("video",e)[0]||o.find(".fp-player>video",e)[0];t&&(o.find("source",t).forEach(function(e){e.removeAttribute("src")}),t.removeAttribute("src"),t.load(),o.removeNode(t))},b=e("text-encoding"),v=new b.TextDecoder("utf-8"),I=function(e){var t="";try{t=v.decode(e)}catch(a){try{v=new b.TextDecoder("utf-16be"),t=v.decode(e)}catch(a){try{v=new b.TextDecoder("utf-16le"),t=v.decode(e)}catch(e){}}}return t},E=function(e,t,a){t.title=t.title||a+"";var n={time:t.startTime,subtitle:t,visible:!1};e.subtitles.push(t),e.addCuepoint(n),e.addCuepoint({time:t.endTime,subtitleEnd:t.title,visible:!1}),0!==t.startTime||e.video.time||e.splash||e.trigger("cuepoint",[e,n]),e.splash&&e.one("ready.hlsjs",function(){e.trigger("cuepoint",[e,n])})},S=function(d,c){var b=r.bean,v=function(e,t,a){if(e.debug&&console.log("recovery.hlsjs","<-",t),o.removeClass(c,"is-paused"),o.addClass(c,"is-seeking"),a)Z.startLoad();else{var n=g.now();!z||3e3<n-z?(z=g.now(),Z.recoverMediaError()):(!W||3e3<n-W)&&(W=g.now(),Z.swapAudioCodec(),Z.recoverMediaError())}0<Y&&(Y-=1),b.one(U,"seeked.hlsjs",function(){U.paused&&(o.removeClass(c,"is-poster"),d.poster=!1,U.play()),o.removeClass(c,"is-seeking")})},S=function(e,t,a){var n={code:e};return 2<e&&(n.video=s(d.video,{src:t,url:a||t})),n},A=function(){b.one(U,"timeupdate.hlsjs",function(){o.addClass(c,"is-poster"),d.poster=!0})},L=function(){u&&d.poster&&b.one(U,"timeupdate.hlsjs",function(){o.removeClass(c,"is-poster"),d.poster=!1})},w=0,C=function(e){if(i&&1<i.length){var t=Z.audioTracks,a=t.filter(function(a){var n=Z.levels[e].attrs;return a.autoselect&&n&&a.groupId===n.AUDIO&&a.name===t[Z.audioTrack].name}),n=a.length&&a[0].id;void 0!==n&&n!==Z.audioTrack&&(Z.audioTrack=n)}},R=function(e){o.find(".fp-audio",c)[0].innerHTML=e.lang||e.name,o.find(".fp-audio-menu a",c).forEach(function(t){var a=t.getAttribute("data-audio"),n=a===e.name;o.toggleClass(t,"fp-selected",n),o.toggleClass(t,"fp-color",n)})},D=function(){o.find(".fp-audio-menu",c).forEach(o.removeNode),o.find(".fp-audio",c).forEach(o.removeNode)},x=function(e){var t=o.find(".fp-subtitle-menu",c)[0];o.toggleClass(o.find("a.fp-selected",t)[0],"fp-selected"),o.toggleClass(o.find("a[data-subtitle-index=\""+e+"\"]",t)[0],"fp-selected")},_=function(e,t){var a=I(e.payload),n=e.frag.trackId;a&&(!K[n]&&(K[n]=[]),a=t.subtitleParser(a),a.forEach(function(e){if(e.text&&(K[n].push(e),d.ready&&(E(d,e,K[n].length),d.live))){var t=d.video.seekOffset;K[n]=K[n].filter(function(e){return e.endTime>=t}),d.subtitles=d.subtitles.filter(function(e){return e.endTime>=t}),d.cuepoints.forEach(function(e){e.subtitle&&e.time<t&&d.removeCuepoint(e)})}}))},k=function(){[].forEach.call(U.textTracks,function(e){"subtitles"===e.kind&&(e.mode="hidden")})},P=function(e,t){var a=e.subtitleTracks;t.subtitles&&a.length&&l.inlineVideo&&!u&&(a=a.filter(function(e){return e.groupId===a[0].groupId}),d.video.subtitles=a.map(function(e){var t={kind:"subtitles",id:e.id,srclang:e.lang,label:e.name,default:e.default};return o.append(U,o.createElement("track",t)),t}),d.on("ready.hlsjs",function(e,t){var a=Z.subtitleTracks,n;a&&a.length&&(J?o.addClass(U,"native-subtitles"):k(),a.map(function(e,t){e.default&&(Z.subtitleTrack=t)}),n=Z.subtitleTrack,-1<n?(!J&&K[n]&&K[n].forEach(function(e,a){E(t,e,a+1)}),x(n)):x(-1))}),b.on(c,"click.hlsjs",".fp-subtitle-menu [data-subtitle-index]",function(t){t.preventDefault();var e=t.target.getAttribute("data-subtitle-index");return d.disableSubtitles(),Z.subtitleTrack=e,0>e?void k():void(x(e),!J&&K[e]&&K[e].forEach(function(e,t){E(d,e,t+1)}))}))},O=function(e){i=[],V=[],e.levels.forEach(function(e){var t=e.attrs&&e.attrs.AUDIO,a=e.audioCodec;t&&0>i.indexOf(t)&&(!a||f.isTypeSupported("audio/mp4;codecs="+a))&&i.push(t)}),i.length&&(V=e.audioTracks.filter(function(e){return e.groupId===i[0]})),!l.inlineVideo||u||2>V.length||(b.on(c,"click.hlsjs",".fp-audio",function(){var e=o.find(".fp-audio-menu",c)[0];o.hasClass(e,"fp-active")?d.hideMenu():d.showMenu(e)}),b.on(c,"click.hlsjs",".fp-audio-menu a",function(t){var e=t.target.getAttribute("data-audio"),a=Z.audioTracks,n=a[Z.audioTrack].groupId,r=a.filter(function(t){return t.groupId===n&&(t.name===e||t.lang===e)})[0];Z.audioTrack=r.id,R(r)}),d.on("ready.hlsjs",function(){if(D(),Z&&V&&!(2>V.length)){var e=o.find(".fp-ui",c)[0],t=o.find(".fp-controls",e)[0],a=Z.audioTracks[Z.audioTrack],n=o.createElement("div",{className:"fp-menu fp-audio-menu",css:{width:"auto"}},"<strong>Audio</strong>");V.forEach(function(e){n.appendChild(o.createElement("a",{"data-audio":e.name},e.name))}),e.appendChild(n),t.appendChild(o.createElement("strong",{className:"fp-audio"},a)),R(a)}}))},M=function(e){return e?0>d.qualities.indexOf(e)&&(e="abr"):e=d.quality,e.toLowerCase().replace(/\ /g,"")},N=function(){var e=d.qualities;e&&(o.removeClass(c,"quality-abr"),e.forEach(function(e){o.removeClass(c,"quality-"+M(e))}))},F=function(){u&&(delete d.hlsQualities,N(),o.find(".fp-quality-selector",c).forEach(o.removeNode))},B=function(){return d.hlsQualities[d.qualities.indexOf(d.quality)+1]},G=-1,j=function(e,t,r){var s=r.levels,l=function(e){return isNaN(+e)?e.level:e},p,g,m;if(F(),e&&!(2>s.length)){if("drive"===e){switch(s.length){case 4:p=[1,2,3];break;case 5:p=[1,2,3,4];break;case 6:p=[1,3,4,5];break;case 7:p=[1,3,5,6];break;case 8:p=[1,3,6,7];break;default:if(3>s.length||s[0].height&&s[2].height&&s[0].height===s[2].height)return;p=[1,2];}p.unshift(-1)}else switch(typeof e){case"object":p=e.map(l);break;case"string":p=e.split(/\s*,\s*/).map(Number);break;default:p=s.map(function(e,t){return t}),p.unshift(-1);}return u&&0>p.indexOf(-1)&&p.unshift(-1),p=p.filter(function(e){if(-1<e&&e<s.length){var t=s[e];return!t.videoCodec||t.videoCodec&&f.isTypeSupported("video/mp4;codecs="+t.videoCodec)}return-1==e}),g=p.map(function(t,r){var o=s[t],i="object"==typeof e?e.filter(function(e){return l(e)===t})[0]:t,d="Level "+(r+1);return 0>t?d=i.label||"Auto":i.label?d=i.label:(o.width&&o.height&&(d=n(o.width,o.height)+"p"),"drive"!==e&&o.bitrate&&(d+=" ("+a(o.bitrate/1e3)+"k)")),u?d:{value:t,label:d}}),u?void(d.hlsQualities=p,d.qualities=g.slice(1),m=o.createElement("ul",{class:"fp-quality-selector"}),o.find(".fp-ui",c)[0].appendChild(m),!d.quality||1>g.indexOf(d.quality)?d.quality="abr":(Z.loadLevel=B(),Z.config.startLevel=Z.loadLevel),g.forEach(function(e){m.appendChild(o.createElement("li",{"data-quality":M(e)},e))}),o.addClass(c,"quality-"+M()),b.on(c,"click.hlsjs",".fp-quality-selector li",function(a){var e=a.currentTarget,n=o.find(".fp-quality-selector li",c),r=t.smoothSwitching,s=U.paused;o.hasClass(e,"active")||(!s&&!r&&b.one(U,"pause.hlsjs",function(){o.removeClass(c,"is-paused")}),n.forEach(function(t,a){var n=t===e;n&&(d.quality=0<a?d.qualities[a-1]:"abr",r&&!d.poster?Z.nextLevel=B():Z.currentLevel=B(),o.addClass(e,"active"),s&&U.play()),o.toggleClass(t,"active",n)}),N(),o.addClass(c,"quality-"+M()))})):(d.video.qualities=g,-1<G||0>p.indexOf(-1)?(Z.loadLevel=0>p.indexOf(G)?p[0]:G,Z.config.startLevel=Z.loadLevel,d.video.quality=Z.loadLevel):d.video.quality=-1,void(G=d.video.quality))}},U,Z,Y,z,W,H,e,i,V,J,K;return!/^6\.0\.[0-3]$/.test(p)||d.conf.splash||d.conf.poster||d.conf.autoplay||(H=o.css(c,"backgroundColor"),e="none"!==o.css(c,"backgroundImage")||H&&"rgba(0, 0, 0, 0)"!==H&&"transparent"!==H,e&&(d.conf.poster=!0)),{engineName:"hlsjs",pick:function(e){var t=e.filter(function(e){return m(e.type)})[0];return"string"==typeof t.src&&(t.src=o.createAbsoluteUrl(t.src)),t},load:function(e){var a=d.conf,n={ended:"finish",loadeddata:"ready",pause:"pause",play:"resume",progress:"buffer",ratechange:"speed",seeked:"seek",timeupdate:"progress",volumechange:"volume",error:"error"},r=t.Events,i=!!e.autoplay||!!a.autoplay||!!a.splash,p=e.hlsQualities||a.hlsQualities,f=s(T,a.hlsjs,e.hlsjs),g=s({},f);if(!1===e.hlsQualities&&(p=!1),J=f.subtitles&&l.subtitles&&a.nativesubtitles,Z?(Z.destroy(),o.find("track",U).forEach(o.removeNode),o.removeClass(U,"native-subtitles"),(d.video.src&&e.src!==d.video.src||e.index)&&o.attr(U,"autoplay","autoplay")):(h(c),U=o.createElement("video",{class:"fp-engine hlsjs-engine",autoplay:!!i&&"autoplay",volume:d.volumeLevel}),l.mutedAutoplay&&!a.splash&&i&&(U.muted=!0),Object.keys(n).forEach(function(e){var t=n[e],r=e+".hlsjs",l;b.on(U,r,function(n){a.debug&&0>t.indexOf("progress")&&console.log(r,"->",t,n.originalEvent);var e=U.currentTime,p=U.seekable,g=d.video,m=d.dvr?g.seekOffset:d.live?Z.liveSyncPosition:0,y=U.buffered,h=[],b=g.src,I=d.quality,E,T,A;switch(t){case"ready":l=s(g,{duration:U.duration,seekable:p.length&&p.end(null),width:U.videoWidth,height:U.videoHeight,url:b});break;case"resume":L(),f.bufferWhilePaused||Z.startLoad(e),e<m&&(U.currentTime=m);break;case"seek":L(),!f.bufferWhilePaused&&U.paused&&Z.stopLoad(),l=e;break;case"pause":f.bufferWhilePaused||Z.stopLoad();break;case"progress":l=e;break;case"speed":l=U.playbackRate;break;case"volume":l=U.volume;break;case"buffer":for(E=0;E<y.length;E+=1)h.push(y.end(E));l=h.filter(function(t){return t>=e}).sort()[0],g.buffer=l;break;case"finish":f.bufferWhilePaused&&Z.autoLevelEnabled&&(g.loop||2>a.playlist.length||!1===a.advance)&&(Z.nextLoadLevel=w);break;case"error":if(A=U.error&&U.error.code,f.recoverMediaError&&(3===A||!A)||f.recoverNetworkError&&2===A||f.recover&&(2===A||3===A))return n.preventDefault(),void v(a,t,2===A);l=S(A,b);}d.trigger(t,[d,l]),u&&"ready"===t&&I&&(T="abr"===I?0:d.qualities.indexOf(I)+1,o.addClass(o.find(".fp-quality-selector li",c)[T],"active"))})}),d.on("error.hlsjs",function(){Z&&d.engine.unload()}).on("beforeseek.hlsjs",function(t,e,a){void 0===a?t.preventDefault():!f.bufferWhilePaused&&e.paused&&Z.startLoad(a)}),u?a.poster&&(d.on("stop.hlsjs",A),d.live&&!i&&!d.video.autoplay&&b.one(U,"seeked.hlsjs",A)):d.on("quality.hlsjs",function(e,t,a){f.smoothSwitching?Z.nextLevel=a:Z.currentLevel=a,G=a}),o.prepend(o.find(".fp-player",c)[0],U)),d.video=e,w=0,Object.keys(f).forEach(function(e){t.DefaultConfig.hasOwnProperty(e)||delete g[e];var a=f[e];"adaptOnStartOnly"===e?a&&(g.startLevel=-1):"autoLevelCapping"===e?(!1===a&&(a=-1),g[e]=a):"startLevel"===e?("auto"===a?a=-1:"firstLevel"===a?a=void 0:void 0,g[e]=a):"recover"===e?(f.recoverMediaError=!1,f.recoverNetworkError=!1,Y=a):"strict"===e?a&&(f.recoverMediaError=!1,f.recoverNetworkError=!1,Y=0):void 0}),Z=new t(g),d.engine.hlsjs=Z,z=null,W=null,d.disableSubtitles(),K={},Object.keys(r).forEach(function(e){var n=r[e],i=f.listeners,l=i&&-1<i.indexOf(n);Z.on(n,function(n,r){var i={},g=t.ErrorTypes,m=t.ErrorDetails,h=d.video,E=h.src,T;switch(e){case"MANIFEST_PARSED":y(a)&&(u||!d.pluginQualitySelectorEnabled)?j(p,f,r):u&&delete d.quality;break;case"MANIFEST_LOADED":O(r);break;case"SUBTITLE_TRACKS_UPDATED":P(r,f);break;case"MEDIA_ATTACHED":Z.loadSource(E);break;case"FRAG_LOADED":"subtitle"===r.frag.type&&f.subtitles&&!J&&_(r,a),f.bufferWhilePaused&&!d.live&&Z.autoLevelEnabled&&Z.nextLoadLevel>w&&(w=Z.nextLoadLevel);break;case"SUBTITLE_TRACK_SWITCH":J&&[].forEach.call(U.textTracks,function(e){e.mode=Z.subtitleTracks[r.id].lang===e.language&&"subtitles"===e.kind?"showing":"hidden"});break;case"FRAG_PARSING_METADATA":if(u)return;r.samples.forEach(function(e){var t;t=function(){if(!(U.currentTime<e.dts)){b.off(U,"timeupdate.hlsjs",t);var a=I(e.unit||e.data);d.trigger("metadata",[d,{key:a.substr(10,4),data:a}])}},b.on(U,"timeupdate.hlsjs",t)});break;case"LEVEL_UPDATED":d.live&&(s(h,{seekOffset:r.details.fragments[0].start+Z.config.nudgeOffset,duration:Z.liveSyncPosition}),d.dvr&&d.playing&&d.trigger("dvrwindow",[d,{start:h.seekOffset,end:Z.liveSyncPosition}]));break;case"LEVEL_SWITCHED":f.audioABR&&d.one("buffer.hlsjs",function(e,t,a){a>t.video.time&&C(r.level)});break;case"BUFFER_APPENDED":o.removeClass(c,"is-seeking");break;case"ERROR":if(r.fatal||f.strict){switch(r.type){case g.NETWORK_ERROR:f.recoverNetworkError||Y?v(a,r.type,!0):r.frag&&r.frag.url?(i.url=r.frag.url,T=2):T=4;break;case g.MEDIA_ERROR:f.recoverMediaError||Y?v(a,r.type):T=3;break;default:T=5;}void 0!==T&&(i=S(T,E,r.url),d.trigger("error",[d,i]))}else(r.details===m.FRAG_LOOP_LOADING_ERROR||r.details===m.BUFFER_STALLED_ERROR)&&o.addClass(c,"is-seeking");}l&&d.trigger(n,[d,r])})}),f.adaptOnStartOnly&&b.one(U,"timeupdate.hlsjs",function(){Z.loadLevel=Z.loadLevel}),Z.attachMedia(U),i&&U.paused){var m=U.play();void 0!==m&&m.catch(function(){l.mutedAutoplay||(d.unload(),!u&&d.message("Please click the play button",3e3))})}},resume:function(){U.play()},pause:function(){U.pause()},seek:function(e){U&&(U.currentTime=e)},volume:function(e){U&&(U.volume=e)},speed:function(e){U.playbackRate=e,d.trigger("speed",[d,e])},unload:function(){if(Z){d.disableSubtitles(),Z.destroy(),Z=0,F(),D(),d.off(".hlsjs"),b.off(c,".hlsjs"),b.off(U,".hlsjs"),o.removeNode(U),U=0}}}},T;t.isSupported()&&0!==p.indexOf("5.")&&(S.engineName="hlsjs",S.hlsjsClientVersion=t.version,S.canPlay=function(e,t){return!1!==t.hlsjs&&!1!==t.clip.hlsjs&&(T=s({bufferWhilePaused:!0,smoothSwitching:!0,recoverMediaError:!0},t.hlsjs,t.clip.hlsjs),m(e)&&(!(d.safari&&l.dataload)||T.safari))},r(function(e,t){var a=e.conf;u?e.pluginQualitySelectorEnabled=y(a)&&S.canPlay("application/x-mpegurl",a):l.mutedAutoplay&&!a.splash&&!a.autoplay&&("7.1.0"===p||"7.0.0"===p)&&(e.splash=!0,a.splash="string"!=typeof a.poster||a.poster,a.poster=void 0,a.autoplay=!0,h(t))}),r.engines.unshift(S))};"object"==typeof t&&t.exports?t.exports=r.bind(void 0,e("hls.js")):window.Hls&&window.flowplayer&&r(window.Hls,window.flowplayer)})()},{"hls.js":6,"text-encoding":8}],5:[function(e,t,a){var n=Math.LN2,r=Math.log,o=Math.abs,l=Math.floor,d=Math.ceil,p=Math.max,u=Math.round,f=Math.pow,g=String.fromCharCode,m=Math.min;(function(i){(function(){/*!

   Flowplayer v7.2.7 (2018-08-13) | flowplayer.com/license

*/ /*! (C) WebReflection Mit Style License */(function(p){function I(l,e,t,n){for(var r=t.slice(),s=y(e,l),o=0,d=r.length,a;o<d&&(handler=r[o],"object"==typeof handler&&"function"==typeof handler.handleEvent?handler.handleEvent(s):handler.call(l,s),!s.stoppedImmediatePropagation);o++);return a=!s.stoppedPropagation,n&&a&&l.parentNode?l.parentNode.dispatchEvent(s):!s.defaultPrevented}function g(a,e){return{configurable:!0,get:a,set:e}}function e(o,e,t){var n=a(e||o,t);s(o,"textContent",g(function(){return n.get.call(this)},function(t){n.set.call(this,t)}))}function y(a,e){return a.currentTarget=e,a.eventPhase=a.target===a.currentTarget?2:3,a}function b(a,e){for(var t=a.length;t--&&a[t]!==e;);return t}function E(){if("BR"===this.tagName)return"\n";for(var a=this.firstChild,n=[];a;)8!==a.nodeType&&7!==a.nodeType&&n.push(a.textContent),a=a.nextSibling;return n.join("")}function S(t){!w&&f.test(document.readyState)&&(w=!w,document.detachEvent(C,S),t=document.createEvent("Event"),t.initEvent(r,!0,!0),document.dispatchEvent(t))}function T(a){for(var e;e=this.lastChild;)this.removeChild(e);null!=a&&this.appendChild(document.createTextNode(a))}function A(e,t){return t||(t=p.event),t.target||(t.target=t.srcElement||t.fromElement||document),t.timeStamp||(t.timeStamp=new Date().getTime()),t}if(!document.createEvent){var L=!0,w=!1,C="onreadystatechange",r="DOMContentLoaded",R="__IE8__"+Math.random(),i=p.Object,s=i.defineProperty||function(a,e,t){a[e]=t.value},o=i.defineProperties||function(e,t){for(var a in t)if(u.call(t,a))try{s(e,a,t[a])}catch(t){p.console&&console.log(a+" failed on object:",e,t.message)}},a=i.getOwnPropertyDescriptor,u=i.prototype.hasOwnProperty,l=p.Element.prototype,c=p.Text.prototype,f=/loaded|complete/,d={},h=document.createElement("div");e(p.HTMLCommentElement.prototype,l,"nodeValue"),e(p.HTMLScriptElement.prototype,null,"text"),e(c,null,"nodeValue"),e(p.HTMLTitleElement.prototype,null,"text"),s(p.HTMLStyleElement.prototype,"textContent",function(a){return g(function(){return a.get.call(this.styleSheet)},function(e){a.set.call(this.styleSheet,e)})}(a(p.CSSStyleSheet.prototype,"cssText"))),o(l,{textContent:{get:E,set:T},firstElementChild:{get:function(){for(var a=this.childNodes||[],e=0,r=a.length;e<r;e++)if(1==a[e].nodeType)return a[e]}},lastElementChild:{get:function(){for(var a=this.childNodes||[],e=a.length;e--;)if(1==a[e].nodeType)return a[e]}},previousElementSibling:{get:function(){for(var t=this.previousSibling;t&&1!=t.nodeType;)t=t.previousSibling;return t}},nextElementSibling:{get:function(){for(var t=this.nextSibling;t&&1!=t.nodeType;)t=t.nextSibling;return t}},childElementCount:{get:function(){for(var a=0,r=this.childNodes||[],t=r.length;t--;a+=1==r[t].nodeType);return a}},addEventListener:{value:function(l,e,t){var n=this,r="on"+l,i=n[R]||s(n,R,{value:{}})[R],o=i[r]||(i[r]={}),a=o.h||(o.h=[]),p;if(!u.call(o,"w")){if(o.w=function(t){return t[R]||I(n,A(n,t),a,!1)},!u.call(d,r))if(/^[a-z]+$/.test(l))try{p=document.createEventObject(),p[R]=!0,9!=n.nodeType&&null==n.parentNode&&h.appendChild(n),n.fireEvent(r,p),d[r]=!0}catch(e){for(d[r]=!1;h.hasChildNodes();)h.removeChild(h.firstChild)}else d[r]=!1;(o.n=d[r])&&n.attachEvent(r,o.w)}0>b(a,e)&&a[t?"unshift":"push"](e)}},dispatchEvent:{value:function(a){var e=this,t="on"+a.type,n=e[R],r=n&&n[t],o;return a.target||(a.target=e),!!r?r.n?e.fireEvent(t,a):I(e,a,r.h,!0):!(o=e.parentNode)||o.dispatchEvent(a),!a.defaultPrevented}},removeEventListener:{value:function(n,e){var t=this,r=t[R],o=r&&r["on"+n],i=o&&o.h,a=i?b(i,e):-1;-1<a&&i.splice(a,1)}}}),o(c,{addEventListener:{value:l.addEventListener},dispatchEvent:{value:l.dispatchEvent},removeEventListener:{value:l.removeEventListener}}),o(p.XMLHttpRequest.prototype,{addEventListener:{value:function(l,e,t){var n=this,r="on"+l,i=n[R]||s(n,R,{value:{}})[R],o=i[r]||(i[r]={}),a=o.h||(o.h=[]);0>b(a,e)&&(n[r]||(n[r]=function(){var e=document.createEvent("Event");e.initEvent(l,!0,!0),n.dispatchEvent(e)}),a[t?"unshift":"push"](e))}},dispatchEvent:{value:function(a){var e=this,t="on"+a.type,n=e[R],r=n&&n[t];return!!r&&(r.n?e.fireEvent(t,a):I(e,a,r.h,!0))}},removeEventListener:{value:l.removeEventListener}}),o(p.Event.prototype,{bubbles:{value:!0,writable:!0},cancelable:{value:!0,writable:!0},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(a,e,t){this.type=a,this.bubbles=!!e,this.cancelable=!!t,this.bubbles||this.stopPropagation()}}}),o(p.HTMLDocument.prototype,{textContent:{get:function(){return 11===this.nodeType?E.call(this):null},set:function(t){11===this.nodeType&&T.call(this,t)}},addEventListener:{value:function(e,t,a){var n=this;l.addEventListener.call(n,e,t,a),L&&"DOMContentLoaded"===e&&!f.test(n.readyState)&&(L=!1,n.attachEvent("onreadystatechange",S),p==top&&function e(){try{n.documentElement.doScroll("left"),S()}catch(a){setTimeout(e,50)}}())}},dispatchEvent:{value:l.dispatchEvent},removeEventListener:{value:l.removeEventListener},createEvent:{value:function(a){var e;if("Event"!==a)throw new Error("unsupported "+a);return e=document.createEventObject(),e.timeStamp=new Date().getTime(),e}}}),o(p.Window.prototype,{getComputedStyle:{value:function(){function a(t){this._=t}function n(){}var e=function(a,e){return e.toUpperCase()};return a.prototype.getPropertyValue=function(t){var n=this._,r=n.style,o=n.currentStyle,s=n.runtimeStyle,a,d,p;return t=("float"===t?"style-float":t).replace(/\-([a-z])/g,e),a=o?o[t]:r[t],/^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/.test(a)&&!/^(top|right|bottom|left)$/.test(t)&&(d=r.left,p=s&&s.left,p&&(s.left=o.left),r.left="fontSize"===t?"1em":a,a=r.pixelLeft+"px",r.left=d,p&&(s.left=p)),null==a?a:a+""||"auto"},n.prototype.getPropertyValue=function(){return null},function(r,e){return e?new n(r):new a(r)}}()},addEventListener:{value:function(e,t,a){var n=p,r="on"+e,o;n[r]||(n[r]=function(t){return I(n,A(n,t),o,!1)}),o=n[r][R]||(n[r][R]=[]),0>b(o,t)&&o[a?"unshift":"push"](t)}},dispatchEvent:{value:function(e){var t=p["on"+e.type];return!t||!1!==t.call(p,e)&&!e.defaultPrevented}},removeEventListener:{value:function(e,t){var n=(p["on"+e]||i)[R],r=n?b(n,t):-1;-1<r&&n.splice(r,1)}}})}})(this),function(e){if("object"==typeof a&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"==typeof window?"undefined"==typeof i?"undefined"==typeof self?this:self:i:window,n.flowplayer=e()}}(function(){var t;return function d(p,t,n){function a(i,o){if(!t[i]){if(!p[i]){var s="function"==typeof e&&e;if(!o&&s)return s(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[i]={exports:{}};p[i][0].call(c.exports,function(t){var e=p[i][1][t];return a(e?e:t)},c,c.exports,d,p,t,n)}return t[i].exports}for(var r="function"==typeof e&&e,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t){'use strict';var n=t.exports={},r=e("class-list"),o=window.jQuery,a=e("punycode"),i=e("computed-style");n.noop=function(){},n.identity=function(e){return e},n.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},n.find=function(e,t){return o?o(e,t).toArray():(t=t||document,Array.prototype.map.call(t.querySelectorAll(e),function(e){return e}))},n.text=function(e,t){e["innerText"in e?"innerText":"textContent"]=t},n.findDirect=function(e,t){return n.find(e,t).filter(function(e){return e.parentNode===t})},n.hasClass=function(e,t){return!("string"!=typeof e.className)&&r(e).contains(t)},n.isSameDomain=function(e){var t=window.location,r=n.createElement("a",{href:e});return t.hostname===r.hostname&&t.protocol===r.protocol&&t.port===r.port},n.css=function(e,t,a){return"object"==typeof t?Object.keys(t).forEach(function(a){n.css(e,a,t[a])}):"undefined"==typeof a?e?i(e,t):void 0:""===a?e?e.style.removeProperty(t):void 0:e?e.style.setProperty(t,a):void 0},n.createElement=function(t,a,r){try{var i=document.createElement(t);for(var e in a)a.hasOwnProperty(e)&&("css"===e?n.css(i,a[e]):n.attr(i,e,a[e]));return r&&(i.innerHTML=r),i}catch(n){if(!o)throw n;return o("<"+t+">"+r+"</"+t+">").attr(a)[0]}},n.toggleClass=function(e,t,a){if(e){var n=r(e);"undefined"==typeof a?n.toggle(t):a?n.add(t):!a&&n.remove(t)}},n.addClass=function(e,t){return n.toggleClass(e,t,!0)},n.removeClass=function(e,t){return n.toggleClass(e,t,!1)},n.append=function(e,t){return e.appendChild(t),e},n.appendTo=function(e,t){return n.append(t,e),e},n.prepend=function(e,t){e.insertBefore(t,e.firstChild)},n.insertAfter=function(e,t,a){t==n.lastChild(e)&&e.appendChild(a);var r=Array.prototype.indexOf.call(e.children,t);e.insertBefore(a,e.children[r+1])},n.html=function(e,t){e=e.length?e:[e],e.forEach(function(e){e.innerHTML=t})},n.attr=function(t,a,r){if("class"===a&&(a="className"),n.hasOwnOrPrototypeProperty(t,a))try{t[a]=r}catch(n){if(o)o(t).attr(a,r);else throw n}else!1===r?t.removeAttribute(a):t.setAttribute(a,r);return t},n.prop=function(e,t,a){return"undefined"==typeof a?e&&e[t]:void(e[t]=a)},n.offset=function(e){var t=e.getBoundingClientRect();return e.offsetWidth/e.offsetHeight>e.clientWidth/e.clientHeight&&(t={left:100*t.left,right:100*t.right,top:100*t.top,bottom:100*t.bottom,width:100*t.width,height:100*t.height}),t},n.width=function(e,t){if(t)return e.style.width=(""+t).replace(/px$/,"")+"px";var a=n.offset(e).width;return"undefined"==typeof a?e.offsetWidth:a},n.height=function(e,t){if(t)return e.style.height=(""+t).replace(/px$/,"")+"px";var a=n.offset(e).height;return"undefined"==typeof a?e.offsetHeight:a},n.lastChild=function(e){return e.children[e.children.length-1]},n.hasParent=function(e,t){for(var a=e.parentElement;a;){if("string"!=typeof t){if(a===t)return!0;}else if(n.matches(a,t))return!0;a=a.parentElement}return!1},n.createAbsoluteUrl=function(e){return n.createElement("a",{href:e}).href},n.xhrGet=function(e,t,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){return 4===this.readyState?400<=this.status?a():void t(this.responseText):void 0},n.open("get",e,!0),n.send()},n.pick=function(e,t){var a={};return t.forEach(function(t){e.hasOwnProperty(t)&&(a[t]=e[t])}),a},n.hostname=function(e){return a.toUnicode(e||window.location.hostname)},n.browser={webkit:"WebkitAppearance"in document.documentElement.style},n.getPrototype=function(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__},n.hasOwnOrPrototypeProperty=function(e,t){for(var a=e;a;){if(Object.prototype.hasOwnProperty.call(a,t))return!0;a=n.getPrototype(a)}return!1},n.matches=function(e,t){var a=Element.prototype,n=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(e){for(var t=this,a=(t.document||t.ownerDocument).querySelectorAll(e),n=0;a[n]&&a[n]!==t;)n++;return!!a[n]};return n.call(e,t)},function(e){function t(e){return e.replace(/-[a-z]/g,function(e){return e[1].toUpperCase()})}"undefined"!=typeof e.setAttribute&&(e.setProperty=function(e,a){return this.setAttribute(t(e),a+"")},e.getPropertyValue=function(e){return this.getAttribute(t(e))||null},e.removeProperty=function(e){var a=this.getPropertyValue(e);return this.removeAttribute(t(e)),a})}(window.CSSStyleDeclaration.prototype)},{"class-list":36,"computed-style":37,punycode:44}],2:[function(e,t){'use strict';var a=e("../common");t.exports=function(e,t,n,r){n=n||"opaque";var o="obj"+(""+Math.random()).slice(2,15),i="<object class=\"fp-engine\" id=\""+o+"\" name=\""+o+"\" ",s=-1<navigator.userAgent.indexOf("MSIE");i+=s?"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\">":" data=\""+e+"\" type=\"application/x-shockwave-flash\">";var l={width:"100%",height:"100%",allowscriptaccess:"always",wmode:n,quality:"high",flashvars:"",movie:e+(s?"?"+o:""),name:o};"transparent"!==n&&(l.bgcolor=r||"#333333"),Object.keys(t).forEach(function(e){l.flashvars+=e+"="+t[e]+"&"}),Object.keys(l).forEach(function(e){i+="<param name=\""+e+"\" value=\""+l[e]+"\"/>"}),i+="</object>";var d=a.createElement("div",{},i);return a.find("object",d)},window.attachEvent&&window.attachEvent("onbeforeunload",function(){window.__flash_savedUnloadHandler=window.__flash_unloadHandler=function(){}})},{"../common":1}],3:[function(e){'use strict';function t(e){return /^https?:/.test(e)}var a=e("../flowplayer"),n=e("../common"),r=e("./embed"),o=e("extend-object"),i=e("bean"),s;s=function(l,d){function p(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),e?"#"+t(e[1])+t(e[2])+t(e[3]):void 0}function u(e){if(7===e.length)return e;var t=e.split("").slice(1);return"#"+t.map(function(e){return e+e}).join("")}function c(e){return /application\/x-mpegurl/i.test(e.type)}var f=l.conf,g=[],m={engineName:s.engineName,pick:function(e){var r=o({},function(){if(a.support.flashVideo){for(var t=0,n,r;t<e.length;t++)if(r=e[t],/mp4|flv|flash/i.test(r.type)&&(n=r),l.conf.swfHls&&/mpegurl/i.test(r.type)&&(n=r),n&&!/mp4/i.test(n.type))return n;return n}}());if(r)return!r.src||t(r.src)||l.conf.rtmp||r.rtmp||(r.src=n.createAbsoluteUrl(r.src)),r},suspendEngine:function(){v=!0},resumeEngine:function(){v=!1},load:function(e){function s(e){return e.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}y=e,g.forEach(function(e){clearTimeout(e)});var I=n.findDirect("video",d)[0]||n.find(".fp-player > video",d)[0],E=e.src,S=t(E),T=function(){n.removeNode(I)};a.support.video&&n.prop(I,"autoplay")&&function(e){return e.some(function(e){return!!I.canPlayType(e.type)})}(e.sources)?i.one(I,"timeupdate",T):T();var A=e.rtmp||f.rtmp;if(S||A||(E=n.createAbsoluteUrl(E)),b&&c(e)&&b.data!==n.createAbsoluteUrl(f.swfHls)&&m.unload(),b){["live","preload","loop"].forEach(function(t){e.hasOwnProperty(t)&&b.__set(t,e[t])}),Object.keys(e.flashls||{}).forEach(function(t){b.__set("hls_"+t,e.flashls[t])});var L=!1;if(!S&&A)b.__set("rtmp",A.url||A);else{var w=b.__get("rtmp");L=!!w,b.__set("rtmp",null)}b.__play(E,L||e.rtmp&&e.rtmp!==f.rtmp)}else{h="fpCallback"+(""+Math.random()).slice(3,15),E=s(E);var C={hostname:f.embedded?n.hostname(f.hostname):n.hostname(location.hostname),url:E,callback:h};d.getAttribute("data-origin")&&(C.origin=d.getAttribute("data-origin")),["proxy","key","autoplay","preload","subscribe","live","loop","debug","splash","poster","rtmpt"].forEach(function(t){f.hasOwnProperty(t)&&(C[t]=f[t]),e.hasOwnProperty(t)&&(C[t]=e[t]),(f.rtmp||{}).hasOwnProperty(t)&&(C[t]=(f.rtmp||{})[t]),(e.rtmp||{}).hasOwnProperty(t)&&(C[t]=(e.rtmp||{})[t])}),f.splash&&(C.autoplay=!0),f.rtmp&&(C.rtmp=f.rtmp.url||f.rtmp),e.rtmp&&(C.rtmp=e.rtmp.url||e.rtmp),Object.keys(e.flashls||{}).forEach(function(t){var a=e.flashls[t];C["hls_"+t]=a});var R="undefined"==typeof e.hlsQualities?f.hlsQualities:e.hlsQualities;"undefined"!=typeof R&&(C.hlsQualities=R?encodeURIComponent(JSON.stringify(R)):R),void 0!==f.bufferTime&&(C.bufferTime=f.bufferTime),void 0!==f.bufferTimeMax&&(C.bufferTimeMax=f.bufferTimeMax),S&&delete C.rtmp,C.rtmp&&(C.rtmp=s(C.rtmp));var D=f.bgcolor||n.css(d,"background-color")||"",x;0===D.indexOf("rgb")?x=p(D):0===D.indexOf("#")&&(x=u(D)),C.initialVolume=l.volumeLevel;var _=c(e)?f.swfHls:f.swf;b=r(_,C,f.wmode,x)[0];var k=n.find(".fp-player",d)[0];n.prepend(k,b),l.off("quality.flashengine").on("quality.flashengine",function(e,t,a){var n="undefined"==typeof l.video.hlsQualities?l.conf.hlsQualities:l.video.hlsQualities;if(n)try{b.__quality(a)}catch(t){l.debug("Error changing quality in flash engine",t)}}),setTimeout(function(){try{if(!b.PercentLoaded())return l.trigger("error",[l,{code:7,url:f.swf}])}catch(t){}},5e3),g.push(setTimeout(function(){"undefined"==typeof b.PercentLoaded&&l.trigger("flashdisabled",[l])},15e3)),g.push(setTimeout(function(){"undefined"==typeof b.PercentLoaded&&l.trigger("flashdisabled",[l,!1])},500)),l.off("resume.flashhack").on("resume.flashhack",function(){var e=setTimeout(function(){var e=b.__status().time,t=setTimeout(function(){l.playing&&!l.loading&&b.__status().time===e&&l.trigger("flashdisabled",[l])},400);g.push(t),l.one("seek.flashhack pause.flashhack load.flashack",function(){clearTimeout(t)})},800);g.push(e),l.one("progress",function(){clearTimeout(e)})}),b.pollInterval=setInterval(function(){if(b&&!v){var t=b.__status?b.__status():null;t&&((l.conf.live||l.live||e.live)&&(e.seekOffset=t.seekOffset,e.duration=t.duration+t.seekOffset),l.playing&&t.time&&t.time!==l.video.time&&l.trigger("progress",[l,t.time]),e.buffer=t.buffer/e.bytes*e.duration,l.trigger("buffer",[l,e.buffer]),!e.buffered&&0<t.time&&(e.buffered=!0,l.trigger("buffered",[l])))}},250),window[h]=function(e,t){var a=y;f.debug&&(0===e.indexOf("debug")&&t&&t.length?console.log.apply(console,["-- "+e].concat(t)):console.log("--",e,t));var n={type:e};switch(e){case"ready":t=o(a,t);break;case"click":n.flash=!0;break;case"keydown":n.which=t;break;case"seek":a.time=t;break;case"status":l.trigger("progress",[l,t.time]),t.buffer<a.bytes&&!a.buffered?(a.buffer=t.buffer/a.bytes*a.duration,l.trigger("buffer",a.buffer)):!a.buffered&&(a.buffered=!0,l.trigger("buffered"));break;case"metadata":var r=atob(t);t={key:r.substr(10,4),data:r.substr(21)};}"click"===e||"keydown"===e?(n.target=d,i.fire(d,e,[n])):"buffered"!=e&&"unload"!==e?setTimeout(function(){l.trigger(n,[l,t])},1):"unload"===e&&l.trigger(n,[l,t])}}},speed:n.noop,unload:function(){b&&b.__unload&&b.__unload();try{h&&window[h]&&delete window[h]}catch(t){}n.find("object",d).forEach(n.removeNode),b=0,l.off(".flashengine"),l.off(".flashhack"),clearInterval(b.pollInterval),g.forEach(function(e){clearTimeout(e)})}},y,h,b,v;return["pause","resume","seek","volume"].forEach(function(t){m[t]=function(e){try{l.ready&&(void 0===e?b["__"+t]():b["__"+t](e))}catch(a){if("undefined"==typeof b["__"+t])return l.trigger("flashdisabled",[l]);throw a}}}),m},s.engineName="flash",s.canPlay=function(e,t){return a.support.flashVideo&&/video\/(mp4|flash|flv)/i.test(e)||a.support.flashVideo&&t.swfHls&&/mpegurl/i.test(e)},a.engines.push(s)},{"../common":1,"../flowplayer":31,"./embed":2,bean:34,"extend-object":39}],4:[function(e){'use strict';function t(e){return"undefined"!=typeof window.Hls&&/mpegurl/.test(e)&&window.Hls.isSupported()}var a=e("../flowplayer"),n=a.support,r=a.common,o=a.bean,i=e("./html5-factory"),s;s=function(n,l){function d(e,t,i){var d=a.extend({recoverMediaError:!0},n.conf.hlsjs,e.hlsjs);n.engine.hls&&n.engine.hls.destroy();var g=n.engine.hls=new p(d);s.extensions.forEach(function(e){e({hls:g,player:n,root:l,videoTag:t})}),g.loadSource(e.src),i.resume=function(){n.live&&!n.dvr&&(t.currentTime=g.liveSyncPosition||0),t.play()},i.seek=function(a){try{t.currentTime=n.live||n.dvr?m(a,g.liveSyncPosition||t.duration-d.livePositionOffset):a}catch(t){n.debug("Failed to seek to ",a,t)}},!1===d.bufferWhilePaused&&n.on("pause",function(){g.stopLoad(),n.one("resume",function(){g.startLoad()})}),n.on("quality",function(e,t,a){g.nextLevel=c=a});var y=function(e){if(n.debug("hlsjs - recovery"),r.removeClass(l,"is-paused"),r.addClass(l,"is-seeking"),o.one(t,"seeked",function(){t.paused&&(r.removeClass(l,"is-poster"),n.poster=!1,t.play()),r.removeClass(l,"is-seeking")}),e)return g.startLoad();var a=performance.now();!h||3e3<a-h?(h=performance.now(),g.recoverMediaError()):(!b||3e3<a-b)&&(b=performance.now(),g.swapAudioCodec(),g.recoverMediaError())},h,b;return g.on(p.Events.MANIFEST_PARSED,function(a,o){var s=e.hlsQualities||n.conf.hlsQualities,l={},d=o.levels,p;if(!1===s)return g.attachMedia(t);if("drive"===s)switch(d.length){case 4:p=[1,2,3];break;case 5:p=[1,2,3,4];break;case 6:p=[1,3,4,5];break;case 7:p=[1,3,5,6];break;case 8:p=[1,3,6,7];break;default:p=3>d.length||d[0].height&&d[2].height&&d[0].height===d[2].height?[]:[1,2];}if(e.qualities=[{value:-1,label:"Auto"}],Array.isArray(s)){var y=s.find(function(e){return-1===e||e.level&&-1===e.level});y?e.qualities[0].label="number"==typeof y?e.qualities[0].label:y.label:e.qualities=[],p=s.map(function(e){return"undefined"!=typeof e.level&&(l[e.level]=e.label),"undefined"==typeof e.level?e:e.level})}var h=-2;e.qualities=e.qualities.concat(d.map(function(e,t){if(p&&-1===p.indexOf(t))return!1;var a=l[t]||m(e.width,e.height)+"p";return l[t]||"drive"===s||(a+=" ("+u(e.bitrate/1e3)+"k)"),t===c&&(h=t),{value:t,label:a}})).filter(r.identity);var b=e.quality=-2===h?e.qualities[0].value||-1:h;b!==g.currentLevel&&(g.currentLevel=b),g.attachMedia(t),f&&e.src!==f&&t.play(),f=e.src}),g.on(p.Events.ERROR,function(e,t){if(t.fatal)if(d.recoverNetworkError&&t.type===p.ErrorTypes.NETWORK_ERROR)y(!0);else if(d.recoverMediaError&&t.type===p.ErrorTypes.MEDIA_ERROR)y(!1);else{var a=5;t.type===p.ErrorTypes.NETWORK_ERROR&&(a=2),t.type===p.ErrorTypes.MEDIA_ERROR&&(a=3),g.destroy(),n.trigger("error",[n,{code:a}])}}),n.one("unload",function(){g.destroy()}),{handlers:{error:function(t,e){var a=e.error&&e.error.code;return d.recoverMediaError&&3===a||!a?(t.preventDefault(),y(!1),!0):d.recoverNetworkError&&2===a?(t.preventDefault(),y(!0),!0):void 0}}}}var p=window.Hls,c,f;return i("hlsjs-lite",n,l,t,d)},s.canPlay=function(e,r){return!(!1===r.hlsjs||r.clip&&!1===r.clip.hlsjs)&&(!n.browser.safari||(r.clip&&r.clip.hlsjs||r.hlsjs||{}).safari)&&a.support.video&&t(e)},s.engineName="hlsjs-lite",s.plugin=function(e){s.extensions.push(e)},s.extensions=[],a.engines.push(s)},{"../flowplayer":31,"./html5-factory":5}],5:[function(e,t){function a(e,t){return t=t||100,u(e*t)/t}function n(e){var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)+t.height&&t.right<=(window.innerWidth||document.documentElement.clientWidth)+t.width}var r=e("../flowplayer"),o=r.common,s=r.support,l=r.bean,d=r.extend,c=s.browser.safari&&!s.iOS,f={ended:"finish",pause:"pause",play:"resume",timeupdate:"progress",volumechange:"volume",ratechange:"speed",seeked:"seek",loadedmetadata:c?0:"ready",canplaythrough:c?"ready":0,durationchange:"ready",error:"error",dataunavailable:"error",webkitendfullscreen:!r.support.inlineVideo&&"unload",progress:"buffer"};t.exports=function(e,t,r,i,u){function c(n,u,c,g){var m=r.getAttribute("data-flowplayer-instance-id");if(n.listeners&&n.listeners.hasOwnProperty(m))return void(n.listeners[m]=c);(n.listeners||(n.listeners={}))[m]=c,l.on(u,"error",function(a){try{i(a.target.getAttribute("type"))&&t.trigger("error",[t,{code:4,video:d(c,{src:n.src,url:n.src})}])}catch(e){}}),t.on("shutdown",function(){l.off(u),l.off(n,".dvrhack"),t.off(".loophack")});var y={},h=function(e){"metadata"!==e.kind||(e.mode="hidden",e.addEventListener("cuechange",function(){e.activeCues.length&&t.trigger("metadata",[t,e.activeCues[0].value])},!1))};return n&&n.textTracks&&n.textTracks.length&&Array.prototype.forEach.call(n.textTracks,h),n&&n.textTracks&&"function"==typeof n.textTracks.addEventListener&&n.textTracks.addEventListener("addtrack",function(e){h(e.track)},!1),(t.conf.dvr||t.dvr||c.dvr)&&l.on(n,"progress.dvrhack",function(){n.seekable.length&&(t.video.duration=n.seekable.end(null),t.video.seekOffset=n.seekable.start(null),t.trigger("dvrwindow",[t,{start:n.seekable.start(null),end:n.seekable.end(null)}]),n.currentTime>=n.seekable.start(null)||(n.currentTime=n.seekable.start(null)))}),Object.keys(f).forEach(function(u){var h=f[u];if("webkitendfullscreen"===u&&t.conf.disableInline&&(h="unload"),!!h){var b=function(l){var e=Number.MAX_VALUE;if(c=n.listeners[m],l.target&&o.hasClass(l.target,"fp-engine")){/progress/.test(h)||t.debug(u,"->",h,l);var f=function(e){t.trigger(e||h,[t,y])};if(!t.ready&&!/ready|error/.test(h)||!h||!o.find("video",r).length)return void("resume"===h&&t.one("ready",function(){setTimeout(function(){f()})}));var y;if("unload"===h)return void t.unload();switch(h){case"ready":if(t.ready)return t.debug("Player already ready, not sending duplicate ready event");if((!n.duration||n.duration===1/0)&&!t.live)return t.debug("No duration and VOD setup, not sending ready event");if(y=d(c,{duration:n.duration<e?n.duration:0,width:n.videoWidth,height:n.videoHeight,url:n.currentSrc}),y.seekable=y.duration,t.debug("Ready: ",y),!t.live&&!y.duration&&!s.hlsDuration&&"loadeddata"===u){var b=function(){y.duration=n.duration;try{y.seekable=n.seekable&&n.seekable.end(null)}catch(e){}f(),n.removeEventListener("durationchange",b),o.toggleClass(r,"is-live",!1)};n.addEventListener("durationchange",b);var v=function(){t.ready||n.duration||(y.duration=0,o.addClass(r,"is-live"),f()),n.removeEventListener("timeupdate",v)};return void n.addEventListener("timeupdate",v)}break;case"progress":case"seek":if(0<n.currentTime||t.live)y=p(n.currentTime,0);else if("seek"===h&&0===n.currentTime)y=0;else if("progress"==h)return;break;case"buffer":y=[];for(var I=0;I<n.buffered.length;I++)y.push({start:n.buffered.start(I),end:n.buffered.end(I)});n.buffered.length&&n.buffered.end(null)===n.duration&&f("buffered");break;case"speed":y=a(n.playbackRate);break;case"volume":y=a(n.muted?0:n.volume);break;case"error":try{if(g&&g.handlers&&g.handlers.error){var E=g.handlers.error(l,n);if(E)return}y=(l.srcElement||l.originalTarget).error,y.video=d(c,{src:n.src,url:n.src})}catch(e){return}}f()}};r.addEventListener(u,b,!0),y[u]||(y[u]=[]),y[u].push(b)}}),y}var g=o.findDirect("video",r)[0]||o.find(".fp-player > video",r)[0],m=t.conf,y,h,b;return b={engineName:e,pick:function(e){var t=s.video&&e.filter(function(e){return i(e.type)})[0];if(t)return"string"==typeof t.src&&(t.src=o.createAbsoluteUrl(t.src)),t},load:function(e){var a=o.find(".fp-player",r)[0],i=!1;if(g||(g=document.createElement("video"),o.prepend(a,g),g.autoplay=!!m.splash,i=!0),o.addClass(g,"fp-engine"),o.find("track",g).forEach(o.removeNode),g.preload="none",m.nativesubtitles||o.attr(g,"crossorigin",!1),m.disableInline||(g.setAttribute("webkit-playsinline","true"),g.setAttribute("playsinline","true")),s.inlineVideo||o.css(g,{position:"absolute",top:"-9999em"}),s.subtitles&&m.nativesubtitles&&e.subtitles&&e.subtitles.length){o.addClass(g,"native-subtitles");var d=e.subtitles,p=function(e){var t=g.textTracks;t.length&&(t[0].mode=e)};d.some(function(e){return!o.isSameDomain(e.src)})&&o.attr(g,"crossorigin","anonymous"),"function"==typeof g.textTracks.addEventListener&&g.textTracks.addEventListener("addtrack",function(){p("disabled"),p("showing")}),d.forEach(function(e){g.appendChild(o.createElement("track",{kind:"subtitles",srclang:e.srclang||"en",label:e.label||"en",src:e.src,default:e["default"]}))})}l.off(g,"timeupdate",o.noop),l.on(g,"timeupdate",o.noop),o.prop(g,"loop",!1),t.off(".loophack"),(e.loop||m.loop)&&t.on("finish.loophack",function(){t.resume()}),"undefined"!=typeof h&&(g.volume=h);var f=u(e,g,b);if(m.autoplay||m.splash||e.autoplay){t.debug("Autoplay / Splash setup, try to start video"),g.load();var y=function(){try{var e=g.play();if(e&&e.catch){var a=function(e){if("AbortError"===e.name&&20===e.code)return i?void 0:g.play().catch(a);if(!m.mutedAutoplay)throw new Error("Unable to autoplay");return t.debug("Play errored, trying muted",e),t.mute(!0,!0),g.play()};e.catch(a).catch(function(){m.autoplay=!1,t.mute(!1,!0),t.trigger("stop",[t])})}}catch(a){t.debug("play() error thrown",a)}};0<g.readyState?y():l.one(g,"canplay",y)}if(b._listeners=c(g,o.find("source",g).concat(g),e,f)||b._listeners,!(m.autoplay||m.splash||e.autoplay)){var v=function(){n(r)&&(t.debug("player is in viewport, preload"),s.preloadMetadata?g.preload="metadata":g.load(),l.off(document,"scroll.preloadviewport"))};l.off(document,"scroll.preloadviewport"),l.on(document,"scroll.preloadviewport",function(){window.requestAnimationFrame(v)}),v()}},mute:function(e){g.muted=!!e,t.trigger("mute",[t,e]),t.trigger("volume",[t,e?0:g.volume])},pause:function(){g.pause()},resume:function(){g.play()},speed:function(e){g.playbackRate=e},seek:function(e){var a=g.paused||t.finished;try{g.currentTime=e,a&&l.one(g,"seeked",function(){g.pause()})}catch(e){}},volume:function(e){h=e,g&&(g.volume=e,e&&b.mute(!1))},unload:function(){l.off(document,"scroll.preloadviewport"),o.find("video.fp-engine",r).forEach(function(e){e.src="MediaSource"in window?URL.createObjectURL(new MediaSource):"",o.removeNode(e)}),y=clearInterval(y);var e=r.getAttribute("data-flowplayer-instance-id");delete g.listeners[e],g=0,b._listeners&&Object.keys(b._listeners).forEach(function(e){b._listeners[e].forEach(function(t){r.removeEventListener(e,t,!0)})})}}}},{"../flowplayer":31}],6:[function(e){'use strict';function t(e){return /mpegurl/i.test(e)?"application/x-mpegurl":e}function a(e){return /^(video|application)/i.test(e)||(e=t(e)),!!i.canPlayType(e).replace("no","")}var n=e("../flowplayer"),r=n.common,o=e("./html5-factory"),i=document.createElement("video"),s;s=function(e,t){return o("html5",e,t,a,function(e,t){t.currentSrc===e.src?e.autoplay&&t.load():(r.find("source",t).forEach(r.removeNode),t.src=e.src,t.type=e.type)})},s.canPlay=function(e){return n.support.video&&a(e)},s.engineName="html5",n.engines.push(s)},{"../flowplayer":31,"./html5-factory":5}],7:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(e,t){e.on("ready",function(){var e=a.find("video.fp-engine",t)[0];e&&(e.setAttribute("x-webkit-airplay","allow"),window.WebKitPlaybackTargetAvailabilityEvent&&(e.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){if("available"===e.availability){var n=a.find(".fp-header",t)[0];a.find(".fp-airplay",n).forEach(a.removeNode);var r=a.createElement("a",{class:"fp-airplay fp-icon",title:"Play on AirPlay device"});n.insertBefore(r,a.find(".fp-fullscreen",n)[0])}}),e.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",function(){var n=a.find(".fp-airplay",t)[0];n&&a.toggleClass(n,"fp-active",e.webkitCurrentPlaybackTargetIsWireless)})))}),n.on(t,"click",".fp-airplay",function(e){e.preventDefault();var n=a.find("video.fp-engine",t)[0];n.webkitShowPlaybackTargetPicker()})})},{"../common":1,"../flowplayer":31,bean:34}],8:[function(e){'use strict';var t=e("../flowplayer"),a=e("./resolve").TYPE_RE,n=e("scriptjs"),r=e("bean");t(function(t,o){var i=t.conf.analytics,s=0,l=0,d;if(i){"undefined"==typeof _gat&&n("//google-analytics.com/ga.js");var p=function(){var e=_gat._getTracker(i);return e._setAllowLinker(!0),e},c=function(n,e,r){if(r=r||t.video,s&&"undefined"!=typeof _gat){var i=p();i._trackEvent("Video / Seconds played",t.engine.engineName+"/"+r.type,r.title||o.getAttribute("title")||r.src.split("/").slice(-1)[0].replace(a,""),u(s/1e3)),s=0,d&&(clearTimeout(d),d=null)}};t.bind("load unload",c).bind("progress",function(){t.seeking||(s+=l?+new Date-l:0,l=+new Date),d||(d=setTimeout(function(){d=null;var e=p();e._trackEvent("Flowplayer heartbeat","Heartbeat","",0,!0)},600000))}).bind("pause",function(){l=0}),t.bind("shutdown",function(){r.off(window,"unload",c)}),r.on(window,"unload",c)}})},{"../flowplayer":31,"./resolve":21,bean:34,scriptjs:45}],9:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("bean"),r=e("scriptjs");t(function(e,t){function o(){var e,t,a;e=c.applicationId||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,t=new chrome.cast.SessionRequest(e),a=new chrome.cast.ApiConfig(t,i,s),chrome.cast.initialize(a,l,d)}function i(){console.log("sessionListener")}function s(e){e!==chrome.cast.ReceiverAvailability.AVAILABLE||p()}function l(){}function d(){console.log("onError")}function p(){var e=a.find(".fp-header",t)[0];if(e){a.find(".fp-chromecast",e).forEach(a.removeNode),a.find(".fp-chromecast-engine",t).forEach(a.removeNode),m=a.createElement("a",{class:"fp-chromecast fp-icon",title:"Play on Cast device"}),e.insertBefore(m,a.find(".fp-fullscreen",e)[0]);var n=a.createElement("div",{class:"fp-chromecast-engine"}),r=a.createElement("p",{class:"fp-chromecast-engine-status"}),o=a.createElement("p",{class:"fp-chromecast-engine-icon"});n.appendChild(o),n.appendChild(r);var i=a.find(".fp-engine",t)[0];i?i.parentNode.insertBefore(n,i):a.prepend(a.find(".fp-player",t)[0]||t,n)}}function u(){clearInterval(g),g=null,e.release(),a.toggleClass(t,"is-chromecast",!1),a.toggleClass(m,"fp-active",!1)}if(!1!==e.conf.chromecast){r("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),window.__onGCastApiAvailable=function(e){e&&o()};var c=e.conf.chromecast||{},f,g,m;n.on(t,"click",".fp-chromecast",function(n){return n.preventDefault(),f?(e.trigger("pause",[e]),f.stop(),f=null,void u()):void(e.playing&&e.pause(),chrome.cast.requestSession(function(n){f=n;var r=f.receiver.friendlyName;a.html(a.find(".fp-chromecast-engine-status")[0],"Playing on device "+r);var o=new chrome.cast.media.MediaInfo(e.video.src),i=new chrome.cast.media.LoadRequest(o);f.loadMedia(i,function(n){n.addUpdateListener(function(r){if(f){g=g||setInterval(function(){e.trigger("progress",[e,n.getEstimatedTime()])},500),r?(a.toggleClass(t,"is-chromecast",!0),a.toggleClass(m,"fp-active",!0),e.hijack({pause:function(){n.pause()},resume:function(){n.play()},seek:function(e){var t=new chrome.cast.media.SeekRequest;t.currentTime=e,n.seek(t)}})):(u(),e.trigger("finish",[e]));var o=n.playerState;e.paused&&o===chrome.cast.media.PlayerState.PLAYING&&e.trigger("resume",[e]),e.playing&&o===chrome.cast.media.PlayerState.PAUSED&&e.trigger("pause",[e]),a.toggleClass(t,"is-loading",o===chrome.cast.media.PlayerState.BUFFERING)}})},function(){})},function(e){console.error("requestSession error",e)}))})}})},{"../common":1,"../flowplayer":31,bean:34,scriptjs:45}],10:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(t,r){function o(e){r.className=r.className.replace(s," "),0<=e&&a.addClass(r,"cue"+e)}function i(e){var a=e&&!isNaN(e.time)?e.time:e;return 0>a&&(a=t.video.duration+a),.125*u(a/.125)}var s=/ ?cue\d+ ?/,l=!1,d={},c=-.125,f=function(e){o(e.index),t.trigger("cuepoint",[t,e])};t.on("progress",function(t,e,a){if(!l)for(var n=i(a);c<n;)c+=.125,d[c]&&d[c].forEach(f)}).on("unload",o).on("beforeseek",function(e){setTimeout(function(){e.defaultPrevented||(l=!0)})}).on("seek",function(e,t,a){o(),c=i(a||0)-.125,l=!1,!a&&d[0]&&d[0].forEach(f)}).on("ready",function(a,e,n){c=-.125;var r=n.cuepoints||t.conf.cuepoints||[];t.setCuepoints(r)}).on("finish",function(){for(var e=i(t.video.duration);c<e;)c+=.125,d[c]&&d[c].forEach(f);c=-.125}),t.conf.generate_cuepoints&&t.bind("load",function(){a.find(".fp-cuepoint",r).forEach(a.removeNode)}),t.setCuepoints=function(e){return t.cuepoints=[],d={},e.forEach(t.addCuepoint),t},t.addCuepoint=function(e){t.cuepoints||(t.cuepoints=[]),"number"==typeof e&&(e={time:e}),e.index=0;var o=i(e);if(d[o]||(d[o]=[]),d[o].push(e),t.cuepoints.length&&(e.index=p.apply(null,t.cuepoints.map(function(e){return e.index}))+1),t.cuepoints.push(e),t.conf.generate_cuepoints&&!1!==e.visible){var s=t.video.duration,l=a.find(".fp-timeline",r)[0];a.css(l,"overflow","visible");var u=e.time||e;0>u&&(u=s+u);var c=a.createElement("a",{className:"fp-cuepoint fp-cuepoint"+e.index});a.css(c,"left",100*(u/s)+"%"),l.appendChild(c),n.on(c,"mousedown",function(a){a.preventDefault(),a.stopPropagation(),t.seek(u)})}return t},t.removeCuepoint=function(e){"number"==typeof e&&(e=t.cuepoints.filter(function(t){return t.index===e})[0]);var n=t.cuepoints.indexOf(e),o=i(e);if(-1!==n){t.cuepoints=t.cuepoints.slice(0,n).concat(t.cuepoints.slice(n+1));var s=a.find(".fp-timeline",r)[0];a.find(".fp-cuepoint"+e.index,s).forEach(a.removeNode);var l=d[o].indexOf(e);if(-1!==l)return d[o]=d[o].slice(0,l).concat(d[o].slice(l+1)),t}}})},{"../common":1,"../flowplayer":31,bean:34}],11:[function(e){'use strict';var t=e("../flowplayer"),a=e("bean"),n=e("../common"),r=e("./util/clipboard");t(function(e,t){if(!1!==e.conf.embed&&!1!==e.conf.share){var o=n.find(".fp-share-menu",t)[0],i=n.createElement("a",{class:"fp-icon fp-embed",title:"Copy to your site"},"Embed");n.append(o,i),e.embedCode=function(){var a=e.conf.embed||{},r=e.video,o=a.width||r.width||n.width(t),i=a.height||r.height||n.height(t),s=e.conf.ratio,l="<iframe src=\""+e.shareUrl(!0)+"\" allowfullscreen style=\"border:none;";return a.width||a.height?(isNaN(o)||(o+="px"),isNaN(i)||(i+="px"),l+"width:"+o+";height:"+i+";\"></iframe>"):((!s||e.conf.adaptiveRatio)&&(s=i/o),"<div style=\"position:relative;width:100%;display:inline-block;\">"+l+"position:absolute;top:0;left:0;width:100%;height:100%;\"></iframe><div style=\"padding-top:"+100*s+"%;\"></div></div>")},a.on(t,"click",".fp-embed",function(){r(e.embedCode(),function(){e.message("The embed code is now on your clipboard",2e3)},function(){e.textarea(e.embedCode(),"Copy the code below to embed your video")})})}})},{"../common":1,"../flowplayer":31,"./util/clipboard":30,bean:34}],12:[function(e,t){'use strict';t.exports=function(e,t){t||(t=document.createElement("div"));var a={},n={},r=function(e,r,o){var i=e.split(".")[0],s=function(l){o&&(t.removeEventListener(i,s),a[e].splice(a[e].indexOf(s),1));var d=[l].concat(n[l.timeStamp+l.type]||[]);r&&r.apply(void 0,d)};t.addEventListener(i,s),a[e]||(a[e]=[]),a[e].push(s)};e.on=e.bind=function(t,a){var n=t.split(" ");return n.forEach(function(e){r(e,a)}),e},e.one=function(t,a){var n=t.split(" ");return n.forEach(function(e){r(e,a,!0)}),e};var o=function(e,t){return 0===t.filter(function(t){return-1===e.indexOf(t)}).length};e.off=e.unbind=function(n){var r=n.split(" ");return r.forEach(function(e){var n=e.split(".").slice(1),r=e.split(".")[0];Object.keys(a).filter(function(e){var t=e.split(".").slice(1);return(!r||0===e.indexOf(r))&&o(t,n)}).forEach(function(e){var n=a[e],r=e.split(".")[0];a[e]=n.filter(function(e){return t.removeEventListener(r,e),!1})})}),e},e.trigger=function(a,r,o){if(a){r=(r||[]).length?r||[]:[r];var i=document.createEvent("Event"),s;return s=a.type||a,i.initEvent(s,!1,!0),Object.defineProperty&&(i.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}),n[i.timeStamp+i.type]=r,t.dispatchEvent(i),o?i:e}}},t.exports.EVENTS=["beforeseek","disable","error","finish","fullscreen","fullscreen-exit","load","mute","pause","progress","ready","resume","seek","speed","stop","unload","volume","boot","shutdown"]},{}],13:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(e,t){var r=e.conf;if(!1!==r.share&&r.facebook){e.facebook=function(){var e=screen.height,t=screen.width,a="string"==typeof r.facebook?r.facebook:window.location.toString(),n,o;n=u(t/2-275),o=0,420<e&&(o=u(e/2-210)),window.open("https://www.facebook.com/sharer.php?s=100&p[url]="+encodeURIComponent(a),"sharer","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+n+",top="+o)};var o=a.find(".fp-share-menu",t)[0],i=a.createElement("a",{class:"fp-icon fp-facebook"},"Facebook");a.append(o,i),n.on(t,"click",".fp-facebook",function(){e.facebook()})}})},{"../common":1,"../flowplayer":31,bean:34}],14:[function(e){'use strict';var t=e("../flowplayer"),a=e("bean"),n=e("../common"),r=t.support.fullscreen,o;a.on(document,"fullscreenchange.ffscr webkitfullscreenchange.ffscr mozfullscreenchange.ffscr MSFullscreenChange.ffscr",function(a){var e=document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullscreenElement||document.msFullscreenElement||a.target;if(o||e.parentNode&&e.parentNode.getAttribute("data-flowplayer-instance-id")){var n=o||t(e.parentNode);e&&!o?o=n.trigger("fullscreen",[n]):(o.trigger("fullscreen-exit",[o]),o=null)}}),t(function(e,t){var a=n.createElement("div",{className:"fp-player"});if(Array.prototype.map.call(t.children,n.identity).forEach(function(e){n.matches(e,".fp-ratio,script")||a.appendChild(e)}),t.appendChild(a),!!e.conf.fullscreen){var i=window,s,l;e.isFullscreen=!1,e.fullscreen=function(t){if(!e.disabled)return void 0===t&&(t=!e.isFullscreen),t&&(s=i.scrollY,l=i.scrollX),r?t?["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){"function"==typeof a[e]&&(a[e](Element.ALLOW_KEYBOARD_INPUT),"webkitRequestFullScreen"===e&&!document.webkitFullscreenElement&&a[e]())}):["exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){"function"==typeof document[e]&&document[e]()}):e.trigger(t?"fullscreen":"fullscreen-exit",[e]),e};var d;e.on("mousedown.fs",function(){150>+new Date-d&&e.ready&&e.fullscreen(),d=+new Date}),e.on("fullscreen",function(){n.addClass(t,"is-fullscreen"),n.toggleClass(t,"fp-minimal-fullscreen",n.hasClass(t,"fp-minimal")),n.removeClass(t,"fp-minimal"),r||n.css(t,"position","fixed"),e.isFullscreen=!0}).on("fullscreen-exit",function(){var a;n.toggleClass(t,"fp-minimal",n.hasClass(t,"fp-minimal-fullscreen")),n.removeClass(t,"fp-minimal-fullscreen"),r||"html5"!==e.engine||(a=t.css("opacity")||"",n.css(t,"opacity",0)),r||n.css(t,"position",""),n.removeClass(t,"is-fullscreen"),r||"html5"!==e.engine||setTimeout(function(){t.css("opacity",a)}),e.isFullscreen=!1,i.scrollTo(l,s)}).on("unload",function(){e.isFullscreen&&e.fullscreen()}),e.on("shutdown",function(){o=null,n.removeNode(a)})}})},{"../common":1,"../flowplayer":31,bean:34}],15:[function(e){'use strict';var t=e("../flowplayer"),a=e("bean"),n=e("../common"),r,o;a.on(document,"keydown.fp",function(t){var e=r,a=t.ctrlKey||t.metaKey||t.altKey,n=t.which,o=e&&e.conf;if(e&&o.keyboard&&!e.disabled&&!a&&e.ready){if(t.shiftKey)return 39==n?e.speed(!0):37==n&&e.speed(!1),t.preventDefault();if(58>n&&47<n)return t.preventDefault(),e.seekTo(n-48);var i=function(){return 38===n||75===n?(e.volume(e.volumeLevel+.15),!0):40===n||74===n?(e.volume(e.volumeLevel-.15),!0):39===n||76===n?(e.seeking=!0,e.seek(!0),!0):37===n||72===n?(e.seeking=!0,e.seek(!1),!0):190===n?(e.seekTo(),!0):32===n?(e.toggle(),!0):70===n?(o.fullscreen&&e.fullscreen(),!0):77===n?(e.mute(),!0):81===n?(e.unload(),!0):void 0}();i&&t.preventDefault()}}),t(function(e,t){e.conf.keyboard&&(a.on(document,"click",function(a){if(n.hasParent(a.target,t))r=e.disabled?0:e;else{if(r!==e)return;r=0}r&&(o=t)}),e.bind("shutdown",function(){o==t&&(o=null)}))})},{"../common":1,"../flowplayer":31,bean:34}],16:[function(e){var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(e,t){e.showMenu=function(r,o){var i=a.find(".fp-ui",t)[0];a.toggleClass(r,"fp-active",!0),setTimeout(function(){n.one(document,"click",function(){e.hideMenu(r)})});var s=o;if(o&&o.tagName&&(s={left:a.offset(o).left,rightFallbackOffset:a.width(o),top:a.offset(o).top+a.height(o)}),!s)return a.css(r,"top","auto");s.rightFallbackOffset=s.rightFallbackOffset||0;var l=s.top-a.offset(i).top,d=s.left-a.offset(i).left;a.width(r)+d>a.width(i)&&(d=d-a.width(r)+s.rightFallbackOffset),a.height(r)+l>a.height(i)&&(l-=a.height(r)),a.css(r,{top:l+"px",left:d+"px",right:"auto"})},e.hideMenu=function(e){a.toggleClass(e,"fp-active",!1),a.css(e,{top:"-9999em"})}})},{"../common":1,"../flowplayer":31,bean:34}],17:[function(e){var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(e,t){function r(e){var t=a.createElement("div",{className:"fp-message"},e);return s.insertBefore(t,i),setTimeout(function(){a.toggleClass(t,"fp-shown")}),t}function o(e){a.removeNode(e)}var i=a.find(".fp-header",t)[0],s=a.find(".fp-ui",t)[0];e.message=function(e,t){var n=r(e),i=function(){a.toggleClass(n,"fp-shown"),setTimeout(function(){o(n)},500)};return t&&setTimeout(i,t),i},e.textarea=function(e){var t=document.createElement("textarea");t.value=e,t.className="fp-textarea",s.appendChild(t),n.on(document,"click.fptextarea",function(e){return e.target===t?t.select():void(e.stopPropagation(),e.preventDefault(),a.removeNode(t),n.off(document,"click.fptextarea"))})}})},{"../common":1,"../flowplayer":31,bean:34}],18:[function(e){'use strict';var t=e("../flowplayer"),a=/IEMobile/.test(window.navigator.userAgent),n=e("../common"),r=e("bean"),o=e("./ui").format,i=t.support,s=window.navigator.userAgent;(i.touch||a)&&t(function(t,l){var d=i.android,p=d&&!d.firefox,u=/Silk/.test(s),c=d.version||0;if(p&&!a){if(!/Chrome/.test(s)&&4>c||d.samsung&&5>c){var f=t.load;t.load=function(){var e=f.apply(t,arguments);return n.find("video.fp-engine",l)[0].load(),t.trigger("ready",[t,t.video]),e}}var g=0,m=function(e){y=setInterval(function(){e.video.time=++g,e.trigger("progress",[e,g])},1e3)},y;t.on("ready pause unload",function(){y&&(clearInterval(y),y=null)}),t.on("ready",function(){g=0}),t.on("resume",function(e,a){return a.live?g?m(a):void t.one("progress",function(e,a,n){0===n&&m(a)}):void 0})}i.volume||(n.removeClass(l,"fp-mute"),n.addClass(l,"no-volume")),i.iOS&&n.addClass(l,"fp-mute"),n.addClass(l,"is-touch"),t.sliders&&t.sliders.timeline&&t.sliders.timeline.disableAnimation();var h=!1;r.on(l,"touchmove",function(){h=!0});var b=!0;if(r.on(l,"touchend click",function(a){if(h)return void(h=!1);var e=n.find("video.fp-engine",l)[0];return b&&t.conf.clickToUnMute&&e&&e.muted&&t.conf.autoplay&&(e.muted=!1),b=!1,t.playing&&!n.hasClass(l,"is-mouseover")?(n.addClass(l,"is-mouseover"),n.removeClass(l,"is-mouseout"),a.preventDefault(),void a.stopPropagation()):void(!t.playing&&!t.splash&&n.hasClass(l,"is-mouseout")&&!n.hasClass(l,"is-mouseover")&&setTimeout(function(){t.disabled||t.playing||t.splash||n.find("video.fp-engine",l)[0].play()},400))}),!i.fullscreen&&t.conf.native_fullscreen&&"function"==typeof n.createElement("video").webkitEnterFullScreen){var v=t.fullscreen;t.fullscreen=function(){var e=n.find("video.fp-engine",l)[0];return e?void(t.trigger("fullscreen",[t]),r.on(document,"webkitfullscreenchange.nativefullscreen",function(){document.webkitFullscreenElement!==e||(r.off(document,".nativefullscreen"),r.on(document,"webkitfullscreenchange.nativefullscreen",function(){document.webkitFullscreenElement||(r.off(document,".nativefullscreen"),t.trigger("fullscreen-exit",[t]))}))}),e.webkitEnterFullScreen(),r.one(e,"webkitendfullscreen",function(){r.off(document,"fullscreenchange.nativefullscreen"),t.trigger("fullscreen-exit",[t]),n.prop(e,"controls",!0),n.prop(e,"controls",!1)})):v.apply(t)}}(p||u)&&t.bind("ready",function(){var e=n.find("video.fp-engine",l)[0];t.conf.splash&&e.paused&&"hlsjs-lite"!==t.engine.engineName&&(r.one(e,"canplay",function(){e.play()}),e.load()),t.bind("progress.dur",function(){if(!(t.live||t.conf.live)){var a=e.duration;1!==a&&(t.video.duration=a,n.find(".fp-duration",l)[0].innerHTML=o(a),t.unbind("progress.dur"))}})})})},{"../common":1,"../flowplayer":31,"./ui":27,bean:34}],19:[function(e){'use strict';var t=e("../flowplayer"),a=e("extend-object"),n=e("bean"),r=e("../common"),o=e("./resolve"),i=new o,s=window.jQuery,l=/^#/;t(function(t,d){function p(){return r.find(m.query,u())}function u(){return l.test(m.query)?void 0:d}function c(){return r.find(m.query+"."+y,u())}function f(){var e=r.find(".fp-playlist",d)[0];if(!e){e=r.createElement("div",{className:"fp-playlist"});var a=r.find(".fp-next,.fp-prev",d);a.length?a[0].parentElement.insertBefore(e,a[0]):r.insertAfter(d,r.find("video",d)[0],e)}e.innerHTML="",t.conf.playlist[0].length&&(t.conf.playlist=t.conf.playlist.map(function(e){if("string"==typeof e){var t=e.split(o.TYPE_RE)[1];return{sources:[{type:"m3u8"===t.toLowerCase()?"application/x-mpegurl":"video/"+t,src:e}]}}return{sources:e.map(function(e){var t={};return Object.keys(e).forEach(function(a){t.type=/mpegurl/i.test(a)?"application/x-mpegurl":"video/"+a,t.src=e[a]}),t})}})),t.conf.playlist.forEach(function(a,n){var o=a.sources[0].src;e.appendChild(r.createElement("a",{href:o,className:t.video.index===n?y:void 0,"data-index":n}))})}function g(e){return"undefined"==typeof e.index?"undefined"==typeof t.video.index?t.conf.startIndex||0:t.video.index:e.index}var m=a({active:"is-active",advance:!0,query:".fp-playlist a"},t.conf),y=m.active,h=r.find(".fp-ui",d)[0],e=r.hasClass(d,"fp-custom-playlist")||!!m.customPlaylist;r.toggleClass(d,"fp-custom-playlist",e),r.toggleClass(d,"fp-default-playlist",!e),t.play=function(e){if(void 0===e)return t.resume();if("number"==typeof e&&!t.conf.playlist[e])return t;if("number"!=typeof e)return t.load.apply(null,arguments);var n=a({index:e},t.conf.playlist[e]);return(t.off("beforeresume.fromfirst"),"number"==typeof e&&e===t.video.index)?t.seek(0,function(){t.resume()}):(t.load(n,function(){t.video.index=e}),t)},t.next=function(a){a&&a.preventDefault();var e=t.video.index;return-1!=e&&(e=e===t.conf.playlist.length-1?0:e+1,t.play(e)),t},t.prev=function(a){a&&a.preventDefault();var e=t.video.index;return-1!=e&&(e=0===e?t.conf.playlist.length-1:e-1,t.play(e)),t},t.setPlaylist=function(e,a){return t.conf.playlist=e,a||delete t.video.index,f(),t},t.addPlaylistItem=function(e){return delete t.video.is_last,t.setPlaylist(t.conf.playlist.concat([e]),!0)},t.removePlaylistItem=function(e){var a=t.conf.playlist;return t.setPlaylist(a.slice(0,e).concat(a.slice(e+1)))},n.on(d,"click",".fp-next",t.next),n.on(d,"click",".fp-prev",t.prev),t.off("finish.pl").on("finish.pl",function(t,e){var a=!("undefined"!=typeof e.conf.advance)||e.conf.advance;if(a){if(e.video.loop)return e.seek(0,function(){e.resume()});var n=0<=e.video.index?e.video.index+1:void 0;n<e.conf.playlist.length||m.loop?(n=n===e.conf.playlist.length?0:n,r.removeClass(d,"is-finished"),setTimeout(function(){e.play(n)})):1<e.conf.playlist.length&&(e.one("beforeresume.fromfirst",function(t){t.preventDefault(),e.play(0)}),e.one("seek",function(){e.off("beforeresume.fromfirst")}))}});var b=!1;t.conf.playlist.length&&(b=!0,f(),(!t.conf.clip||!t.conf.clip.sources.length)&&(t.conf.clip=t.conf.playlist[t.conf.startIndex||0])),p().length&&!b&&(t.conf.playlist=[],delete t.conf.startIndex,p().forEach(function(e){var n=e.href;e.setAttribute("data-index",t.conf.playlist.length);var r=i.resolve(n,t.conf.clip.sources);s&&a(r,s(e).data()),t.conf.playlist.push(r)})),r.find(".fp-prev,.fp-next,.fp-playlist",d).forEach(function(e){h.appendChild(e)}),n.on(l.test(m.query)?document:d,"click",m.query,function(a){a.preventDefault();var e=a.currentTarget,n=+e.getAttribute("data-index");-1!=n&&t.play(n)}),t.on("load",function(a,e,n){if(t.conf.playlist.length){var o=c()[0],i=o&&o.getAttribute("data-index"),s=n.index=g(n),l=r.find(m.query+"[data-index=\""+s+"\"]",u())[0],p=s==t.conf.playlist.length-1;o&&r.removeClass(o,y),l&&r.addClass(l,y),r.removeClass(d,"video"+i),r.addClass(d,"video"+s),r.toggleClass(d,"last-video",p),n.index=e.video.index=s,n.is_last=e.video.is_last=p}}).on("unload.pl",function(){t.conf.playlist.length&&(c().forEach(function(e){r.toggleClass(e,y)}),t.conf.playlist.forEach(function(e,t){r.removeClass(d,"video"+t)}),delete t.video.index)}),t.conf.playlist.length&&(t.conf.loop=!1)})},{"../common":1,"../flowplayer":31,"./resolve":21,bean:34,"extend-object":39}],20:[function(e){var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(e,t){function r(){a.find(".fp-qsel-menu",t).forEach(a.removeNode),a.find(".fp-qsel",t).forEach(a.removeNode)}function o(e){l.appendChild(a.createElement("strong",{className:"fp-qsel"},"HD"));var t=a.createElement("div",{className:"fp-menu fp-qsel-menu"},"<strong>Quality</strong>");e.forEach(function(e){var n=document.createElement("a"),a="undefined"==typeof e.value?e:e.value;n.setAttribute("data-quality",a),n.innerHTML=e.label||e,t.appendChild(n)}),s.appendChild(t)}function i(e){a.find(".fp-qsel-menu a",t).forEach(function(t){a.toggleClass(t,"fp-selected",t.getAttribute("data-quality")==e),a.toggleClass(t,"fp-color",t.getAttribute("data-quality")==e)})}var s=a.find(".fp-ui",t)[0],l=a.find(".fp-controls",s)[0];n.on(t,"click",".fp-qsel",function(){var n=a.find(".fp-qsel-menu",t)[0];a.hasClass(n,"fp-active")?e.hideMenu():e.showMenu(n)}),n.on(t,"click",".fp-qsel-menu a",function(t){var a=t.target.getAttribute("data-quality");e.quality(a)}),e.quality=function(t){t=isNaN(+t)?t:+t,e.trigger("quality",[e,t])},e.on("quality",function(e,t,a){i(a,t.video.qualities)}),e.on("ready",function(e,t,a){r();!a.qualities||2>a.qualities.filter(function(e){return"undefined"==typeof e.value||-1<e.value}).length||(o(a.qualities,a.quality),i(a.quality,a.qualities))})})},{"../common":1,"../flowplayer":31,bean:34}],21:[function(e,t){'use strict';function a(e){var t=e.attr("src"),a=e.attr("type")||"",n=t.split(r)[1];return a=a.toLowerCase(),o(e.data(),{src:t,suffix:n||a,type:a||n})}function n(e){return /mpegurl/i.test(e)?"application/x-mpegurl":"video/"+e}var r=/\.(\w{3,4})(\?.*)?$/i,o=e("extend-object");t.exports=function(){var e=this;e.sourcesFromVideoTag=function(e,t){var n=[];return t("source",e).each(function(){n.push(a(t(this)))}),!n.length&&e.length&&n.push(a(e)),n},e.resolve=function(e,t){return e?("string"==typeof e&&(e={src:e,sources:[]},e.sources=(t||[]).map(function(t){var a=t.src.split(r)[1];return{type:t.type,src:e.src.replace(r,"."+a+"$2")}})),e instanceof Array&&(e={sources:e.map(function(e){return e.type&&e.src?e:Object.keys(e).reduce(function(t,a){return o(t,{type:n(a),src:e[a]})},{})})}),e):{sources:t}}},t.exports.TYPE_RE=r},{"extend-object":39}],22:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("extend-object"),r=e("bean");t(function(e,t){var o=e.conf;if(!1===o.share)return void a.find(".fp-share",t).forEach(a.removeNode);e.shareUrl=function(t){if(t&&o.embed&&o.embed.iframe)return o.embed.iframe;if("string"==typeof e.conf.share)return e.conf.share;var r=encodeURIComponent(e.video.title||(a.find("title")[0]||{}).innerHTML||"Flowplayer video"),i=encodeURIComponent(btoa(JSON.stringify(n({},e.conf,e.extensions)).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)}))),s=encodeURIComponent(window.location.toString()),l=t?"https://flowplayer.com/e/":"https://flowplayer.com/s/";return l+"?t="+r+"&c="+i+"&r="+s};var i=a.createElement("div",{className:"fp-menu fp-share-menu"},"<strong>Share</strong>"),s=a.find(".fp-ui",t)[0];s.appendChild(i);var l=a.find(".fp-share",t)[0];r.on(t,"click",".fp-share",function(t){t.preventDefault(),a.hasClass(i,"fp-active")?e.hideMenu():e.showMenu(i,l)})})},{"../common":1,"../flowplayer":31,bean:34,"extend-object":39}],23:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("bean"),r=e("./subtitles/parser");t.defaults.subtitleParser=r,t(function(r,e){var o,i,s,l,d;t.support.inlineVideo&&(t.support.fullscreen||!r.conf.native_fullscreen)||(r.conf.nativesubtitles=!0),r.ui||(r.ui={}),r.ui.createSubtitleControl=function(t,n){return d=n,s=s||a.createElement("strong",{className:"fp-cc"},"CC"),l=l||a.createElement("div",{className:"fp-menu fp-subtitle-menu"},"<strong>Closed Captions</strong>"),a.find("a",l).forEach(a.removeNode),l.appendChild(a.createElement("a",{"data-subtitle-index":-1},"No subtitles")),(t||[]).forEach(function(e,t){var n=e.srclang||"en",r=e.label||"Default ("+n+")",o=a.createElement("a",{"data-subtitle-index":t},r);l.appendChild(o)}),a.find(".fp-ui",e)[0].appendChild(l),a.find(".fp-controls",e)[0].appendChild(s),a.toggleClass(s,"fp-hidden",!t||!t.length),s},r.ui.setActiveSubtitleItem=function(e){u(e)},n.on(e,"click",".fp-cc",function(){a.hasClass(l,"fp-active")?r.hideMenu():r.showMenu(l)}),n.on(e,"click",".fp-subtitle-menu [data-subtitle-index]",function(e){e.preventDefault();var t=e.target.getAttribute("data-subtitle-index");return d?d(t):"-1"===t?r.disableSubtitles():void r.loadSubtitles(t)});var p=function(){i=a.find(".fp-captions",e)[0],i=i||a.appendTo(a.createElement("div",{class:"fp-captions"}),a.find(".fp-player",e)[0]),Array.prototype.forEach.call(i.children,a.removeNode),r.ui.createSubtitleControl(r.video.subtitles)};r.on("ready",function(t,n,o){if(n.subtitles=[],p(),a.removeClass(e,"has-menu"),r.disableSubtitles(),o.subtitles&&o.subtitles.length){var i=o.subtitles.filter(function(e){return e["default"]})[0];i&&n.loadSubtitles(o.subtitles.indexOf(i))}}),r.showSubtitle=function(e){a.html(i,e),a.addClass(i,"fp-shown")},r.hideSubtitle=function(){a.removeClass(i,"fp-shown")},r.bind("cuepoint",function(t,e,a){a.subtitle?(o=a.index,r.showSubtitle(a.subtitle.text)):a.subtitleEnd&&(r.hideSubtitle(),o=a.index)}),r.bind("seek",function(t,e,n){o&&r.cuepoints[o]&&r.cuepoints[o].time>n&&(a.removeClass(i,"fp-shown"),o=null),(r.cuepoints||[]).forEach(function(e,t){var a=e.subtitle;a&&o!=t?n>=e.time&&(!a.endTime||n<=a.endTime)&&r.trigger("cuepoint",[r,e]):e.subtitleEnd&&n>=e.time&&t==o+1&&r.trigger("cuepoint",[r,e])})}),r.on("unload",function(){a.find(".fp-captions",e).forEach(a.removeNode)});var u=function(e){a.toggleClass(a.find("a.fp-selected",l)[0],"fp-selected"),a.toggleClass(a.find("a[data-subtitle-index=\""+e+"\"]",l)[0],"fp-selected")},c=function(t,n){var r=a.find("video.fp-engine",e)[0].textTracks;r.length&&(null===t?[].forEach.call(r,function(e){e.mode=n}):r[t].mode=n)};r.disableSubtitles=function(){return r.subtitles=[],(r.cuepoints||[]).forEach(function(e){(e.subtitle||e.subtitleEnd)&&r.removeCuepoint(e)}),i&&Array.prototype.forEach.call(i.children,a.removeNode),u(-1),t.support.subtitles&&r.conf.nativesubtitles&&"html5"==r.engine.engineName&&c(null,"disabled"),r},r.loadSubtitles=function(e){r.disableSubtitles();var n=r.video.subtitles[e],o=n.src;if(o)return(u(e),t.support.subtitles&&r.conf.nativesubtitles&&"html5"==r.engine.engineName)?void c(e,"showing"):(a.xhrGet(o,function(e){var a=r.conf.subtitleParser(e);a.forEach(function(e,a){e.title||(e.title="subtitle"+a);var n={time:e.startTime,subtitle:e,visible:!1};r.subtitles.push(e),r.addCuepoint(n),r.addCuepoint({time:e.endTime,subtitleEnd:e.title,visible:!1}),0!==e.startTime||r.video.time||r.splash||r.trigger("cuepoint",[r,t.extend({},n,{index:0})]),r.splash&&r.one("ready",function(){r.trigger("cuepoint",[r,n])})})},function(){return r.trigger("error",{code:8,url:o}),!1}),r)}})},{"../common":1,"../flowplayer":31,"./subtitles/parser":24,bean:34}],24:[function(e,t){t.exports=function(e){function t(e){var t=e.split(":");return 2==t.length&&t.unshift(0),60*(60*t[0])+60*t[1]+parseFloat(t[2].replace(",","."))}for(var a=[],n=0,r=e.split("\n"),o=r.length,s={},l,d,p;n<o;n++)if(d=/^(([0-9]+:){1,2}[0-9]{2}[,.][0-9]{3}) --\> (([0-9]+:){1,2}[0-9]{2}[,.][0-9]{3})(.*)/.exec(r[n]),d){for(l=r[n-1],p="<p>"+r[++n]+"</p><br/>";"string"==typeof r[++n]&&r[n].trim()&&n<r.length;)p+="<p>"+r[n]+"</p><br/>";s={title:l,startTime:t(d[1]),endTime:t(d[3]),text:p},a.push(s)}return a}},{}],25:[function(e){'use strict';var t=e("../flowplayer"),a=e("extend-object");(function(){var e={},n=document.documentElement.style,r=navigator.userAgent.toLowerCase(),o=/(chrome)[ \/]([\w.]+)/.exec(r)||/(safari)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||0>r.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[];o[1]&&(e[o[1]]=!0,e.version=o[2]||"0"),e.safari&&(e.version=(/version\/([\w.]+)/.exec(r)||[])[1]);var i=function(){var e=document.createElement("video");return e.loop=!0,e.autoplay=!0,e.preload=!0,e}(),l=navigator.userAgent,d=e.msie||/Trident\/7/.test(l),p=/iPad|MeeGo/.test(l)&&!/CriOS/.test(l),u=/iPad/.test(l)&&/CriOS/.test(l),c=/iP(hone|od)/i.test(l)&&!/iPad/.test(l)&&!/IEMobile/i.test(l),f=/Android/.test(l),g=f&&/Firefox/.test(l),m=f&&/SAMSUNG/.test(l),y=/Silk/.test(l),h=/IEMobile/.test(l),b=h?parseFloat(/Windows\ Phone\ (\d+\.\d+)/.exec(l)[1],10):0,v=h?parseFloat(/IEMobile\/(\d+\.\d+)/.exec(l)[1],10):0,I=p||c?function(t){var a=/iP(ad|hone)(; CPU)? OS (\d+_\d)/.exec(t);return a&&1<a.length?parseFloat(a[a.length-1].replace("_","."),10):0}(l):0,E=f?parseFloat(/Android\ (\d+(\.\d+)?)/.exec(l)[1],10):0,S=(c||p||u)&&{iPhone:c,iPad:p||u,version:I,chrome:u},T=a(t.support,{browser:e,iOS:S,android:!!f&&{firefox:g,opera:/Opera/.test(l),samsung:m,version:E},subtitles:!!i.addTextTrack,fullscreen:"boolean"==typeof document.webkitFullscreenEnabled?document.webkitFullscreenEnabled:"function"==typeof document.webkitCancelFullScreen&&!/Mac OS X 10_5.+Version\/5\.0\.\d Safari/.test(l)||document.mozFullScreenEnabled||"function"==typeof document.exitFullscreen||"function"==typeof document.msExitFullscreen,inlineBlock:!(d&&8>e.version),touch:"ontouchstart"in window,dataload:!p&&!c&&!h,flex:"flexWrap"in n||"WebkitFlexWrap"in n||"msFlexWrap"in n,svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,zeropreload:!d&&!f,volume:!p&&!c&&!y&&!u,cachedVideoTag:!p&&!c&&!u&&!h,firstframe:!y&&!h&&!g&&!m&&!(I&&10>I)&&!(f&&4.4>E),inlineVideo:(!c||10<=I)&&(!h||8.1<=b&&11<=v)&&(!f||3<=E),hlsDuration:!f&&(!e.safari||p||c||u),seekable:!p&&!u,preloadMetadata:!S&&!e.safari});T.autoplay=T.firstframe,h&&(T.browser.safari=!1);try{var s=navigator.plugins["Shockwave Flash"],A=d?new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version"):s.description;d||s[0].enabledPlugin?(A=A.split(/\D+/),A.length&&!A[0]&&(A=A.slice(1)),T.flashVideo=9<A[0]||9==A[0]&&115<=A[3]):T.flashVideo=!1}catch(e){}try{T.video=!!i.canPlayType,T.video&&i.canPlayType("video/mp4")}catch(t){T.video=!1}T.animation=function(){for(var e=["","Webkit","Moz","O","ms","Khtml"],t=document.createElement("p"),a=0;a<e.length;a++)if("undefined"!=typeof t.style[e[a]+"AnimationName"])return!0}()})()},{"../flowplayer":31,"extend-object":39}],26:[function(e){'use strict';var t=e("../flowplayer"),a=e("../common"),n=e("bean");t(function(e,t){var r=e.conf;if(!1!==r.share&&!1!==r.twitter){e.tweet=function(){var t=screen.height,a=screen.width,n="string"==typeof r.twitter?r.twitter:e.shareUrl(),o,i;o=u(a/2-275),i=0,420<t&&(i=u(t/2-210)),window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent(n),"intent","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+o+",top="+i)};var o=a.find(".fp-share-menu",t)[0],i=a.createElement("a",{class:"fp-icon fp-twitter"},"Twitter");a.append(o,i),n.on(t,"click",".fp-twitter",function(){e.tweet()})}})},{"../common":1,"../flowplayer":31,bean:34}],27:[function(e,t){(function(a){'use strict';function n(e){return e=parseInt(e,10),10<=e?e:"0"+e}function r(e,t){e=p(e||0,0),e=t?d(e):l(e);var a=l(e/3600),r=l(e/60);return e-=60*r,1<=a?(r-=60*a,a+":"+n(r)+":"+n(e)):n(r)+":"+n(e)}var o=e("../flowplayer"),s=e("../common"),u=e("bean"),c=e("./ui/slider"),f=e("./ui/bar-slider"),g=a("PHN2ZyBjbGFzcz0iZnAtcGxheS1yb3VuZGVkLW91dGxpbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDk5Ljg0NCA5OS44NDM0Ij48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30uY29udHJvbGJ1dHRvbntmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz4KPHRpdGxlPnBsYXktcm91bmRlZC1vdXRsaW5lPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxwYXRoIGNsYXNzPSJjb250cm9sYnV0dG9uIiBkPSJNNDEuMDM1OSw3MS4xOWE1LjA0OTIsNS4wNDkyLDAsMCwxLTIuNTU3NS0uNjY3M2MtMS44MDMxLTEuMDQxLTIuNzk1OC0zLjEyNDgtMi43OTU4LTUuODY2NFYzNS4xODg3YzAtMi43NDI5Ljk5MzMtNC44MjcyLDIuNzk3LTUuODY3NiwxLjgwMjUtMS4wNDIyLDQuMTAzNC0uODYsNi40OC41MTQzTDcwLjQ3ODIsNDQuNTY3MmMyLjM3NTEsMS4zNzExLDMuNjgyNiwzLjI3MjUsMy42ODMyLDUuMzU0NXMtMS4zMDc2LDMuOTg0NS0zLjY4MzIsNS4zNTYyTDQ0Ljk1OTIsNzAuMDExNEE3LjkzODQsNy45Mzg0LDAsMCwxLDQxLjAzNTksNzEuMTlabS4wMDY1LTQwLjEyM2EyLjY3OTQsMi42Nzk0LDAsMCwwLTEuMzU4Mi4zNDEzYy0xLjAyNjMuNTkyNi0xLjU5MTIsMS45MzQ5LTEuNTkxMiwzLjc4VjY0LjY1NjNjMCwxLjg0NDkuNTY0OSwzLjE4NjYsMS41OTA2LDMuNzc5MSwxLjAyODEuNTkzMiwyLjQ3MzMuNDEwOCw0LjA3LS41MTJMNjkuMjczLDUzLjE5MDZjMS41OTgzLS45MjI3LDIuNDc4LTIuMDgzOCwyLjQ3OC0zLjI2ODlzLS44OC0yLjM0NDUtMi40NzgtMy4yNjY2TDQzLjc1NCwzMS45MjI3QTUuNTY4NSw1LjU2ODUsMCwwLDAsNDEuMDQyMywzMS4wNjcxWiIgZmlsdGVyPSJ1cmwoI2YxKSIvPjwvc3ZnPgo=","base64"),m=a("PHN2ZyBjbGFzcz0iZnAtcGxheS1yb3VuZGVkLWZpbGwiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogIDxkZWZzPjxzdHlsZT4uYXtmaWxsOiMwMDA7b3BhY2l0eTowLjY1O30uYntmaWxsOiNmZmY7b3BhY2l0eToxLjA7fTwvc3R5bGU+CiAgPC9kZWZzPjx0aXRsZT5wbGF5LXJvdW5kZWQtZmlsbDwvdGl0bGU+CiAgPHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjE3LS4wNzhhNTAsNTAsMCwxLDAsNTAsNTBBNTAuMDU2NCw1MC4wNTY0LDAsMCwwLDQ5LjkyMTctLjA3OFoiLz4KICA8cGF0aCBjbGFzcz0iYiIgZD0iTTM1Ljk0MiwzNS4yMzIzYzAtNC43Mjg5LDMuMzUwNi02LjY2MzcsNy40NDYtNC4yOTcxTDY4LjgzLDQ1LjYyMzVjNC4wOTU2LDIuMzY0LDQuMDk1Niw2LjIzMTksMCw4LjU5NzdMNDMuMzg4LDY4LjkxYy00LjA5NTQsMi4zNjQtNy40NDYuNDMtNy40NDYtNC4yOTc5WiIgZmlsdGVyPSJ1cmwoI2YxKSIvPgogIDwvc3ZnPgogIAo=","base64"),y=a("PHN2ZyBjbGFzcz0iZnAtcGxheS1zaGFycC1maWxsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4uZnAtY29sb3ItcGxheXtvcGFjaXR5OjAuNjU7fS5jb250cm9sYnV0dG9ue2ZpbGw6I2ZmZjt9PC9zdHlsZT4KICA8L2RlZnM+CiAgPHRpdGxlPnBsYXktc2hhcnAtZmlsbDwvdGl0bGU+CiAgPHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjE3LS4wNzhhNTAsNTAsMCwxLDAsNTAsNTBBNTAuMDU2NCw1MC4wNTY0LDAsMCwwLDQ5LjkyMTctLjA3OFoiLz4KICA8cG9seWdvbiBjbGFzcz0iY29udHJvbGJ1dHRvbiIgcG9pbnRzPSI3My42MDEgNTAgMzcuOTY4IDcwLjU3MyAzNy45NjggMjkuNDI3IDczLjYwMSA1MCIgZmlsdGVyPSJ1cmwoI2YxKSIvPgo8L3N2Zz4K","base64"),h=a("PHN2ZyBjbGFzcz0iZnAtcGxheS1zaGFycC1vdXRsaW5lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OS44NDQgOTkuODQzNCI+PGRlZnM+PHN0eWxlPi5jb250cm9sYnV0dG9uYmd7b3BhY2l0eTowLjY1O30uY29udHJvbGJ1dHRvbntmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGxheS1zaGFycC1vdXRsaW5lPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxwYXRoIGNsYXNzPSJjb250cm9sYnV0dG9uIiBkPSJNMzYuOTQ0Myw3Mi4yNDczVjI3LjI5MTZMNzUuODc3Niw0OS43N1ptMi4yLTQxLjE0NTVWNjguNDM3MUw3MS40Nzc2LDQ5Ljc3WiIgZmlsdGVyPSJ1cmwoI2YxKSIvPjwvc3ZnPgo=","base64"),b=a("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utcm91bmRlZC1vdXRsaW5lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OS44NDM0IDk5Ljg0MzQiPjxkZWZzPjxzdHlsZT4uZnAtY29sb3ItcGxheXtvcGFjaXR5OjAuNjU7fS5yZWN0e2ZpbGw6I2ZmZjt9PC9zdHlsZT4KPC9kZWZzPjx0aXRsZT5wYXVzZS1yb3VuZGVkLW91dGxpbmU8L3RpdGxlPjxwYXRoIGNsYXNzPSJmcC1jb2xvci1wbGF5IiBkPSJNNDkuOTIxMi0uMDc4M2E1MCw1MCwwLDEsMCw1MC4wMDA2LDUwQTUwLjA1NjIsNTAuMDU2MiwwLDAsMCw0OS45MjEyLS4wNzgzWiIvPjxnIGNsYXNzPSJjb250cm9sYnV0dG9uIj48cGF0aCBjbGFzcz0icmVjdCIgZD0iTTM5LjAwMzYsNzEuOTcyNmE3LjU2NSw3LjU2NSwwLDAsMS03LjU1Ny03LjU1NnYtMjguOTlhNy41NTY1LDcuNTU2NSwwLDAsMSwxNS4xMTMsMHYyOC45OUE3LjU2NDgsNy41NjQ4LDAsMCwxLDM5LjAwMzYsNzEuOTcyNlptMC00MS45MDRhNS4zNjQ3LDUuMzY0NywwLDAsMC01LjM1OTMsNS4zNTgydjI4Ljk5YTUuMzU4Nyw1LjM1ODcsMCwwLDAsMTAuNzE3NCwwdi0yOC45OUE1LjM2NDUsNS4zNjQ1LDAsMCwwLDM5LjAwMzYsMzAuMDY4NloiIGZpbHRlcj0idXJsKCNmMSkiLz48cGF0aCBjbGFzcz0icmVjdCIgZD0iTTYwLjg0LDcxLjk3MjZhNy41NjQ4LDcuNTY0OCwwLDAsMS03LjU1Ni03LjU1NnYtMjguOTlhNy41NTY1LDcuNTU2NSwwLDAsMSwxNS4xMTMsMHYyOC45OUE3LjU2NSw3LjU2NSwwLDAsMSw2MC44NCw3MS45NzI2Wm0wLTQxLjkwNGE1LjM2NDUsNS4zNjQ1LDAsMCwwLTUuMzU4Miw1LjM1ODJ2MjguOTlhNS4zNTg3LDUuMzU4NywwLDAsMCwxMC43MTc0LDB2LTI4Ljk5QTUuMzY0Nyw1LjM2NDcsMCwwLDAsNjAuODQsMzAuMDY4NloiIGZpbHRlcj0idXJsKCNmMSkiLz48L2c+PC9zdmc+Cg==","base64"),v=a("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utcm91bmRlZC1maWxsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30ucmVjdHtmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGF1c2Utcm91bmRlZC1maWxsPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxnIGNsYXNzPSJjb250cm9sYnV0dG9uIiBmaWx0ZXI9InVybCgjZjEpIj48cmVjdCBjbGFzcz0icmVjdCIgeD0iMzEuODQ0IiB5PSIyOC4xMjMxIiB3aWR0aD0iMTMuNDM2MiIgaGVpZ2h0PSI0My41OTczIiByeD0iNi43MTgxIiByeT0iNi43MTgxIi8+PHJlY3QgY2xhc3M9InJlY3QiIHg9IjU0LjU2MzgiIHk9IjI4LjEyMzEiIHdpZHRoPSIxMy40MzYyIiBoZWlnaHQ9IjQzLjU5NzMiIHJ4PSI2LjcxODEiIHJ5PSI2LjcxODEiLz48L2c+PC9zdmc+Cg==","base64"),I=a("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utc2hhcnAtZmlsbCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PGRlZnM+PHN0eWxlPi5mcC1jb2xvci1wbGF5e29wYWNpdHk6MC42NTt9LnJlY3R7ZmlsbDojZmZmO308L3N0eWxlPgo8L2RlZnM+PHRpdGxlPnBhdXNlLXNoYXJwLWZpbGw8L3RpdGxlPjxwYXRoIGNsYXNzPSJmcC1jb2xvci1wbGF5IiBkPSJNNDkuOTIxNy0uMDc4YTUwLDUwLDAsMSwwLDUwLDUwQTUwLjA1NjQsNTAuMDU2NCwwLDAsMCw0OS45MjE3LS4wNzhaIi8+PGcgY2xhc3M9ImNvbnRyb2xidXR0b24iIGZpbHRlcj0idXJsKCNmMSkiPjxyZWN0IGNsYXNzPSJyZWN0IiB4PSIzMy41IiB5PSIzMC4xMDQyIiB3aWR0aD0iMTIuMjYzNCIgaGVpZ2h0PSIzOS43OTE3Ii8+PHJlY3QgY2xhc3M9InJlY3QiIHg9IjU0LjIzNjYiIHk9IjMwLjEwNDIiIHdpZHRoPSIxMi4yNjM0IiBoZWlnaHQ9IjM5Ljc5MTciLz48L2c+PC9zdmc+Cg==","base64"),E=a("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utc2hhcnAtb3V0bGluZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgOTkuODQzNCA5OS44NDM0Ij48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30ucmVjdHtmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGF1c2Utc2hhcnAtb3V0bGluZTwvdGl0bGU+PHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjEyLS4wNzgzYTUwLDUwLDAsMSwwLDUwLjAwMDYsNTBBNTAuMDU2Miw1MC4wNTYyLDAsMCwwLDQ5LjkyMTItLjA3ODNaIi8+PGcgY2xhc3M9ImNvbnRyb2xidXR0b24iIGZpbHRlcj0idXJsKCNmMSkiPjxwYXRoIGNsYXNzPSJyZWN0IiBkPSJNNDYuODcwOSw2OS45NTMxSDMzLjEzODVWMjkuODlINDYuODcwOVpNMzUuMTQxNiw2Ny45NWg5LjcyNjJWMzEuODkzNUgzNS4xNDE2WiIvPjxwYXRoIGNsYXNzPSJyZWN0IiBkPSJNNjYuNzA0Nyw2OS45NTMxSDUyLjk3MjJWMjkuODlINjYuNzA0N1pNNTQuOTc1NCw2Ny45NWg5LjcyNjJWMzEuODkzNUg1NC45NzU0WiIvPjwvZz48L3N2Zz4K","base64"),S=a("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1yb3VuZGVkLW91dGxpbmUiIHdpZHRoPScxMTJweCcgaGVpZ2h0PScxMTJweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgogICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijc2IiBoZWlnaHQ9Ijc2IiBmaWxsPSJyZ2JhKDAsMCwwLDApIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgMjUpIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuMHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC4wcyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCAyNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0cm9rZSIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjRzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+CiAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDUwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLC41KSIgc3Ryb2tlLXdpZHRoPSIzJSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICA8L2NpcmNsZT4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgNTApIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjEuMnMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMS4ycyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgo8L3N2Zz4K","base64"),T=a("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1yb3VuZGVkLWZpbGwiIHdpZHRoPScxMTJweCcgaGVpZ2h0PScxMTJweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgogICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijc2IiBoZWlnaHQ9Ijc2IiBmaWxsPSJyZ2JhKDAsMCwwLDApIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgMjUpIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC4wcyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjBzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+CiAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDI1KSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuNHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC40cyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCA1MCkiIGZpbGw9InJnYmEoMCwwLDAsLjUpIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICA8L2NpcmNsZT4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgNTApIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMS4ycyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIxLjJzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+Cjwvc3ZnPgo=","base64"),A=a("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1zaGFycC1maWxsIiB3aWR0aD0nMTEycHgnIGhlaWdodD0nMTEycHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNzYiIGhlaWdodD0iNzYiIGZpbGw9InJnYmEoMCwwLDAsMCkiIGNsYXNzPSJiayI+PC9yZWN0PgogIDxyZWN0IHg9Ii0xMCIgeT0iLTEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDI1KSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjBzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjBzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KICA8cmVjdCB4PSItMTAiIHk9Ii0xMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCAyNSkiIGZpbGw9InJnYmEoMCwwLDAsLjUpIiBjbGFzcz0ic3EiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC40cyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iLTEwIiB5PSItMTAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAgNTApIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuOHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgPC9yZWN0PgogIDxyZWN0IHg9Ii0xMCIgeT0iLTEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDUwKSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIxLjJzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIxLjJzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KPC9zdmc+Cg==","base64"),L=a("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1zaGFycC1vdXRsaW5lIiB3aWR0aD0nMTEycHgnIGhlaWdodD0nMTEycHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNzYiIGhlaWdodD0iNzYiIGZpbGw9InJnYmEoMCwwLDAsMCkiIGNsYXNzPSJiayI+PC9yZWN0PgogIDxyZWN0IHg9Ii05IiB5PSItOSIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNSAyNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuMHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC4wcyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iLTkiIHk9Ii05IiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDI1KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLC41KSIgc3Ryb2tlLXdpZHRoPSIzJSIgY2xhc3M9InNxIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0cm9rZSIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjRzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KICA8cmVjdCB4PSItOSIgeT0iLTkiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAgNTApIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgPC9yZWN0PgogIDxyZWN0IHg9Ii05IiB5PSItOSIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNSA1MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjEuMnMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMS4ycyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+Cjwvc3ZnPgo=","base64");o(function(t,n){function i(e){return s.find(".fp-"+e,n)[0]}function l(e){s.css(_,"padding-top",100*e+"%"),w.inlineBlock||s.height(s.find("object",n)[0],s.height(n))}function d(e){e?(s.addClass(n,"is-mouseover"),s.removeClass(n,"is-mouseout")):(s.addClass(n,"is-mouseout"),s.removeClass(n,"is-mouseover"))}s.find(".fp-filters").forEach(s.removeNode);try{var p;document.body.appendChild(p=s.createElement("div",{},a("PHN2ZyBjbGFzcz0iZnAtZmlsdGVycyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMCAwIj4KICA8ZGVmcz4KICAgIDxmaWx0ZXIgaWQ9ImYxIiB4PSItMjAlIiB5PSItMjAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIj4KICAgICAgPGZlT2Zmc2V0IHJlc3VsdD0ib2ZmT3V0IiBpbj0iU291cmNlQWxwaGEiIGR4PSIwIiBkeT0iMCIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXggcmVzdWx0PSJtYXRyaXhPdXQiIGluPSJvZmZPdXQiIHR5cGU9Im1hdHJpeCIKICAgICAgdmFsdWVzPSIwLjMgMCAwIDAgMCAwIDAuMyAwIDAgMCAwIDAgMC4zIDAgMCAwIDAgMCAwLjQgMCIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iYmx1ck91dCIgaW49Im1hdHJpeE91dCIgc3RkRGV2aWF0aW9uPSI0IiAvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJibHVyT3V0IiBtb2RlPSJub3JtYWwiIC8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo=","base64"))),s.css(p,{width:0,height:0,overflow:"hidden",position:"absolute",margin:0,padding:0})}catch(t){}var e=t.conf,w=o.support,C;s.find(".fp-ratio,.fp-ui",n).forEach(s.removeNode),s.addClass(n,"flowplayer"),n.appendChild(s.createElement("div",{className:"fp-ratio"}));var R=s.createElement("div",{className:"fp-ui"},"         <div class=\"fp-waiting\">           {{ LOADING_SHARP_OUTLINE }}           {{ LOADING_SHARP_FILL }}           {{ LOADING_ROUNDED_FILL }}           {{ LOADING_ROUNDED_OUTLINE }}         </div>         <div class=\"fp-header\">           <a class=\"fp-share fp-icon\"></a>           <a class=\"fp-fullscreen fp-icon\"></a>           <a class=\"fp-unload fp-icon\"></a>         </div>         <p class=\"fp-speed-flash\"></p>         <div class=\"fp-play fp-visible\">           <a class=\"fp-icon fp-playbtn\"></a>           {{ PLAY_ROUNDED_FILL }}           {{ PLAY_ROUNDED_OUTLINE }}           {{ PLAY_SHARP_FILL }}           {{ PLAY_SHARP_OUTLINE }}         </div>         <div class=\"fp-pause\">           <a class=\"fp-icon fp-playbtn\"></a>           {{ PAUSE_SHARP_OUTLINE }}           {{ PAUSE_SHARP_FILL }}           {{ PAUSE_ROUNDED_OUTLINE }}           {{ PAUSE_ROUNDED_FILL }}         </div>         <div class=\"fp-controls\">            <a class=\"fp-icon fp-playbtn\"></a>            <span class=\"fp-elapsed\">00:00</span>            <div class=\"fp-timeline fp-bar\">               <span class=\"fp-timestamp\"></span>               <div class=\"fp-progress fp-color\"></div>            </div>            <span class=\"fp-duration\"></span>            <span class=\"fp-remaining\"></span>            <div class=\"fp-volume\">               <a class=\"fp-icon fp-volumebtn\"></a>               <div class=\"fp-volumebar fp-bar-slider\">                 <em></em><em></em><em></em><em></em><em></em><em></em><em></em>               </div>            </div>            <strong class=\"fp-speed fp-hidden\"></strong>         </div>".replace("{{ PAUSE_ROUNDED_FILL }}",v).replace("{{ PAUSE_ROUNDED_OUTLINE }}",b).replace("{{ PAUSE_SHARP_FILL }}",I).replace("{{ PAUSE_SHARP_OUTLINE }}",E).replace("{{ PLAY_SHARP_OUTLINE }}",h).replace("{{ PLAY_SHARP_FILL }}",y).replace("{{ PLAY_ROUNDED_OUTLINE }}",g).replace("{{ PLAY_ROUNDED_FILL }}",m).replace("{{ LOADING_ROUNDED_OUTLINE }}",S).replace("{{ LOADING_ROUNDED_FILL }}",T).replace("{{ LOADING_SHARP_FILL }}",A).replace("{{ LOADING_SHARP_OUTLINE }}",L).replace(/url\(#/g,"url("+window.location.href.replace(window.location.hash,"").replace(/\#$/g,"")+"#"));n.appendChild(R);var D=i("waiting"),x=i("elapsed"),_=i("ratio"),k=i("speed-flash"),P=i("duration"),O=i("remaining"),M=i("timestamp"),N=s.css(_,"padding-top"),F=i("play"),B=i("pause"),G=i("timeline"),j=c(G,t.rtl),U=i("fullscreen"),Z=i("volumebar"),Y=f(Z,{rtl:t.rtl}),z=s.hasClass(n,"no-toggle");j.disableAnimation(s.hasClass(n,"is-touch")),t.sliders=t.sliders||{},t.sliders.timeline=j,t.sliders.volume=Y;var W=[];w.svg||s.html(D,"<p>loading &hellip;</p>"),e.ratio&&l(e.ratio);try{e.fullscreen||s.removeNode(U)}catch(t){s.removeNode(U)}t.on("dvrwindow",function(){j.disable(!1)}),t.on("ready",function(t,a,o){var i=a.video.duration;j.disable(a.disabled||!i),e.adaptiveRatio&&!isNaN(o.height/o.width)&&l(o.height/o.width,!0),s.html([P,O],a.live?"Live":r(i)),s.toggleClass(n,"is-long",3600<=i),Y.slide(a.volumeLevel),"flash"===a.engine.engineName?j.disableAnimation(!0,!0):j.disableAnimation(!1),s.find(".fp-title",R).forEach(s.removeNode),o.title&&s.prepend(R,s.createElement("div",{className:"fp-message fp-title"},o.title)),s.toggleClass(n,"has-title",!!o.title)}).on("unload",function(){N||e.splash||s.css(_,"paddingTop",""),j.slide(0),s.addClass(F,"fp-visible")}).on("buffer",function(e,t,a){var n=t.video,r=n.buffer/n.duration;!n.seekable&&w.seekable&&j.max(t.conf.live?1/0:r),a&&"number"!=typeof a||(a=[{start:0,end:n.buffer}]);var o=s.find(".fp-buffer",G);o.length!==a.length&&(o.forEach(s.removeNode),o=[]),a.forEach(function(e,t){var a=o[t]||s.createElement("div",{className:"fp-buffer"});s.css(a,{left:100*e.start/n.duration+"%",width:100*(e.end-e.start)/n.duration+"%"}),s.prepend(G,a)})}).on("speed",function(t,e,a){e.video.time&&(s.text(k,a+"x"),s.addClass(k,"fp-shown"),W=W.filter(function(e){return clearTimeout(e),!1}),W.push(setTimeout(function(){s.addClass(k,"fp-hilite"),W.push(setTimeout(function(){s.removeClass(k,"fp-hilite"),W.push(setTimeout(function(){s.removeClass(k,"fp-shown")},300))},1e3))})))}).on("buffered",function(){j.max(1)}).on("progress seek",function(a,o,i){var l=t.video.duration,d=t.video.seekOffset||0;i=i||t.video.time;var p=(i-d)/(l-d);j.dragging||j.slide(p,t.seeking?0:250),s.toggleClass(n,"is-live-position",l-i<e.livePositionOffset),s.html(x,r(i)),s.html(O,r(l-i,!0))}).on("finish resume seek",function(t){s.toggleClass(n,"is-finished","finish"==t.type)}).on("resume",function(){s.addClass(F,"fp-visible"),setTimeout(function(){s.removeClass(F,"fp-visible")},300)}).on("pause",function(){s.addClass(B,"fp-visible"),setTimeout(function(){s.removeClass(B,"fp-visible")},300)}).on("stop",function(){s.html(x,r(0)),j.slide(0,100)}).on("finish",function(){s.html(x,r(t.video.duration)),j.slide(1,100),s.removeClass(n,"is-seeking")}).on("beforeseek",function(){}).on("volume",function(){Y.slide(t.volumeLevel)}).on("disable",function(){var e=t.disabled;j.disable(e),Y.disable(e),s.toggleClass(n,"is-disabled",t.disabled)}).on("mute",function(t,e,a){s.toggleClass(n,"is-muted",a)}).on("error",function(t,a,r){if(s.removeClass(n,"is-loading"),s.removeClass(n,"is-seeking"),s.addClass(n,"is-error"),r){a.error=!0;var o=r.code;(r.message||"").match(/DECODER_ERROR_NOT_SUPPORTED/)&&(o=3);var i=a.message((a.engine&&a.engine.engineName||"html5")+": "+e.errors[o]);s.removeClass(n,"is-mouseover"),a.one("load progress",function(){i()})}}).one("resume ready",function(){var e=s.find("video.fp-engine",n)[0];if(e&&(!s.width(e)||!s.height(e))){var t=n.style.overflow;n.style.overflow="visible",setTimeout(function(){t?n.style.overflow=t:n.style.removeProperty("overflow")})}}),u.on(n,"mouseenter mouseleave",function(a){if(!z){var r="mouseover"==a.type,o;if(d(r),r){var i=function(){d(!0),o=new Date};t.on("pause.x volume.x",i),u.on(n,"mousemove.x",i),C=setInterval(function(){new Date-o>e.mouseoutTimeout&&(d(!1),o=new Date)},100)}else u.off(n,"mousemove.x"),t.off("pause.x volume.x"),clearInterval(C)}}),u.on(n,"mouseleave",function(){(j.dragging||Y.dragging)&&(s.addClass(n,"is-mouseover"),s.removeClass(n,"is-mouseout"))}),u.on(n,"click.player",function(a){return t.disabled?void 0:s.hasClass(a.target,"fp-ui")||s.hasClass(a.target,"fp-engine")||a.flash||s.hasParent(a.target,".fp-play,.fp-pause")?(a.preventDefault&&a.preventDefault(),t.toggle()):void 0}),u.on(n,"mousemove",".fp-timeline",function(e){var a=e.pageX||e.clientX,n=a-s.offset(G).left,o=n/s.width(G),i=t.video,l=i.duration-(void 0===i.seekOffset?0:i.seekOffset),d=(t.rtl?1-o:o)*l;if(!(0>o)){s.html(M,r(d));var p=n-s.width(M)/2;0>p&&(p=0),p>s.width(G)-s.width(M)&&(p=!1),!1===p?s.css(M,{left:"auto",right:"0px"}):s.css(M,{left:p+"px",right:"auto"})}}),u.on(n,"contextmenu",function(e){var a=window;if(!s.hasClass(n,"is-flash-disabled")){var r=s.find(".fp-context-menu",n)[0];r&&(e.preventDefault(),t.showMenu(r,{left:e.clientX-a.scrollX,top:e.clientY-a.scrollY}),u.on(n,"click",".fp-context-menu",function(e){e.stopPropagation()}))}}),t.on("flashdisabled",function(e,a,r){s.addClass(n,"is-flash-disabled");var o;!1!==r&&(o=t.message("Seems something is blocking Adobe Flash from running")),t.one("ready progress",function(){s.removeClass(n,"is-flash-disabled"),o&&o()})}),e.poster&&s.css(n,"background-image","url("+e.poster+")");var H=s.css(n,"background-color"),V="none"!=s.css(n,"background-image")||H&&"rgba(0, 0, 0, 0)"!=H&&"transparent"!=H;if(V&&!e.splash){e.poster||(e.poster=!0);var J=function(){s.addClass(n,"is-poster"),s.addClass(F,"fp-visible"),t.poster=!0,t.on("resume.poster progress.poster beforeseek.poster",function(e){("beforeseek"===e.type||t.playing)&&(s.removeClass(n,"is-poster"),s.removeClass(F,"fp-visible"),t.poster=!1,t.off(".poster"))})};t.on("stop",function(){J()}),t.on("ready",function(e,t,a){a.index||a.autoplay||J()})}"string"==typeof e.splash&&s.css(n,"background-image","url('"+e.splash+"')"),!V&&t.forcedSplash&&s.css(n,"background-color","#555"),u.on(n,"click",".fp-toggle, .fp-play, .fp-playbtn",function(){t.disabled||t.toggle()}),u.on(n,"click",".fp-volumebtn",function(){t.mute()}),u.on(n,"click",".fp-fullscreen",function(){t.fullscreen()}),u.on(n,"click",".fp-unload",function(){t.unload()}),u.on(G,"slide",function(e){t.seeking=!0,t.seekTo(10*e)}),u.on(Z,"slide",function(e){t.volume(e)}),u.on(n,"click",".fp-duration,.fp-remaining",function(){return t.dvr?t.seekTo(10):void s.toggleClass(n,"is-inverted")}),d(z);var K;if(t.on("shutdown",function(){u.off(G),u.off(Z),K&&window.cancelAnimationFrame(K),s.removeNode(R),s.find(".fp-ratio",n).forEach(s.removeNode)}),"function"==typeof window.requestAnimationFrame){var X=s.find(".fp-player",n)[0]||n,Q=function(){s.toggleClass(n,"is-tiny",400>X.clientWidth),s.toggleClass(n,"is-small",600>X.clientWidth&&400<=X.clientWidth),K=window.requestAnimationFrame(Q)};K=window.requestAnimationFrame(Q)}}),t.exports.format=r}).call(this,e("buffer").Buffer)},{"../common":1,"../flowplayer":31,"./ui/bar-slider":28,"./ui/slider":29,bean:34,buffer:35}],28:[function(e,t){var a=e("bean"),n=e("../../common");t.exports=function(e,t){function r(t){var a=t.pageX||t.clientX,r=n.offset(e),o=n.width(e);!a&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length&&(a=t.originalEvent.touches[0].pageX);var i=a-r.left;i=p(0,m(o,i));var s=i/o;return l&&(s=1-s),s}t=t||{};var o=t.activeClass||"fp-color",i=t.inactiveClass||"fp-grey",s=t.childSelector||"em",l=!!t.rtl,d=!1,u=n.find(s,e).length,c={unload:function(){a.off(e,".barslider")},slide:function(t,r){n.find(s,e).forEach(function(e,a){var r=t>a/u;n.toggleClass(e,o,r),n.toggleClass(e,i,!r)}),r&&a.fire(e,"slide",[t])},disable:function(e){d=e}};return a.on(e,"mousedown.sld touchstart.sld",function(t){t.preventDefault(),d||(c.slide(r(t),!0),a.on(e,"mousemove.sld touchmove.sld",function(e){e.preventDefault(),c.slide(r(e),!0)}),a.one(document,"mouseup.sld touchup.sld",function(){a.off(e,"mousemove.sld touchmove.sld")}))}),c}},{"../../common":1,bean:34}],29:[function(e,t){'use strict';var a=e("bean"),n=e("../../common"),r=function(e,t){var a;return function(){a||(e.apply(this,arguments),a=1,setTimeout(function(){a=0},t))}};t.exports=function(t,o){var i=n.lastChild(t),s=!1,l=function(){b=n.offset(t),v=n.width(t),I=n.height(t),S=E?I:v,A=g(T)},d=function(e){h||e==y.value||T&&!(e<T)||(a.fire(t,"slide",[e]),y.value=e)},c=function(t){var e=t.pageX||t.clientX;!e&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length&&(e=t.originalEvent.touches[0].pageX);var a=E?t.pageY-b.top:e-b.left;a=p(0,m(A||S,a));var n=a/S;return E&&(n=1-n),o&&(n=1-n),f(n,0,!0)},f=function(e,t){void 0===t&&(t=0),1<e&&(e=1);var a=u(1e3*e)/10+"%";return(!T||e<=T)&&(s?n.removeClass(i,"animated"):(n.addClass(i,"animated"),n.css(i,"transition-duration",(t||0)+"ms")),n.css(i,"width",a)),e},g=function(e){return p(0,m(S,E?(1-e)*I:e*v))},y={max:function(e){T=e},disable:function(e){h=e},slide:function(e,t,a){l(),a&&d(e),f(e,t)},disableAnimation:function(e,a){s=!1!==e,n.toggleClass(t,"no-animation",!!a)}},h,b,v,I,E,S,T,A;return l(),a.on(t,"mousedown.sld touchstart",function(o){if(o.preventDefault(),!h){var i=r(d,100);l(),y.dragging=!0,n.addClass(t,"is-dragging"),d(c(o)),a.on(document,"mousemove.sld touchmove.sld",function(t){t.preventDefault(),i(c(t))}),a.one(document,"mouseup touchend",function(){y.dragging=!1,n.removeClass(t,"is-dragging"),a.off(document,"mousemove.sld touchmove.sld")})}}),y}},{"../../common":1,bean:34}],30:[function(e,t){function a(e){var t=document.createElement("textarea");t.value=e,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t),t.select();var a=document.execCommand("copy");if(document.body.removeChild(t),!a)throw new Error("Unsuccessfull")}t.exports=function(e,t,n){try{a(e),t()}catch(t){n(t)}}},{}],31:[function(e,t){'use strict';function a(e,t,a){t&&t.embed&&(t.embed=n({},v.defaults.embed,t.embed));var i=!1;try{"undefined"==typeof v.conf.storage&&"object"==typeof window.localStorage&&(window.localStorage.flowplayerTestStorage="test",i=!0)}catch(e){}var s=e,g=n({},v.defaults,v.conf,t),y={},h=s.className,b=new E,S,T;l.addClass(s,"is-loading"),l.toggleClass(s,"no-flex",!v.support.flex),l.toggleClass(s,"no-svg",!v.support.svg);try{y=v.conf.storage||(i?window.localStorage:y)}catch(t){}if(g.volume="true"===y.muted?0:g.volume===v.defaults.volume?isNaN(y.volume)?g.volume:y.volume:g.volume,g.debug=!!y.flowplayerDebug||g.debug,g.aspectRatio&&"string"==typeof g.aspectRatio){var A=g.aspectRatio.split(/[:\/]/);g.ratio=A[1]/A[0]}var L=s.currentStyle&&"rtl"===s.currentStyle.direction||window.getComputedStyle&&null!==window.getComputedStyle(s,null)&&"rtl"===window.getComputedStyle(s,null).getPropertyValue("direction");L&&l.addClass(s,"is-rtl");var w={conf:g,currentSpeed:1,volumeLevel:g.muted?0:"undefined"==typeof g.volume?1*y.volume:g.volume,video:{},disabled:!1,finished:!1,loading:!1,muted:"true"==y.muted||g.muted,paused:!1,playing:!1,ready:!1,splash:!1,rtl:L,hijack:function(e){try{w.engine.suspendEngine()}catch(t){}w.hijacked=e},release:function(){try{w.engine.resumeEngine()}catch(t){}w.hijacked=!1},debug:function(){g.debug&&console.log.apply(console,["DEBUG"].concat([].slice.call(arguments)))},load:function(t,a){if(!(w.error||w.loading)){w.video={},w.finished=!1,t=t||g.clip,t=n({},b.resolve(t,g.clip.sources)),(w.playing||w.engine)&&(t.autoplay=!0);var o=C(t);if(!o)return setTimeout(function(){w.trigger("error",[w,{code:v.support.flashVideo?5:10}])})&&w;if(!o.engineName)throw new Error("engineName property of factory should be exposed");if(w.engine&&o.engineName===w.engine.engineName||(w.ready=!1,w.engine&&(w.engine.unload(),w.conf.autoplay=!0),T=w.engine=o(w,s),w.one("ready",function(){setTimeout(function(){w.muted?w.mute(!0,!0):T.volume(w.volumeLevel)})})),n(t,T.pick(t.sources.filter(function(e){return!e.engine||e.engine===T.engineName}))),t.src){var i=w.trigger("load",[w,t,T],!0);i.defaultPrevented?w.loading=!1:(w.ready=!1,T.load(t),r(t)&&(a=t),a&&w.one("ready",a))}return w}},pause:function(e){return w.hijacked?w.hijacked.pause(e)|w:(!w.ready||w.seeking||w.loading||(T.pause(),w.one("pause",e)),w)},resume:function(){var e=w.trigger("beforeresume",[w],!0);if(!e.defaultPrevented)return w.hijacked?w.hijacked.resume()|w:(w.ready&&w.paused&&(T.resume(),w.finished&&(w.trigger("resume",[w]),w.finished=!1)),w)},toggle:function(){return w.ready?w.paused?w.resume():w.pause():w.load()},seek:function(e,t){if("boolean"==typeof e){var a=w.conf.seekStep||.1*w.video.duration;e=w.video.time+(e?a:-a),e=m(p(e,0),w.video.duration-.1)}if("undefined"==typeof e)return w;if(w.hijacked)return w.hijacked.seek(e,t)|w;if(w.ready){S=e;var n=w.trigger("beforeseek",[w,e],!0);n.defaultPrevented?(w.seeking=!1,l.toggleClass(s,"is-seeking",w.seeking)):(T.seek(e),r(t)&&w.one("seek",t))}return w},seekTo:function(e,t){return void 0===e?w.seek(S,t):void 0===w.video.seekOffset?w.seek(.1*w.video.duration*e,t):w.seek(w.video.seekOffset+.1*(w.video.duration-w.video.seekOffset)*e,t)},mute:function(e,t){return void 0===e&&(e=!w.muted),w.muted=e,t||(y.muted=e,y.volume=isNaN(y.volume)?g.volume:y.volume),"undefined"==typeof T.mute?(w.volume(e?0:y.volume,!0),w.trigger("mute",[w,e])):T.mute(e),w},volume:function(e,t){return w.ready&&(e=m(p(e,0),1),!t&&(y.volume=e),T.volume(e)),w},speed:function(e,t){return w.ready&&("boolean"==typeof e&&(e=g.speeds[g.speeds.indexOf(w.currentSpeed)+(e?1:-1)]||w.currentSpeed),T.speed(e),t&&s.one("speed",t)),w},stop:function(){return w.ready&&(w.pause(),!w.live||w.dvr?w.seek(0,function(){w.trigger("stop",[w])}):w.trigger("stop",[w])),w},unload:function(){return g.splash?(w.trigger("unload",[w]),T&&(T.unload(),w.engine=T=0)):w.stop(),w},shutdown:function(){w.unload(),w.trigger("shutdown",[w]),o.off(s),delete c[s.getAttribute("data-flowplayer-instance-id")],s.removeAttribute("data-flowplayer-instance-id")},disable:function(e){return void 0===e&&(e=!w.disabled),e!=w.disabled&&(w.disabled=e,w.trigger("disable",e)),w},registerExtension:function(e,t){e=e||[],t=t||[],"string"==typeof e&&(e=[e]),"string"==typeof t&&(t=[t]),e.forEach(function(e){w.extensions.js.push(e)}),t.forEach(function(e){w.extensions.css.push(e)})}};w.conf=n(w.conf,g),w.extensions={js:[],css:[]},v.extensions.forEach(function(e){w.registerExtension(e[0],e[1])}),d(w);var C=function(e){var t=v.engines,a;if(g.engine){var n=t.filter(function(t){return t.engineName===g.engine})[0];if(n&&e.sources.some(function(e){return!(e.engine&&e.engine!==n.engineName)&&n.canPlay(e.type,w.conf)}))return n}return g.enginePreference&&(t=v.engines.filter(function(e){return-1<g.enginePreference.indexOf(e.engineName)}).sort(function(e,t){return g.enginePreference.indexOf(e.engineName)-g.enginePreference.indexOf(t.engineName)})),e.sources.some(function(e){var n=t.filter(function(t){return!(e.engine&&e.engine!==t.engineName)&&t.canPlay(e.type,w.conf)}).shift();return n&&(a=n),!!n}),a};return s.getAttribute("data-flowplayer-instance-id")||(s.setAttribute("data-flowplayer-instance-id",I++),w.on("boot",function(){var e=v.support;(g.splash||l.hasClass(s,"is-splash")||!e.firstframe)&&(w.forcedSplash=!g.splash&&!l.hasClass(s,"is-splash"),w.splash=!0,!g.splash&&(g.splash=!0),l.addClass(s,"is-splash")),g.splash&&l.find("video",s).forEach(l.removeNode),(g.dvr||g.live||l.hasClass(s,"is-live"))&&(w.live=g.live=!0,w.dvr=g.dvr=!!g.dvr||l.hasClass(s,"is-dvr"),l.addClass(s,"is-live"),l.toggleClass(s,"is-dvr",w.dvr)),f.forEach(function(t){t(w,s)}),c.push(w),g.splash?w.unload():w.load(),g.disabled&&w.disable(),w.one("ready",a),w.one("shutdown",function(){s.className=h})}).on("load",function(t,e,a){g.splash&&l.find(".flowplayer.is-ready,.flowplayer.is-loading").forEach(function(e){var t=e.getAttribute("data-flowplayer-instance-id");if(t!==s.getAttribute("data-flowplayer-instance-id")){var n=c[+t];n&&n.conf.splash&&n.unload()}}),l.addClass(s,"is-loading"),e.loading=!0,("undefined"!=typeof a.live||"undefined"!=typeof a.dvr)&&(l.toggleClass(s,"is-live",a.dvr||a.live),l.toggleClass(s,"is-dvr",!!a.dvr),e.live=a.dvr||a.live,e.dvr=!!a.dvr)}).on("ready",function(t,e,a){a.time=0,e.video=a,l.removeClass(s,"is-loading"),e.loading=!1,e.muted?e.mute(!0,!0):e.volume(e.volumeLevel);var n=e.conf.hlsFix&&/mpegurl/i.exec(a.type);l.toggleClass(s,"hls-fix",!!n)}).on("unload",function(){l.removeClass(s,"is-loading"),w.loading=!1}).on("ready unload",function(t){var e="ready"==t.type;l.toggleClass(s,"is-splash",!e),l.toggleClass(s,"is-ready",e),w.ready=e,w.splash=!e}).on("progress",function(t,e,a){e.video.time=a}).on("buffer",function(t,e,a){e.video.buffer="number"==typeof a?a:a.length?a[a.length-1].end:0}).on("speed",function(t,e,a){e.currentSpeed=a}).on("volume",function(t,e,a){e.volumeLevel=u(100*a)/100,e.muted&&a&&e.mute(!1)}).on("beforeseek seek",function(t){w.seeking="beforeseek"==t.type,l.toggleClass(s,"is-seeking",w.seeking)}).on("ready pause resume unload finish stop",function(t){w.paused=/pause|finish|unload|stop/.test(t.type),w.paused=w.paused||"ready"===t.type&&!g.autoplay&&!w.playing,w.playing=!w.paused,l.toggleClass(s,"is-paused",w.paused),l.toggleClass(s,"is-playing",w.playing),w.load.ed||w.pause()}).on("finish",function(){w.finished=!0}).on("error",function(){})),w.trigger("boot",[w,s]),w}var n=e("extend-object"),r=e("is-function"),o=e("bean"),i=e("./ext/ui/slider"),s=e("./ext/ui/bar-slider"),l=e("./common"),d=e("./ext/events"),c=[],f=[],g=window.onbeforeunload;window.onbeforeunload=function(e){if(c.forEach(function(e){e.conf.splash?e.unload():e.bind("error",function(){l.find(".flowplayer.is-error .fp-message").forEach(l.removeNode)})}),g)return g(e)};var y=/Safari/.exec(navigator.userAgent)&&!/Chrome/.exec(navigator.userAgent),h=/(\d+\.\d+) Safari/.exec(navigator.userAgent),b=h?+h[1]:100,v=t.exports=function(e,t,n){if(r(e))return f.push(e);if("number"==typeof e||"undefined"==typeof e)return c[e||0];if(e.nodeType)return null===e.getAttribute("data-flowplayer-instance-id")?t?a(e,t,n):void 0:c[e.getAttribute("data-flowplayer-instance-id")];if(e.jquery)return v(e[0],t,n);if("string"==typeof e){var o=l.find(e)[0];return o&&v(o,t,n)}};n(v,{version:"7.2.7",engines:[],engine:function(t){return v.engines.filter(function(a){return a.engineName===t})[0]},extensions:[],conf:{},set:function(e,t){"string"==typeof e?v.conf[e]=t:n(v.conf,e)},registerExtension:function(e,t){v.extensions.push([e,t])},support:{},defaults:{debug:!1,disabled:!1,fullscreen:window==window.top,keyboard:!0,ratio:9/16,adaptiveRatio:!1,rtmp:0,proxy:"best",hlsQualities:!0,seekStep:!1,splash:!1,live:!1,livePositionOffset:120,swf:"//releases.flowplayer.org/7.2.7/flowplayer.swf",swfHls:"//releases.flowplayer.org/7.2.7/flowplayerhls.swf",speeds:[.25,.5,1,1.5,2],tooltip:!0,mouseoutTimeout:5e3,mutedAutoplay:!0,clickToUnMute:!0,volume:1,errors:["","Video loading aborted","Network error","Video not properly encoded","Video file not found","Unsupported video","Skin not found","SWF file not found","Subtitles not found","Invalid RTMP URL","Unsupported video format. Try installing Adobe Flash."],errorUrls:["","","","","","","","","","","http://get.adobe.com/flashplayer/"],playlist:[],hlsFix:y&&8>b,disableInline:!1},bean:o,common:l,slider:i,barSlider:s,extend:n});var I=0,E=e("./ext/resolve");if("undefined"!=typeof window.jQuery){var S=window.jQuery;S(function(){"function"==typeof S.fn.flowplayer&&S(".flowplayer:has(video:not(.fp-engine),script[type=\"application/json\"])").flowplayer()});var T=function(e){if(!e.length)return{};var t=e.data()||{},a={};return S.each(["autoplay","loop","preload","poster"],function(n,r){var o=e.attr(r);void 0!==o&&-1!==["autoplay","poster"].indexOf(r)?a[r]=!o||o:void 0!==o&&(t[r]=!o||o)}),e[0].autoplay=e[0].preload=!1,t.subtitles=e.find("track").map(function(){var e=S(this);return{src:e.attr("src"),kind:e.attr("kind"),label:e.attr("label"),srclang:e.attr("srclang"),default:e.prop("default")}}).get(),t.sources=new E().sourcesFromVideoTag(e,S),n(a,{clip:t})};S.fn.flowplayer=function(e,t){return this.each(function(){"string"==typeof e&&(e={swf:e}),r(e)&&(t=e,e={});var n=S(this),o=n.find("script[type=\"application/json\"]"),i=o.length?JSON.parse(o.text()):T(n.find("video")),s=S.extend({},e||{},i,n.data()),l=a(this,s,t);d.EVENTS.forEach(function(e){l.on(e+".jquery",function(e){n.trigger.call(n,e.type,e.detail&&e.detail.args)})}),n.data("flowplayer",l)})}}},{"./common":1,"./ext/events":12,"./ext/resolve":21,"./ext/ui/bar-slider":28,"./ext/ui/slider":29,bean:34,"extend-object":39,"is-function":42}],32:[function(e,t){e("es5-shim");var a=t.exports=e("./flowplayer");e("./ext/support"),e("./engine/embed"),e("./engine/hlsjs"),e("./engine/html5"),e("./engine/flash"),e("./ext/ui"),e("./ext/message"),e("./ext/keyboard"),e("./ext/playlist"),e("./ext/cuepoint"),e("./ext/subtitle"),e("./ext/analytics"),e("./ext/share"),e("./ext/facebook"),e("./ext/twitter"),e("./ext/embed"),e("./ext/airplay"),e("./ext/chromecast"),e("./ext/qsel"),e("./ext/menu"),e("./ext/fullscreen"),e("./ext/mobile"),a(function(l,e){var o=function(t){return"none"!==window.getComputedStyle(t).display},r=l.conf,n=a.common,t=n.createElement,p=r.swf.indexOf("flowplayer.org")&&r.e&&e.getAttribute("data-origin"),i=p?function(t){var e=document.createElement("a");return e.href=t,n.hostname(e.hostname)}(p):n.hostname(),b=(document,r.key);if(!("file:"==location.protocol&&(i="localhost"),l.load.ed=1,r.hostname=i,r.origin=p||location.href,p&&function(t,e){var n=t.className.split(" ");-1===n.indexOf(e)&&(t.className+=" "+e)}(e,"is-embedded"),"string"==typeof b&&(b=b.split(/,\s*/)),b&&"function"==typeof key_check&&key_check(b,i))){var v=t("a",{href:"https://flowplayer.com/hello/?from=player"}),I=n.find(".fp-player",e)[0];(I||e).appendChild(v);var E=t("div",{className:"fp-context-menu fp-menu"},"<strong>&copy; 2018 Flowplayer AB</strong><a href=\"https://flowplayer.com/hello/?from=player\">About Flowplayer</a><a href=\"https://flowplayer.com/license\">GPL based license</a>"),u=window.location.href.indexOf("localhost");7!==u&&(I||e).appendChild(E),l.on("pause resume finish unload ready",function(r,s){var a=-1;if(s.video.src)for(var d=[["org","flowplayer","drive"],["org","flowplayer","my"],["org","flowplayer","cdn"],["com","flowplayer","cdn"]],n=0;n<d.length&&(a=s.video.src.indexOf("://"+d[n].reverse().join(".")),-1===a);n++);if(/pause|resume/.test(r.type)&&"flash"!=s.engine.engineName&&4!=a&&5!=a){var c={display:"block",position:"absolute",left:"16px",bottom:"70px",zIndex:99999,width:"100px",height:"20px"};for(var p in c)c.hasOwnProperty(p)&&(v.style[p]=c[p]);s.load.ed=o(v)&&(7===u||E.parentNode==e||E.parentNode==I),s.load.ed||s.pause()}else v.style.display="none"})}else if(r.logo){var I=n.find(".fp-player",e)[0],g=r.logo.href||"",c=r.logo.src||r.logo,v=t("a",{className:"fp-logo",href:g});p&&(v.href=v.href||p),r.embed&&r.embed.popup&&(v.target="_blank");var h=t("img",{src:c});v.appendChild(h),(I||e).appendChild(v)}})},{"./engine/embed":2,"./engine/flash":3,"./engine/hlsjs":4,"./engine/html5":6,"./ext/airplay":7,"./ext/analytics":8,"./ext/chromecast":9,"./ext/cuepoint":10,"./ext/embed":11,"./ext/facebook":13,"./ext/fullscreen":14,"./ext/keyboard":15,"./ext/menu":16,"./ext/message":17,"./ext/mobile":18,"./ext/playlist":19,"./ext/qsel":20,"./ext/share":22,"./ext/subtitle":23,"./ext/support":25,"./ext/twitter":26,"./ext/ui":27,"./flowplayer":31,"es5-shim":38}],33:[function(e,t,a){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function r(e){var t=e.length,a,r,o,s,d,c;d=n(e),c=new u(3*t/4-d),o=0<d?t-4:t;var f=0;for(a=0,r=0;a<o;a+=4,r+=3)s=p[e.charCodeAt(a)]<<18|p[e.charCodeAt(a+1)]<<12|p[e.charCodeAt(a+2)]<<6|p[e.charCodeAt(a+3)],c[f++]=255&s>>16,c[f++]=255&s>>8,c[f++]=255&s;return 2===d?(s=p[e.charCodeAt(a)]<<2|p[e.charCodeAt(a+1)]>>4,c[f++]=255&s):1===d&&(s=p[e.charCodeAt(a)]<<10|p[e.charCodeAt(a+1)]<<4|p[e.charCodeAt(a+2)]>>2,c[f++]=255&s>>8,c[f++]=255&s),c}function o(e){return d[63&e>>18]+d[63&e>>12]+d[63&e>>6]+d[63&e]}function s(e,t,a){for(var n=[],r=t,s;r<a;r+=3)s=(e[r]<<16)+(e[r+1]<<8)+e[r+2],n.push(o(s));return n.join("")}function l(e){for(var t=e.length,a=t%3,n="",r=[],o=16383,l=0,p=t-a,u;l<p;l+=o)r.push(s(e,l,l+o>p?p:l+o));return 1===a?(u=e[t-1],n+=d[u>>2],n+=d[63&u<<4],n+="=="):2===a&&(u=(e[t-2]<<8)+e[t-1],n+=d[u>>10],n+=d[63&u>>4],n+=d[63&u<<2],n+="="),r.push(n),r.join("")}a.byteLength=function(e){return 3*e.length/4-n(e)},a.toByteArray=r,a.fromByteArray=l;for(var d=[],p=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,g=c.length;f<g;++f)d[f]=c[f],p[c.charCodeAt(f)]=f;p[45]=62,p[95]=63},{}],34:[function(e,a){/*!
  * Bean - copyright (c) Jacob Thornton 2011-2012
  * https://github.com/fat/bean
  * MIT license
  */(function(e,n,r){"undefined"!=typeof a&&a.exports?a.exports=r():"function"==typeof t&&t.amd?t(r):n[e]=r()})("bean",this,function(e,t){e=e||"bean",t=t||this;var a=window,n=t[e],r=/[^\.]*(?=\..*)\.|.*/,o=/\..*/,i=document||{},s=i.documentElement||{},d=s.addEventListener,p=d?"addEventListener":"attachEvent",u={},c=Array.prototype.slice,f=function(e,t){return e.split(t||" ")},g=function(e){return"string"==typeof e},m=function(e){return"function"==typeof e},y=function(e,t,a){for(a=0;a<t.length;a++)t[a]&&(e[t[a]]=1);return e}({},f("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+(d?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":""))),h=function(){var e="compareDocumentPosition"in s?function(e,t){return t.compareDocumentPosition&&16==(16&t.compareDocumentPosition(e))}:"contains"in s?function(e,t){return t=9===t.nodeType||t===window?s:t,t!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},t=function(t){var a=t.relatedTarget;return a?a!==this&&"xul"!==a.prefix&&!/document/.test(this.toString())&&!e(a,this):null==a};return{mouseenter:{base:"mouseover",condition:t},mouseleave:{base:"mouseout",condition:t},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}}(),b=function(){var e=f("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),t=e.concat(f("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=t.concat(f("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),r=e.concat(f("char charCode key keyCode keyIdentifier keyLocation location")),o=e.concat(f("data")),l=e.concat(f("touches targetTouches changedTouches scale rotation")),d=e.concat(f("data origin source")),p=e.concat(f("state")),u=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,r}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,a,n){return a.rightClick=3===e.which||2===e.button,a.pos={x:0,y:0},e.pageX||e.pageY?(a.clientX=e.pageX,a.clientY=e.pageY):(e.clientX||e.clientY)&&(a.clientX=e.clientX+i.body.scrollLeft+s.scrollLeft,a.clientY=e.clientY+i.body.scrollTop+s.scrollTop),/over|out/.test(n)&&(a.relatedTarget=e.relatedTarget||e[("mouseover"==n?"from":"to")+"Element"]),t}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return o}},{reg:/^touch|^gesture/i,fix:function(){return l}},{reg:/^message$/i,fix:function(){return d}},{reg:/^popstate$/i,fix:function(){return p}},{reg:/.*/,fix:function(){return e}}],c={},g=function(e,t,n){if(arguments.length&&(e=e||((t.ownerDocument||t.document||t).parentWindow||a).event,this.originalEvent=e,this.isNative=n,this.isBean=!0,!!e)){var r=e.type,o=e.target||e.srcElement,s,d,f,g,m;if(this.target=o&&3===o.nodeType?o.parentNode:o,n){if(m=c[r],!m)for(s=0,d=u.length;s<d;s++)if(u[s].reg.test(r)){c[r]=m=u[s].fix;break}for(g=m(e,this,r),s=g.length;s--;)!((f=g[s])in this)&&f in e&&(this[f]=e[f])}}};return g.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},g.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},g.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},g.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},g.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},g.prototype.clone=function(e){var t=new g(this,this.element,this.isNative);return t.currentTarget=e,t},g}(),v=function(e,t){return d||t||e!==i&&e!==a?e:s},I=function(){var e=function(e,t,a,n){var r=function(a,r){return t.apply(e,n?c.call(r,a?0:1).concat(n):r)},o=function(a,n){return t.__beanDel?t.__beanDel.ft(a.target,e):n},i=a?function(e){var t=o(e,this);if(a.apply(t,arguments))return e&&(e.currentTarget=t),r(e,arguments)}:function(e){return t.__beanDel&&(e=e.clone(o(e))),r(e,arguments)};return i.__beanDel=t.__beanDel,i},t=function(t,a,n,r,o,i,s){var l=h[a],u;"unload"==a&&(n=L(w,t,a,n,r)),l&&(l.condition&&(n=e(t,n,l.condition,i)),a=l.base||a),this.isNative=u=y[a]&&!!t[p],this.customType=!d&&!u&&a,this.element=t,this.type=a,this.original=r,this.namespaces=o,this.eventType=d||u?a:"propertychange",this.target=v(t,u),this[p]=!!this.target[p],this.root=s,this.handler=e(t,n,null,i)};return t.prototype.inNamespaces=function(e){var t=0,a,n;if(!e)return!0;if(!this.namespaces)return!1;for(a=e.length;a--;)for(n=this.namespaces.length;n--;)e[a]==this.namespaces[n]&&t++;return e.length===t},t.prototype.matches=function(e,t,a){return this.element===e&&(!t||this.original===t)&&(!a||this.handler===a)},t}(),E=function(){var e={},a=function(n,r,o,s,d,p){var u=d?"r":"$";if(!r||"*"==r)for(var c in e)c.charAt(0)==u&&a(n,c.substr(1),o,s,d,p);else{var t=0,f=e[u+r],g;if(!f)return;for(g=f.length;t<g;t++)if(("*"==n||f[t].matches(n,o,s))&&!p(f[t],f,t,r))return}};return{has:function(t,a,n,r){var o=e[(r?"r":"$")+a],s;if(o)for(s=o.length;s--;)if(!o[s].root&&o[s].matches(t,n,null))return!0;return!1},get:function(e,t,n,r){var o=[];return a(e,t,n,null,r,function(e){return o.push(e)}),o},put:function(t){var a=!t.root&&!this.has(t.element,t.type,null,!1),n=(t.root?"r":"$")+t.type;return(e[n]||(e[n]=[])).push(t),a},del:function(t){a(t.element,t.type,null,t.handler,t.root,function(t,a,n){return a.splice(n,1),t.removed=!0,0===a.length&&delete e[(t.root?"r":"$")+t.type],!1})},entries:function(){var a=[],n;for(n in e)"$"==n.charAt(0)&&(a=a.concat(e[n]));return a}}}(),S=function(t){l=arguments.length?t:i.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},T=function(e,t){if(!(!d&&t&&e&&e.propertyName!="_on"+t)){var a=E.get(this,t||e.type,null,!1),n=a.length,r=0;for(e=new b(e,this,!0),t&&(e.type=t);r<n&&!e.isImmediatePropagationStopped();r++)a[r].removed||a[r].handler.call(this,e)}},A=d?function(e,t,a){e[a?"addEventListener":"removeEventListener"](t,T,!1)}:function(e,t,a,n){var r;a?(E.put(r=new I(e,n||t,function(t){T.call(e,t,n)},T,null,null,!0)),n&&null==e["_on"+n]&&(e["_on"+n]=0),r.target.attachEvent("on"+r.eventType,r.handler)):(r=E.get(e,n||t,T,!0)[0],r&&(r.target.detachEvent("on"+r.eventType,r.handler),E.del(r)))},L=function(e,t,a,n,r){return function(){n.apply(this,arguments),e(t,a,r)}},w=function(e,t,a,n){var r=t&&t.replace(o,""),s=E.get(e,r,null,!1),d={},u,c;for(u=0,c=s.length;u<c;u++)(!a||s[u].original===a)&&s[u].inNamespaces(n)&&(E.del(s[u]),!d[s[u].eventType]&&s[u][p]&&(d[s[u].eventType]={t:s[u].eventType,c:s[u].type}));for(u in d)E.has(e,d[u].t,null,!1)||A(e,d[u].t,!1,d[u].c)},C=function(e,t){var a=function(t,a){for(var n=g(e)?l(e,a):e,r;t&&t!==a;t=t.parentNode)for(r=n.length;r--;)if(n[r]===t)return t},n=function(n){var e=a(n.target,this);e&&t.apply(e,arguments)};return n.__beanDel={ft:a,selector:e},n},R=d?function(e,t,n){var r=i.createEvent(e?"HTMLEvents":"UIEvents");r[e?"initEvent":"initUIEvent"](t,!0,!0,a,1),n.dispatchEvent(r)}:function(e,t,a){a=v(a,e),e?a.fireEvent("on"+t,i.createEventObject()):a["_on"+t]++},D=function(e,t,a){var n=g(t),s,l,d,p;if(n&&0<t.indexOf(" ")){for(t=f(t),p=t.length;p--;)D(e,t[p],a);return e}if(l=n&&t.replace(o,""),l&&h[l]&&(l=h[l].base),!t||n)(d=n&&t.replace(r,""))&&(d=f(d,".")),w(e,l,a,d);else if(m(t))w(e,null,t);else for(s in t)t.hasOwnProperty(s)&&D(e,s,t[s]);return e},x=function(e,t,a,n){var s,d,g,y,h,b,v;if(void 0===a&&"object"==typeof t){for(d in t)t.hasOwnProperty(d)&&x.call(this,e,d,t[d]);return}for(m(a)?(h=c.call(arguments,3),n=s=a):(s=n,h=c.call(arguments,4),n=C(a,s,l)),g=f(t),this===u&&(n=L(D,e,t,n,s)),y=g.length;y--;)v=E.put(b=new I(e,g[y].replace(o,""),n,s,f(g[y].replace(r,""),"."),h,!1)),b[p]&&v&&A(e,b.eventType,!0,b.customType);return e},l;if(a.attachEvent){var _=function(){var e=E.entries(),t;for(t in e)e[t].type&&"unload"!==e[t].type&&D(e[t].element,e[t].type);a.detachEvent("onunload",_),a.CollectGarbage&&a.CollectGarbage()};a.attachEvent("onunload",_)}return S(),{on:x,add:function(e,t,a,n){return x.apply(null,g(a)?[e,a,t,n].concat(3<arguments.length?c.call(arguments,5):[]):c.call(arguments))},one:function(){return x.apply(u,arguments)},off:D,remove:D,clone:function(e,t,a){for(var n=E.get(t,a,null,!1),r=n.length,o=0,s,l;o<r;o++)n[o].original&&(s=[e,n[o].type],(l=n[o].handler.__beanDel)&&s.push(l.selector),s.push(n[o].original),x.apply(null,s));return e},fire:function(e,t,a){var n=f(t),s,d,u,c,g;for(s=n.length;s--;)if(t=n[s].replace(o,""),(c=n[s].replace(r,""))&&(c=f(c,".")),!c&&!a&&e[p])R(y[t],t,e);else for(g=E.get(e,t,null,!1),a=[!1].concat(a),(d=0,u=g.length);d<u;d++)g[d].inNamespaces(c)&&g[d].handler.apply(e,a);return e},Event:b,setSelectorEngine:S,noConflict:function(){return t[e]=n,this}}})},{}],35:[function(e,t,a){(function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */'use strict';function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function r(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,a){if(!o.TYPED_ARRAY_SUPPORT&&!(this instanceof o))return new o(e,t,a);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return i(this,e,t,a)}function i(e,t,a,n){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?y(e,t,a,n):"string"==typeof t?u(e,t,a):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be a number");else if(0>e)throw new RangeError("\"size\" argument must not be negative")}function d(e,t,a,n){return s(t),0>=t?r(e,t):void 0===a?r(e,t):"string"==typeof n?r(e,t).fill(a,n):r(e,t).fill(a)}function p(e,t){if(s(t),e=r(e,0>t?0:0|b(t)),!o.TYPED_ARRAY_SUPPORT)for(var a=0;a<t;++a)e[a]=0;return e}function u(e,t,a){if(("string"!=typeof a||""===a)&&(a="utf8"),!o.isEncoding(a))throw new TypeError("\"encoding\" must be a valid string encoding");var n=0|v(t,a);e=r(e,n);var i=e.write(t,a);return i!==n&&(e=e.slice(0,i)),e}function c(e,t){var a=0>t.length?0:0|b(t.length);e=r(e,a);for(var n=0;n<a;n+=1)e[n]=255&t[n];return e}function y(e,t,a,n){if(t.byteLength,0>a||t.byteLength<a)throw new RangeError("'offset' is out of bounds");if(t.byteLength<a+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===a&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,a):new Uint8Array(t,a,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=c(e,t),e}function h(e,t){if(o.isBuffer(t)){var a=0|b(t.length);return(e=r(e,a),0===e.length)?e:(t.copy(e,0,0,a),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||q(t.length)?r(e,0):c(e,t);if("Buffer"===t.type&&te(t.data))return c(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var a=e.length;if(0===a)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return X(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0;}}function I(e,t,a){var n=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),0>=a)return"";if(a>>>=0,t>>>=0,a<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,a);case"utf8":case"utf-8":return _(this,t,a);case"ascii":return P(this,t,a);case"latin1":case"binary":return O(this,t,a);case"base64":return x(this,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,a);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0;}}function E(e,t,a){var n=e[t];e[t]=e[a],e[a]=n}function S(e,t,a,n,r){if(0===e.length)return-1;if("string"==typeof a?(n=a,a=0):2147483647<a?a=2147483647:-2147483648>a&&(a=-2147483648),a=+a,isNaN(a)&&(a=r?0:e.length-1),0>a&&(a=e.length+a),a>=e.length){if(r)return-1;a=e.length-1}else if(0>a)if(r)a=0;else return-1;if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:T(e,t,a,n,r);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,a):Uint8Array.prototype.lastIndexOf.call(e,t,a):T(e,[t],a,n,r);throw new TypeError("val must be string, number or Buffer")}function T(e,t,a,n,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,l=e.length,d=t.length;if(void 0!==n&&(n=(n+"").toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(2>e.length||2>t.length)return-1;s=2,l/=2,d/=2,a/=2}var p;if(r){var u=-1;for(p=a;p<l;p++)if(o(e,p)!==o(t,-1===u?0:p-u))-1!==u&&(p-=p-u),u=-1;else if(-1===u&&(u=p),p-u+1===d)return u*s}else for(a+d>l&&(a=l-d),p=a;0<=p;p--){for(var c=!0,f=0;f<d;f++)if(o(e,p+f)!==o(t,f)){c=!1;break}if(c)return p}return-1}function A(e,t,a,n){a=+a||0;var r=e.length-a;n?(n=+n,n>r&&(n=r)):n=r;var o=t.length;if(0!=o%2)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0,l;s<n;++s){if(l=parseInt(t.substr(2*s,2),16),isNaN(l))return s;e[a+s]=l}return s}function L(e,t,a,n){return Q(V(t,e.length-a),e,a,n)}function w(e,t,a,n){return Q(J(t),e,a,n)}function C(e,t,a,n){return w(e,t,a,n)}function R(e,t,a,n){return Q(X(t),e,a,n)}function D(e,t,a,n){return Q(K(t,e.length-a),e,a,n)}function x(e,t,a){return 0===t&&a===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,a))}function _(e,t,a){a=m(e.length,a);for(var n=[],r=t;r<a;){var o=e[r],s=null,l=239<o?4:223<o?3:191<o?2:1;if(r+l<=a){var d,p,u,c;1===l?128>o&&(s=o):2===l?(d=e[r+1],128==(192&d)&&(c=(31&o)<<6|63&d,127<c&&(s=c))):3===l?(d=e[r+1],p=e[r+2],128==(192&d)&&128==(192&p)&&(c=(15&o)<<12|(63&d)<<6|63&p,2047<c&&(55296>c||57343<c)&&(s=c))):4===l?(d=e[r+1],p=e[r+2],u=e[r+3],128==(192&d)&&128==(192&p)&&128==(192&u)&&(c=(15&o)<<18|(63&d)<<12|(63&p)<<6|63&u,65535<c&&1114112>c&&(s=c))):void 0}null===s?(s=65533,l=1):65535<s&&(s-=65536,n.push(55296|1023&s>>>10),s=56320|1023&s),n.push(s),r+=l}return k(n)}function k(e){var t=e.length;if(t<=4096)return g.apply(String,e);for(var a="",n=0;n<t;)a+=g.apply(String,e.slice(n,n+=4096));return a}function P(e,t,a){var n="";a=m(e.length,a);for(var r=t;r<a;++r)n+=g(127&e[r]);return n}function O(e,t,a){var n="";a=m(e.length,a);for(var r=t;r<a;++r)n+=g(e[r]);return n}function M(e,t,a){var n=e.length;(!t||0>t)&&(t=0),(!a||0>a||a>n)&&(a=n);for(var r="",o=t;o<a;++o)r+=H(e[o]);return r}function N(e,t,a){for(var n=e.slice(t,a),r="",o=0;o<n.length;o+=2)r+=g(n[o]+256*n[o+1]);return r}function F(e,t,a){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>a)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,a,n,r,i){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>r||t<i)throw new RangeError("\"value\" argument is out of bounds");if(a+n>e.length)throw new RangeError("Index out of range")}function G(e,t,a,n){0>t&&(t=65535+t+1);for(var r=0,o=m(e.length-a,2);r<o;++r)e[a+r]=(t&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function j(e,t,a,n){0>t&&(t=4294967295+t+1);for(var r=0,o=m(e.length-a,4);r<o;++r)e[a+r]=255&t>>>8*(n?r:3-r)}function U(e,t,a,n){if(a+n>e.length)throw new RangeError("Index out of range");if(0>a)throw new RangeError("Index out of range")}function Z(e,t,a,n,r){return r||U(e,t,a,4,34028234663852886e22,-34028234663852886e22),ee.write(e,t,a,n,23,4),a+4}function Y(e,t,a,n,r){return r||U(e,t,a,8,17976931348623157e292,-17976931348623157e292),ee.write(e,t,a,n,52,8),a+8}function z(e){if(e=W(e).replace(ae,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return 16>e?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var a=e.length,n=null,r=[],o=0,s;o<a;++o){if(s=e.charCodeAt(o),55295<s&&57344>s){if(!n){if(56319<s){-1<(t-=3)&&r.push(239,191,189);continue}else if(o+1===a){-1<(t-=3)&&r.push(239,191,189);continue}n=s;continue}if(56320>s){-1<(t-=3)&&r.push(239,191,189),n=s;continue}s=(n-55296<<10|s-56320)+65536}else n&&-1<(t-=3)&&r.push(239,191,189);if(n=null,128>s){if(0>(t-=1))break;r.push(s)}else if(2048>s){if(0>(t-=2))break;r.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(t-=3))break;r.push(224|s>>12,128|63&s>>6,128|63&s)}else if(1114112>s){if(0>(t-=4))break;r.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}else throw new Error("Invalid code point")}return r}function J(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}function K(e,t){for(var a=[],n=0,r,o,s;n<e.length&&!(0>(t-=2));++n)r=e.charCodeAt(n),o=r>>8,s=r%256,a.push(s),a.push(o);return a}function X(e){return $.toByteArray(z(e))}function Q(e,t,a,n){for(var r=0;r<n&&!(r+a>=t.length||r>=e.length);++r)t[r+a]=e[r];return r}function q(e){return e!==e}var $=e("base64-js"),ee=e("ieee754"),te=e("isarray");a.Buffer=o,a.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},a.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():t.TYPED_ARRAY_SUPPORT,a.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,a){return i(null,e,t,a)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,a){return d(null,e,t,a)},o.allocUnsafe=function(e){return p(null,e)},o.allocUnsafeSlow=function(e){return p(null,e)},o.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var a=e.length,n=t.length,r=0,s=m(a,n);r<s;++r)if(e[r]!==t[r]){a=e[r],n=t[r];break}return a<n?-1:n<a?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(e,t){if(!te(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return o.alloc(0);var a;if(t===void 0)for(t=0,a=0;a<e.length;++a)t+=e[a].length;var n=o.allocUnsafe(t),r=0;for(a=0;a<e.length;++a){var s=e[a];if(!o.isBuffer(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(n,r),r+=s.length}return n},o.byteLength=v,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?_(this,0,e):I.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,a,n,r){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),0>t||a>e.length||0>n||r>this.length)throw new RangeError("out of range index");if(n>=r&&t>=a)return 0;if(n>=r)return-1;if(t>=a)return 1;if(t>>>=0,a>>>=0,n>>>=0,r>>>=0,this===e)return 0;for(var s=r-n,l=a-t,d=m(s,l),p=this.slice(n,r),u=e.slice(t,a),c=0;c<d;++c)if(p[c]!==u[c]){s=p[c],l=u[c];break}return s<l?-1:l<s?1:0},o.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},o.prototype.indexOf=function(e,t,a){return S(this,e,t,a,!0)},o.prototype.lastIndexOf=function(e,t,a){return S(this,e,t,a,!1)},o.prototype.write=function(e,t,a,n){if(void 0===t)n="utf8",a=this.length,t=0;else if(void 0===a&&"string"==typeof t)n=t,a=this.length,t=0;else if(isFinite(t))t|=0,isFinite(a)?(a|=0,void 0===n&&(n="utf8")):(n=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var r=this.length-t;if((void 0===a||a>r)&&(a=r),0<e.length&&(0>a||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,e,t,a);case"utf8":case"utf-8":return L(this,e,t,a);case"ascii":return w(this,e,t,a);case"latin1":case"binary":return C(this,e,t,a);case"base64":return R(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,a);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0;}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};o.prototype.slice=function(e,t){var a=this.length;e=~~e,t=t===undefined?a:~~t,0>e?(e+=a,0>e&&(e=0)):e>a&&(e=a),0>t?(t+=a,0>t&&(t=0)):t>a&&(t=a),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var r=t-e;n=new o(r,void 0);for(var s=0;s<r;++s)n[s]=this[s+e]}return n},o.prototype.readUIntLE=function(e,t,a){e|=0,t|=0,a||F(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return n},o.prototype.readUIntBE=function(e,t,a){e|=0,t|=0,a||F(e,t,this.length);for(var n=this[e+--t],r=1;0<t&&(r*=256);)n+=this[e+--t]*r;return n},o.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,a){e|=0,t|=0,a||F(e,t,this.length);for(var n=this[e],r=1,o=0;++o<t&&(r*=256);)n+=this[e+o]*r;return r*=128,n>=r&&(n-=f(2,8*t)),n},o.prototype.readIntBE=function(e,t,a){e|=0,t|=0,a||F(e,t,this.length);for(var n=t,r=1,o=this[e+--n];0<n&&(r*=256);)o+=this[e+--n]*r;return r*=128,o>=r&&(o-=f(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},o.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},o.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),ee.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),ee.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),ee.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),ee.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,a,n){if(e=+e,t|=0,a|=0,!n){var r=f(2,8*a)-1;B(this,e,t,a,r,0)}var o=1,s=0;for(this[t]=255&e;++s<a&&(o*=256);)this[t+s]=255&e/o;return t+a},o.prototype.writeUIntBE=function(e,t,a,n){if(e=+e,t|=0,a|=0,!n){var r=f(2,8*a)-1;B(this,e,t,a,r,0)}var o=a-1,s=1;for(this[t+o]=255&e;0<=--o&&(s*=256);)this[t+o]=255&e/s;return t+a},o.prototype.writeUInt8=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=l(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):G(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):G(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,a,n){if(e=+e,t|=0,!n){var r=f(2,8*a-1);B(this,e,t,a,r-1,-r)}var o=0,s=1,l=0;for(this[t]=255&e;++o<a&&(s*=256);)0>e&&0===l&&0!==this[t+o-1]&&(l=1),this[t+o]=255&(e/s>>0)-l;return t+a},o.prototype.writeIntBE=function(e,t,a,n){if(e=+e,t|=0,!n){var r=f(2,8*a-1);B(this,e,t,a,r-1,-r)}var o=a-1,s=1,l=0;for(this[t+o]=255&e;0<=--o&&(s*=256);)0>e&&0===l&&0!==this[t+o+1]&&(l=1),this[t+o]=255&(e/s>>0)-l;return t+a},o.prototype.writeInt8=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=l(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):G(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):G(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,a){return e=+e,t|=0,a||B(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,a){return Z(this,e,t,!0,a)},o.prototype.writeFloatBE=function(e,t,a){return Z(this,e,t,!1,a)},o.prototype.writeDoubleLE=function(e,t,a){return Y(this,e,t,!0,a)},o.prototype.writeDoubleBE=function(e,t,a){return Y(this,e,t,!1,a)},o.prototype.copy=function(e,t,a,n){if(a||(a=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<a&&(n=a),n===a)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-a&&(n=e.length-t+a);var r=n-a,s;if(this===e&&a<t&&t<n)for(s=r-1;0<=s;--s)e[s+t]=this[s+a];else if(1e3>r||!o.TYPED_ARRAY_SUPPORT)for(s=0;s<r;++s)e[s+t]=this[s+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+r),t);return r},o.prototype.fill=function(e,t,a,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,a=this.length):"string"==typeof a&&(n=a,a=this.length),1===e.length){var r=e.charCodeAt(0);256>r&&(e=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<a)throw new RangeError("Out of range index");if(a<=t)return this;t>>>=0,a=a===void 0?this.length:a>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<a;++s)this[s]=e;else{var l=o.isBuffer(e)?e:V(new o(e,n).toString()),d=l.length;for(s=0;s<a-t;++s)this[s+t]=l[s%d]}return this};var ae=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"==typeof i?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:i)},{"base64-js":33,ieee754:40,isarray:43}],36:[function(e,t){function a(e,t){for(var a=[],n=0;n<e.length;n++)t(e[n])&&a.push(e[n]);return a}function n(e){return!!e}var r=e("indexof");t.exports=function(e){function t(e){var t=s();-1<r(t,e)||(t.push(e),l(t))}function o(e){var t=s(),a=r(t,e);-1===a||(t.splice(a,1),l(t))}function i(e){return-1<r(s(),e)}function s(){var t=e.className;return a(t.split(" "),n)}function l(t){var a=t.length;e.className=t.join(" "),p.length=a;for(var n=0;n<t.length;n++)p[n]=t[n];delete t[a]}var d=e.classList;if(d)return d;var p={add:t,remove:o,contains:i,toggle:function(e){return i(e)?(o(e),!1):(t(e),!0)},toString:function(){return e.className},length:0,item:function(e){var t=s();return t[e]||null}};return p}},{indexof:41}],37:[function(e,t){t.exports=function(e,t,a,n){if(a=window.getComputedStyle,n=a?a(e):e.currentStyle,n)return n[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]}},{}],38:[function(e,a,n){/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/master/LICENSE
 */(function(e,r){'use strict';"function"==typeof t&&t.amd?t(r):"object"==typeof n?a.exports=r():e.returnExports=r()})(this,function(){var e=String.prototype,t=Array,a=t.prototype,n=Object,r=n.prototype,s=Function,d=s.prototype,u=String,c=u.prototype,g=Number,y=g.prototype,h=a.slice,b=a.splice,v=a.push,I=a.unshift,E=a.concat,S=a.join,T=d.call,A=d.apply,L=p,w=m,C=r.toString,R="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,D=Function.prototype.toString,x=function(e){try{var t=D.call(e),a=t.replace(/\/\/.*\n/g,""),n=a.replace(/\/\*[.\s\S]*\*\//g,""),r=n.replace(/\n/mg," ").replace(/ {2}/g," ");return /^\s*class /.test(r)}catch(t){return!1}},_=function(e){try{return!x(e)&&(D.call(e),!0)}catch(t){return!1}},k=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(R)return _(e);if(x(e))return!1;var t=C.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},P=RegExp.prototype.exec,O=function(e){try{return P.call(e),!0}catch(t){return!1}},k,M;M=function(e){return"object"==typeof e&&(R?O(e):C.call(e)==="[object RegExp]")};var N=e.valueOf,F=function(e){try{return N.call(e),!0}catch(t){return!1}},B;B=function(e){return"string"==typeof e||"object"==typeof e&&(R?F(e):C.call(e)==="[object String]")};var G=n.defineProperty&&function(){try{var e={};for(var t in n.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(t){return!1}}(),j=function(e){var t;return t=G?function(e,t,a,r){!r&&t in e||n.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:a})}:function(e,t,a,n){!n&&t in e||(e[t]=a)},function(a,n,r){for(var o in n)e.call(n,o)&&t(a,o,n[o],r)}}(r.hasOwnProperty),U=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},Z=g.isNaN||function(e){return e!==e},Y={ToInteger:function(e){var t=+e;return Z(t)?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(0<t||-1)*l(o(t))),t},ToPrimitive:function(e){var t,a,n;if(U(e))return e;if(a=e.valueOf,k(a)&&(t=a.call(e),U(t)))return t;if(n=e.toString,k(n)&&(t=n.call(e),U(t)))return t;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return n(e)},ToUint32:function(e){return e>>>0}},z=function(){};j(d,{bind:function(e){var t=this;if(!k(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var a=h.call(arguments,1),r=function(){if(this instanceof p){var r=A.call(t,this,E.call(a,h.call(arguments)));return n(r)===r?r:this}return A.call(t,e,E.call(a,h.call(arguments)))},o=L(0,t.length-a.length),l=[],d=0,p;d<o;d++)v.call(l,"$"+d);return p=s("binder","return function ("+S.call(l,",")+"){ return binder.apply(this, arguments); }")(r),t.prototype&&(z.prototype=t.prototype,p.prototype=new z,z.prototype=null),p}});var W=T.bind(r.hasOwnProperty),H=T.bind(r.toString),V=T.bind(h),J=A.bind(h),K=T.bind(c.slice),X=T.bind(c.split),Q=T.bind(c.indexOf),q=T.bind(v),$=T.bind(r.propertyIsEnumerable),ee=T.bind(a.sort),te=t.isArray||function(e){return"[object Array]"===H(e)},ae=1!==[].unshift(0);j(a,{unshift:function(){return I.apply(this,arguments),this.length}},ae),j(t,{isArray:te});var ne=n("a"),re="a"!==ne[0]||!(0 in ne),oe=function(e){var t=!0,a=!0,n=!1;if(e)try{e.call("foo",function(e,a,n){"object"!=typeof n&&(t=!1)}),e.call([1],function(){'use strict';a="string"==typeof this},"x")}catch(t){n=!0}return!!e&&!n&&t&&a};j(a,{forEach:function(e){var t=Y.ToObject(this),a=re&&B(this)?X(this,""):t,n=-1,r=Y.ToUint32(a.length),o;if(1<arguments.length&&(o=arguments[1]),!k(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++n<r;)n in a&&("undefined"==typeof o?e(a[n],n,t):e.call(o,a[n],n,t))}},!oe(a.forEach)),j(a,{map:function(e){var a=Y.ToObject(this),n=re&&B(this)?X(this,""):a,r=Y.ToUint32(n.length),o=t(r),s;if(1<arguments.length&&(s=arguments[1]),!k(e))throw new TypeError("Array.prototype.map callback must be a function");for(var l=0;l<r;l++)l in n&&(o[l]="undefined"==typeof s?e(n[l],l,a):e.call(s,n[l],l,a));return o}},!oe(a.map)),j(a,{filter:function(e){var t=Y.ToObject(this),a=re&&B(this)?X(this,""):t,n=Y.ToUint32(a.length),r=[],o,s;if(1<arguments.length&&(s=arguments[1]),!k(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var l=0;l<n;l++)l in a&&(o=a[l],("undefined"==typeof s?e(o,l,t):e.call(s,o,l,t))&&q(r,o));return r}},!oe(a.filter)),j(a,{every:function(e){var t=Y.ToObject(this),a=re&&B(this)?X(this,""):t,n=Y.ToUint32(a.length),r;if(1<arguments.length&&(r=arguments[1]),!k(e))throw new TypeError("Array.prototype.every callback must be a function");for(var o=0;o<n;o++)if(o in a&&("undefined"==typeof r?!e(a[o],o,t):!e.call(r,a[o],o,t)))return!1;return!0}},!oe(a.every)),j(a,{some:function(e){var t=Y.ToObject(this),a=re&&B(this)?X(this,""):t,n=Y.ToUint32(a.length),r;if(1<arguments.length&&(r=arguments[1]),!k(e))throw new TypeError("Array.prototype.some callback must be a function");for(var o=0;o<n;o++)if(o in a&&("undefined"==typeof r?e(a[o],o,t):e.call(r,a[o],o,t)))return!0;return!1}},!oe(a.some));var ie=!1;a.reduce&&(ie="object"==typeof a.reduce.call("es5",function(e,t,a,n){return n})),j(a,{reduce:function(e){var t=Y.ToObject(this),a=re&&B(this)?X(this,""):t,n=Y.ToUint32(a.length);if(!k(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===n&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var r=0,o;if(2<=arguments.length)o=arguments[1];else do{if(r in a){o=a[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;r<n;r++)r in a&&(o=e(o,a[r],r,t));return o}},!ie);var se=!1;a.reduceRight&&(se="object"==typeof a.reduceRight.call("es5",function(e,t,a,n){return n})),j(a,{reduceRight:function(e){var t=Y.ToObject(this),a=re&&B(this)?X(this,""):t,n=Y.ToUint32(a.length);if(!k(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===n&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r=n-1,o;if(2<=arguments.length)o=arguments[1];else do{if(r in a){o=a[r--];break}if(0>--r)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);if(0>r)return o;do r in a&&(o=e(o,a[r],r,t));while(r--);return o}},!se);var le=a.indexOf&&-1!==[0,1].indexOf(1,2);j(a,{indexOf:function(e){var t=re&&B(this)?X(this,""):Y.ToObject(this),a=Y.ToUint32(t.length);if(0===a)return-1;var n=0;for(1<arguments.length&&(n=Y.ToInteger(arguments[1])),n=0<=n?n:L(0,a+n);n<a;n++)if(n in t&&t[n]===e)return n;return-1}},le);var de=a.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);j(a,{lastIndexOf:function(e){var t=re&&B(this)?X(this,""):Y.ToObject(this),a=Y.ToUint32(t.length);if(0===a)return-1;var n=a-1;for(1<arguments.length&&(n=w(n,Y.ToInteger(arguments[1]))),n=0<=n?n:a-o(n);0<=n;n--)if(n in t&&e===t[n])return n;return-1}},de);var pe=function(){var e=[1,2],t=e.splice();return 2===e.length&&te(t)&&0===t.length}();j(a,{splice:function(){return 0===arguments.length?[]:b.apply(this,arguments)}},!pe);var ue=function(){var e={};return a.splice.call(e,0,0,1),1===e.length}();j(a,{splice:function(e,t){if(0===arguments.length)return[];var a=arguments;return this.length=L(Y.ToInteger(this.length),0),0<arguments.length&&"number"!=typeof t&&(a=V(arguments),2>a.length?q(a,this.length-e):a[1]=Y.ToInteger(t)),b.apply(this,a)}},!ue);var ce=function(){var e=new t(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),fe=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();j(a,{splice:function(e,t){for(var a=Y.ToObject(this),n=[],r=Y.ToUint32(a.length),o=Y.ToInteger(e),s=0>o?L(r+o,0):w(o,r),l=w(L(Y.ToInteger(t),0),r-s),d=0,p;d<l;)p=u(s+d),W(a,p)&&(n[d]=a[p]),d+=1;var c=V(arguments,2),f=c.length,g;if(f<l){d=s;for(;d<r-l;)p=u(d+l),g=u(d+f),W(a,p)?a[g]=a[p]:delete a[g],d+=1;d=r;for(;d>r-l+f;)delete a[d-1],d-=1}else if(f>l)for(d=r-l;d>s;)p=u(d+l-1),g=u(d+f-1),W(a,p)?a[g]=a[p]:delete a[g],d-=1;d=s;for(var m=0;m<c.length;++m)a[d]=c[m],d+=1;return a.length=r-l+f,n}},!ce||!fe);var ge=a.join,me;try{me="1,2,3"!==Array.prototype.join.call("123",",")}catch(t){me=!0}me&&j(a,{join:function(e){var t="undefined"==typeof e?",":e;return ge.call(B(this)?X(this,""):this,t)}},me);var ye="1,2"!==[1,2].join(void 0);ye&&j(a,{join:function(e){var t="undefined"==typeof e?",":e;return ge.call(this,t)}},ye);var he=function(){for(var e=Y.ToObject(this),t=Y.ToUint32(e.length),a=0;a<arguments.length;)e[t+a]=arguments[a],a+=1;return e.length=t+a,t+a},be=function(){var e={},t=Array.prototype.push.call(e,void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!W(e,0)}();j(a,{push:function(){return te(this)?v.apply(this,arguments):he.apply(this,arguments)}},be);var ve=function(){var e=[],t=e.push(void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!W(e,0)}();j(a,{push:he},ve),j(a,{slice:function(){var e=B(this)?X(this,""):this;return J(e,arguments)}},re);var Ie=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(t){}return!1}(),Ee=function(){try{return[1,2].sort(/a/),!1}catch(t){}return!0}(),Se=function(){try{return[1,2].sort(void 0),!0}catch(t){}return!1}();j(a,{sort:function(e){if("undefined"==typeof e)return ee(this);if(!k(e))throw new TypeError("Array.prototype.sort callback must be a function");return ee(this,e)}},Ie||!Se||!Ee);var Te=!$({toString:null},"toString"),Ae=$(function(){},"prototype"),Le=!W("x","0"),we=function(e){var t=e.constructor;return t&&t.prototype===e},Ce={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},Re=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!Ce["$"+e]&&W(window,e)&&null!==window[e]&&"object"==typeof window[e]&&we(window[e])}catch(t){return!0}return!1}(),De=function(e){if("undefined"==typeof window||!Re)return we(e);try{return we(e)}catch(t){return!1}},xe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_e=xe.length,ke=function(e){return"[object Arguments]"===H(e)},Pe=function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&!te(e)&&k(e.callee)},Oe=ke(arguments)?ke:Pe;j(n,{keys:function(e){var t=k(e),a=Oe(e),n=null!==e&&"object"==typeof e,r=n&&B(e);if(!n&&!t&&!a)throw new TypeError("Object.keys called on a non-object");var o=[];if(r&&Le||a)for(var s=0;s<e.length;++s)q(o,u(s));if(!a)for(var l in e)!(Ae&&t&&"prototype"===l)&&W(e,l)&&q(o,u(l));if(Te)for(var d=De(e),p=0,c;p<_e;p++)c=xe[p],!(d&&"constructor"===c)&&W(e,c)&&q(o,c);return o}});var Me=n.keys&&function(){return 2===n.keys(arguments).length}(1,2),Ne=n.keys&&function(){var e=n.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Fe=n.keys;j(n,{keys:function(e){return Oe(e)?Fe(V(e)):Fe(e)}},!Me||Ne);var Be=0!==new Date(-3509827329600292).getUTCMonth(),Ge=new Date(-1509842289600292),je=new Date(14496624e5),Ue="Mon, 01 Jan -45875 11:59:59 GMT"!==Ge.toUTCString(),Ze=Ge.getTimezoneOffset(),Ye,ze;-720>Ze?(Ye="Tue Jan 02 -45875"!==Ge.toDateString(),ze=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(je.toString())):(Ye="Mon Jan 01 -45875"!==Ge.toDateString(),ze=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(je.toString()));var We=T.bind(Date.prototype.getFullYear),He=T.bind(Date.prototype.getMonth),Ve=T.bind(Date.prototype.getDate),Je=T.bind(Date.prototype.getUTCFullYear),Ke=T.bind(Date.prototype.getUTCMonth),Xe=T.bind(Date.prototype.getUTCDate),Qe=T.bind(Date.prototype.getUTCDay),qe=T.bind(Date.prototype.getUTCHours),$e=T.bind(Date.prototype.getUTCMinutes),et=T.bind(Date.prototype.getUTCSeconds),tt=T.bind(Date.prototype.getUTCMilliseconds),at=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],rt=function(e,t){return Ve(new Date(t,e,0))};j(Date.prototype,{getFullYear:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this);return 0>e&&11<He(this)?e+1:e},getMonth:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this),t=He(this);return 0>e&&11<t?0:t},getDate:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this),t=He(this),a=Ve(this);if(0>e&&11<t){if(12===t)return a;var n=rt(0,e+1);return n-a+1}return a},getUTCFullYear:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this);return 0>e&&11<Ke(this)?e+1:e},getUTCMonth:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this),t=Ke(this);return 0>e&&11<t?0:t},getUTCDate:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this),t=Ke(this),a=Xe(this);if(0>e&&11<t){if(12===t)return a;var n=rt(0,e+1);return n-a+1}return a}},Be),j(Date.prototype,{toUTCString:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=Qe(this),t=Xe(this),a=Ke(this),n=Je(this),r=qe(this),o=$e(this),i=et(this);return at[e]+", "+(10>t?"0"+t:t)+" "+nt[a]+" "+n+" "+(10>r?"0"+r:r)+":"+(10>o?"0"+o:o)+":"+(10>i?"0"+i:i)+" GMT"}},Be||Ue),j(Date.prototype,{toDateString:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),a=this.getMonth(),n=this.getFullYear();return at[e]+" "+nt[a]+" "+(10>t?"0"+t:t)+" "+n}},Be||Ye),(Be||ze)&&(Date.prototype.toString=function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),a=this.getMonth(),n=this.getFullYear(),r=this.getHours(),i=this.getMinutes(),s=this.getSeconds(),d=this.getTimezoneOffset(),p=l(o(d)/60),u=l(o(d)%60);return at[e]+" "+nt[a]+" "+(10>t?"0"+t:t)+" "+n+" "+(10>r?"0"+r:r)+":"+(10>i?"0"+i:i)+":"+(10>s?"0"+s:s)+" GMT"+(0<d?"-":"+")+(10>p?"0"+p:p)+(10>u?"0"+u:u)},G&&n.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var ot="-000001",it=Date.prototype.toISOString&&-1===new Date(-62198755200000).toISOString().indexOf(ot),st=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),lt=T.bind(Date.prototype.getTime);j(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(lt(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Je(this),t=Ke(this);e+=l(t/12),t=(t%12+12)%12;var a=[t+1,Xe(this),qe(this),$e(this),et(this)];e=(0>e?"-":9999<e?"+":"")+K("00000"+o(e),0<=e&&9999>=e?-4:-6);for(var n=0;n<a.length;++n)a[n]=K("00"+a[n],-2);return e+"-"+V(a,0,2).join("-")+"T"+V(a,2).join(":")+"."+K("000"+tt(this),-3)+"Z"}},it||st);var dt=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-62198755200000).toJSON().indexOf(ot)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(t){return!1}}();dt||(Date.prototype.toJSON=function(){var e=n(this),t=Y.ToPrimitive(e);if("number"==typeof t&&!isFinite(t))return null;var a=e.toISOString;if(!k(a))throw new TypeError("toISOString property is not callable");return a.call(e)});var pt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ut=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ct=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(ct||ut||!pt){var ft=f(2,31)-1,gt=Z(new Date(1970,0,1,0,0,0,2147483648).getTime());Date=function(e){var t=function(a,n,r,o,i,d,s){var p=arguments.length,c;if(this instanceof e){var f=d,g=s;if(gt&&7<=p&&2147483647<s){var m=2147483647*l(s/2147483647),y=l(m/1e3);f+=y,g-=1e3*y}c=1===p&&u(a)===a?new e(t.parse(a)):7<=p?new e(a,n,r,o,i,f,g):6<=p?new e(a,n,r,o,i,f):5<=p?new e(a,n,r,o,i):4<=p?new e(a,n,r,o):3<=p?new e(a,n,r):2<=p?new e(a,n):1<=p?new e(a instanceof e?+a:a):new e}else c=e.apply(this,arguments);return U(c)||j(c,{constructor:t},!0),c},a=[0,31,59,90,120,151,181,212,243,273,304,334,365],n=function(e,n){var r=1<n?1:0;return a[n]+l((e-1969+r)/4)-l((e-1901+r)/100)+l((e-1601+r)/400)+365*(e-1970)},r=function(a){var t=0,n=a;if(gt&&2147483647<n){var r=2147483647*l(n/2147483647),o=l(r/1e3);t+=o,n-=1e3*o}return g(new e(1970,0,1,0,0,t,n))};for(var o in e)W(e,o)&&(t[o]=e[o]);j(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,j(t.prototype,{constructor:t},!0);return j(t,{parse:function(t){var a=/^(\d{4}|[+-]\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2})(?::(\d{2})(?:(\.\d{1,}))?)?(Z|(?:([-+])(\d{2}):(\d{2})))?)?)?)?$/.exec(t);if(a){var o=g(a[1]),i=g(a[2]||1)-1,s=g(a[3]||1)-1,d=g(a[4]||0),p=g(a[5]||0),u=g(a[6]||0),c=l(1e3*g(a[7]||0)),f=a[4]&&!a[8],m="-"===a[9]?1:-1,y=g(a[10]||0),h=g(a[11]||0),b;return d<(0<p||0<u||0<c?24:25)&&60>p&&60>u&&1e3>c&&-1<i&&12>i&&24>y&&60>h&&-1<s&&s<n(o,i+1)-n(o,i)&&(b=60*(24*(n(o,i)+s)+d+y*m),b=1e3*(60*(b+p+h*m)+u)+c,f&&(b=r(b)),-864e13<=b&&864e13>=b)?b:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return new Date().getTime()});var mt=y.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==1000000000000000100 .toFixed(0)),yt={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var a=-1,n=t;++a<yt.size;)n+=e*yt.data[a],yt.data[a]=n%yt.base,n=l(n/yt.base)},divide:function(e){for(var t=yt.size,a=0;0<=--t;)a+=yt.data[t],yt.data[t]=l(a/e),a=a%e*yt.base},numToString:function(){for(var e=yt.size,a="";0<=--e;)if(""!==a||0===e||0!==yt.data[e]){var n=u(yt.data[e]);""===a?a=n:a+=K("0000000",0,7-n.length)+n}return a},pow:function e(t,a,n){return 0===a?n:1==a%2?e(t,a-1,n*t):e(t*t,a/2,n)},log:function(e){for(var t=0,a=e;4096<=a;)t+=12,a/=4096;for(;2<=a;)t+=1,a/=2;return t}};j(y,{toFixed:function(t){var a,n,r,o,i,d,p,c;if(a=g(t),a=Z(a)?0:l(a),0>a||20<a)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=g(this),Z(n))return"NaN";if(-1e21>=n||1e21<=n)return u(n);if(r="",0>n&&(r="-",n=-n),o="0",1e-21<n)if(i=yt.log(n*yt.pow(2,69,1))-69,d=0>i?n*yt.pow(2,-i,1):n/yt.pow(2,i,1),d*=4503599627370496,i=52-i,0<i){for(yt.multiply(0,d),p=a;7<=p;)yt.multiply(1e7,0),p-=7;for(yt.multiply(yt.pow(10,p,1),0),p=i-1;23<=p;)yt.divide(8388608),p-=23;yt.divide(1<<p),yt.multiply(1,1),yt.divide(2),o=yt.numToString()}else yt.multiply(0,d),yt.multiply(1<<-i,0),o=yt.numToString()+K("0.00000000000000000000",2,2+a);return 0<a?(c=o.length,o=c<=a?r+K("0.0000000000000000000",0,a-c+2)+o:r+K(o,0,c-a)+"."+K(o,c-a)):o=r+o,o}},mt);var ht=function(){try{return"1"===1 .toPrecision(void 0)}catch(t){return!0}}(),bt=y.toPrecision;j(y,{toPrecision:function(e){return"undefined"==typeof e?bt.call(this):bt.call(this,e)}},ht),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||1<".".split(/()()/).length?function(){var e="undefined"==typeof /()??/.exec("")[1],t=f(2,32)-1;c.split=function(a,n){var r=this+"";if("undefined"==typeof a&&0===n)return[];if(!M(a))return X(this,a,n);var o=[],i=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(a.sticky?"y":""),s=0,l=new RegExp(a.source,i+"g"),d,p,u,c;e||(d=new RegExp("^"+l.source+"$(?!\\s)",i));var f="undefined"==typeof n?t:Y.ToUint32(n);for(p=l.exec(r);p&&(u=p.index+p[0].length,!(u>s&&(q(o,K(r,s,p.index)),!e&&1<p.length&&p[0].replace(d,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(p[e]=void 0)}),1<p.length&&p.index<r.length&&v.apply(o,V(p,1)),c=p[0].length,s=u,o.length>=f)));)l.lastIndex===p.index&&l.lastIndex++,p=l.exec(r);return s===r.length?(c||!l.test(""))&&q(o,""):q(o,K(r,s)),o.length>f?V(o,0,f):o}}():c.split=function(e,t){return"undefined"==typeof e&&0===t?[]:X(this,e,t)};var vt=c.replace,It=function(){var e=[];return"x".replace(/x(.)?/g,function(t,a){q(e,a)}),1===e.length&&"undefined"==typeof e[0]}();It||(c.replace=function(e,t){var a=k(t),n=M(e)&&/\)[*?]/.test(e.source);if(!a||!n)return vt.call(this,e,t);return vt.call(this,e,function(a){var n=arguments.length,r=e.lastIndex;e.lastIndex=0;var o=e.exec(a)||[];return e.lastIndex=r,q(o,arguments[n-2],arguments[n-1]),t.apply(this,o)})});var Et=c.substr,St="".substr&&"b"!=="0b".substr(-1);j(c,{substr:function(e,t){var a=e;return 0>e&&(a=L(this.length+e,0)),Et.call(this,a,t)}},St);var Tt="[\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]",At=new RegExp("^"+Tt+Tt+"*"),Lt=new RegExp(Tt+Tt+"*$"),wt=c.trim&&"\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF".trim();j(c,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return u(this).replace(At,"").replace(Lt,"")}},wt);var Ct=T.bind(e.trim),Rt=c.lastIndexOf&&-1!=="abc\u3042\u3044".lastIndexOf("\u3042\u3044",2);j(c,{lastIndexOf:function(e){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=u(this),a=u(e),n=1<arguments.length?g(arguments[1]):NaN,r=Z(n)?1/0:Y.ToInteger(n),o=w(L(r,0),t.length),i=a.length,s=o+i;0<s;){s=L(0,s-i);var l=Q(K(t,s,o+i),a);if(-1!==l)return s+l}return-1}},Rt);var Dt=c.lastIndexOf;if(j(c,{lastIndexOf:function(){return Dt.apply(this,arguments)}},1!==c.lastIndexOf.length),(8!==parseInt("\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF08")||22!==parseInt("\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF0x16"))&&(parseInt=function(e){return function(t,a){var n=Ct(t+""),r=g(a)||(/^[\-+]?0[xX]/.test(n)?16:10);return e(n,r)}}(parseInt)),1/parseFloat("-0")!=-Infinity&&(parseFloat=function(e){return function(t){var a=Ct(t+""),n=e(a);return 0===n&&"-"===K(a,0,1)?-0:n}}(parseFloat)),"RangeError: test"!==new RangeError("test")+""){var xt=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;"undefined"==typeof e?e="Error":"string"!=typeof e&&(e=u(e));var t=this.message;return"undefined"==typeof t?t="":"string"!=typeof t&&(t=u(t)),e?t?e+": "+t:e:t};Error.prototype.toString=xt}if(G){var _t=function(e,t){if($(e,t)){var a=Object.getOwnPropertyDescriptor(e,t);a.configurable&&(a.enumerable=!1,Object.defineProperty(e,t,a))}};_t(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),_t(Error.prototype,"name")}if("/a/gim"!==/a/mig+""){var kt=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=kt}})},{}],39:[function(e,t){var a=[],n=a.forEach,r=a.slice;t.exports=function(e){return n.call(r.call(arguments,1),function(t){if(t)for(var a in t)e[a]=t[a]}),e}},{}],40:[function(e,t,a){a.read=function(t,a,n,r,o){var l=8*o-r-1,p=(1<<l)-1,u=p>>1,c=-7,g=n?o-1:0,y=n?-1:1,d=t[a+g],h,b;for(g+=y,h=d&(1<<-c)-1,d>>=-c,c+=l;0<c;h=256*h+t[a+g],g+=y,c-=8);for(b=h&(1<<-c)-1,h>>=-c,c+=r;0<c;b=256*b+t[a+g],g+=y,c-=8);if(0===h)h=1-u;else{if(h===p)return b?NaN:(d?-1:1)*(1/0);b+=f(2,r),h-=u}return(d?-1:1)*b*f(2,h-r)},a.write=function(t,a,p,u,g,y){var h=8*y-g-1,b=(1<<h)-1,v=b>>1,I=23===g?f(2,-24)-f(2,-77):0,E=u?0:y-1,S=u?1:-1,d=0>a||0===a&&0>1/a?1:0,s,T,A;for(a=o(a),isNaN(a)||a===1/0?(T=isNaN(a)?1:0,s=b):(s=l(r(a)/n),1>a*(A=f(2,-s))&&(s--,A*=2),a+=1<=s+v?I/A:I*f(2,1-v),2<=a*A&&(s++,A/=2),s+v>=b?(T=0,s=b):1<=s+v?(T=(a*A-1)*f(2,g),s+=v):(T=a*f(2,v-1)*f(2,g),s=0));8<=g;t[p+E]=255&T,E+=S,T/=256,g-=8);for(s=s<<g|T,h+=g;0<h;t[p+E]=255&s,E+=S,s/=256,h-=8);t[p+E-S]|=128*d}},{}],41:[function(e,t){var a=[].indexOf;t.exports=function(e,t){if(a)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],42:[function(e,t){t.exports=function(e){var t=a.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var a=Object.prototype.toString},{}],43:[function(e,t){var a={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},{}],44:[function(e,a,n){(function(e){/*! https://mths.be/punycode v1.4.1 by @mathias */(function(r){function o(e){throw new RangeError(E[e])}function i(e,t){for(var a=e.length,n=[];a--;)n[a]=t(e[a]);return n}function s(e,t){var a=e.split("@"),n="";1<a.length&&(n=a[0]+"@",e=a[1]),e=e.replace(I,".");var r=e.split("."),o=i(r,t).join(".");return n+o}function d(e){for(var t=[],a=0,n=e.length,r,o;a<n;)r=e.charCodeAt(a++),55296<=r&&56319>=r&&a<n?(o=e.charCodeAt(a++),56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),a--)):t.push(r);return t}function p(e){return i(e,function(e){var t="";return 65535<e&&(e-=65536,t+=T(55296|1023&e>>>10),e=56320|1023&e),t+=T(e),t}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:36}function c(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function f(e,t,a){var n=0;for(e=a?S(e/700):e>>1,e+=S(e/t);455<e;n+=36)e=S(e/35);return S(n+36*e/(e+38))}function m(e){var a=[],r=e.length,s=0,l=128,d=72,c,g,m,y,h,b,v,I,E,T;for(g=e.lastIndexOf("-"),0>g&&(g=0),m=0;m<g;++m)128<=e.charCodeAt(m)&&o("not-basic"),a.push(e.charCodeAt(m));for(y=0<g?g+1:0;y<r;){for(h=s,b=1,v=36;;v+=36){if(y>=r&&o("invalid-input"),I=u(e.charCodeAt(y++)),(36<=I||I>S((2147483647-s)/b))&&o("overflow"),s+=I*b,E=v<=d?1:v>=d+26?26:v-d,I<E)break;T=36-E,b>S(2147483647/T)&&o("overflow"),b*=T}c=a.length+1,d=f(s-h,c,0==h),S(s/c)>2147483647-l&&o("overflow"),l+=S(s/c),s%=c,a.splice(s++,0,l)}return p(a)}function y(e){var a=[],r,i,s,l,p,u,g,y,h,b,v,I,E,A,L;for(e=d(e),I=e.length,r=128,i=0,p=72,u=0;u<I;++u)v=e[u],128>v&&a.push(T(v));for(s=l=a.length,l&&a.push("-");s<I;){for(g=2147483647,u=0;u<I;++u)v=e[u],v>=r&&v<g&&(g=v);for(E=s+1,g-r>S((2147483647-i)/E)&&o("overflow"),i+=(g-r)*E,r=g,u=0;u<I;++u)if(v=e[u],v<r&&2147483647<++i&&o("overflow"),v==r){for(y=i,h=36;;h+=36){if(b=h<=p?1:h>=p+26?26:h-p,y<b)break;L=y-b,A=36-b,a.push(T(c(b+L%A,0))),y=S(L/A)}a.push(T(c(y,0))),p=f(i,E,s==l),i=0,++s}++i,++r}return a.join("")}var h="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof a&&a&&!a.nodeType&&a,v="object"==typeof e&&e;(v.global===v||v.window===v||v.self===v)&&(r=v);var I=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=l,T=g,A,L;if(A={version:"1.4.1",ucs2:{decode:d,encode:p},decode:m,encode:y,toASCII:function(e){return s(e,function(e){return /[^\x20-\x7E]/.test(e)?"xn--"+y(e):e})},toUnicode:function(e){return s(e,function(e){return /^xn--/.test(e)?m(e.slice(4).toLowerCase()):e})}},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return A});else if(!(h&&b))r.punycode=A;else if(a.exports==h)b.exports=A;else for(L in A)A.hasOwnProperty(L)&&(h[L]=A[L])})(this)}).call(this,"undefined"==typeof i?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:i)},{}],45:[function(e,a){/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */(function(e,n){"undefined"!=typeof a&&a.exports?a.exports=n():"function"==typeof t&&t.amd?t(n):this[e]=n()})("$script",function(){function e(e,t){for(var a=0,n=e.length;a<n;++a)if(!t(e[a]))return!1;return 1}function t(t,a){e(t,function(e){return!a(e)})}function a(r,o,p){function c(e){return e.call?e():i[e]}function f(){if(! --h)for(var a in i[y]=1,m&&m(),l)e(a.split("|"),c)&&!t(l[a],c)&&(l[a]=[])}r=r.push?r:[r];var g=o&&o.call,m=g?o:p,y=g?r.join(""):o,h=r.length;return setTimeout(function(){t(r,function e(t,a){return null===t?f():(a||/^https?:\/\//.test(t)||!u||(t=-1===t.indexOf(".js")?u+t+".js":u+t),d[t]?(y&&(s[y]=1),2==d[t]?f():setTimeout(function(){e(t,!0)},0)):void(d[t]=1,y&&(s[y]=1),n(t,f)))})},0),a}function n(e,t){var a=r.createElement("script"),n;a.onload=a.onerror=a.onreadystatechange=function(){a.readyState&&!/^c|loade/.test(a.readyState)||n||(a.onload=a.onreadystatechange=null,n=1,d[e]=2,t())},a.async=1,a.src=c?e+(-1===e.indexOf("?")?"?":"&")+c:e,o.insertBefore(a,o.lastChild)}var r=document,o=r.getElementsByTagName("head")[0],i={},s={},l={},d={},u,c;return a.get=n,a.order=function(e,t,n){(function r(o){o=e.shift(),e.length?a(o,r):a(o,t,n)})()},a.path=function(e){u=e},a.urlArgs=function(e){c=e},a.ready=function(n,r,o){n=n.push?n:[n];var s=[];return!t(n,function(e){i[e]||s.push(e)})&&e(n,function(e){return i[e]})?r():!function(e){l[e]=l[e]||[],l[e].push(r),o&&o(s)}(n.join("|")),a},a.done=function(e){a([null],e)},a})},{}]},{},[32])(32)})}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e("buffer").Buffer)},{buffer:3}],6:[function(e,t,a){var n=Math.log,r=Math.abs,o=Math.floor,s=Math.ceil,l=Math.max,d=Math.round,p=Math.pow,u=String.fromCharCode,f=Math.min;(function(e,n){"object"==typeof a&&"object"==typeof t?t.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof a?a.Hls=n():e.Hls=n()})(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=7)}([function(e,t,a){"use strict";function n(){}function r(e,t){return t="["+e+"] > "+t,t}function o(e){var t=self.console[e];return t?function(){for(var a=arguments.length,n=Array(a),o=0;o<a;o++)n[o]=arguments[o];n[0]&&(n[0]=r(e,n[0])),t.apply(self.console,n)}:n}function i(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];a.forEach(function(t){d[t]=e[t]?e[t].bind(e):o(t)})}a.d(t,"a",function(){return p}),a.d(t,"b",function(){return u});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={trace:n,debug:n,log:n,warn:n,info:n,error:n},d=l,p=function(e){if(!0===e||"object"===("undefined"==typeof e?"undefined":s(e))){i(e,"debug","log","info","warn","error");try{d.log()}catch(t){d=l}}else d=l},u=d},function(e,t){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var n={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(){a(this,e)}return e.isHeader=function(e,t){return!!(t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9])},e.isFooter=function(e,t){return!!(t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9])},e.getID3Data=function(t,a){for(var n=a,r=0;e.isHeader(t,a);){r+=10;var o=e._readSize(t,a+6);r+=o,e.isFooter(t,a+10)&&(r+=10),a+=r}return 0<r?t.subarray(n,n+r):void 0},e._readSize=function(e,t){var a=0;return a=(127&e[t])<<21,a|=(127&e[t+1])<<14,a|=(127&e[t+2])<<7,a|=127&e[t+3],a},e.getTimeStamp=function(t){for(var a=e.getID3Frames(t),n=0,r;n<a.length;n++)if(r=a[n],e.isTimeStampFrame(r))return e._readTimeStamp(r)},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var a=u(t[0],t[1],t[2],t[3]),n=e._readSize(t,4),r=10;return{type:a,size:n,data:t.subarray(r,r+n)}},e.getID3Frames=function(t){for(var a=0,n=[],r;e.isHeader(t,a);){r=e._readSize(t,a+6),a+=10;for(var o=a+r;a+8<o;){var i=e._getFrameData(t.subarray(a)),s=e._decodeFrame(i);s&&n.push(s),a+=i.size+10}e.isFooter(t,a)&&(a+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),a=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,a&&(n+=47721858.84),d(n)}},e._decodePrivFrame=function(t){if(!(2>t.size)){var a=e._utf8ArrayToStr(t.data),n=new Uint8Array(t.data.subarray(a.length+1));return{key:t.type,info:a,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(2>t.size)){if("TXXX"===t.type){var a=1,n=e._utf8ArrayToStr(t.data.subarray(a));a+=n.length+1;var r=e._utf8ArrayToStr(t.data.subarray(a));return{key:t.type,info:n,data:r}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(2>t.size)return;var a=1,n=e._utf8ArrayToStr(t.data.subarray(a));a+=n.length+1;var r=e._utf8ArrayToStr(t.data.subarray(a));return{key:t.type,info:n,data:r}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e){for(var t=void 0,a=void 0,n="",r=0,o=e.length,s;r<o;)switch(s=e[r++],s>>4){case 0:return n;case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=u(s);break;case 12:case 13:t=e[r++],n+=u((31&s)<<6|63&t);break;case 14:t=e[r++],a=e[r++],n+=u((15&s)<<12|(63&t)<<6|(63&a)<<0);}return n},e}();t.a=n},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function a(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,n,r,l,d,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var u=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw u.context=t,u}if(n=this._events[e],s(n))return!1;if(a(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),n.apply(this,l);}else if(o(n))for(l=Array.prototype.slice.call(arguments,1),p=n.slice(),r=p.length,d=0;d<r;d++)p[d].apply(this,l);return!0},t.prototype.addListener=function(e,n){var r;if(!a(n))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,a(n.listener)?n.listener:n),this._events[e]?o(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,o(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,r&&0<r&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!a(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},t.prototype.removeListener=function(e,t){var n,r,s,l;if(!a(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||a(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(l=s;0<l--;)if(n[l]===t||n[l].listener&&n[l].listener===t){r=l;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],a(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?a(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(a(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){(function(t){var a={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),t=t.trim(),!t){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var i=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");if(!i.netLoc&&i.path&&"/"!==i.path[0]){var s=/^([^\/;?#]*)(.*)$/.exec(i.path);i.netLoc=s[1],i.path=s[2]}i.netLoc&&!i.path&&(i.path="/");var l={scheme:i.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=i.netLoc,"/"!==o.path[0]))if(!o.path)l.path=i.path,o.params||(l.params=i.params,!o.query&&(l.query=i.query));else{var d=i.path,p=d.substring(0,d.lastIndexOf("/")+1)+o.path;l.path=a.normalizePath(p)}return null===l.path&&(l.path=n.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(l)},parseURL:function(e){var t=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(/(?:\/|^)\.(?=\/)/g,"");e.length!==(e=e.replace(/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a})(this)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,a,n){var r=navigator.userAgent.toLowerCase(),o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i,s,l,d,p;return(i=((192&t[a+2])>>>6)+1,s=(60&t[a+2])>>>2,s>o.length-1)?void e.trigger(Event.ERROR,{type:F.b.MEDIA_ERROR,details:F.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(d=(1&t[a+2])<<2,d|=(192&t[a+3])>>>6,U.b.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+s+"["+o[s]+"Hz],channelConfig:"+d),/firefox/i.test(r)?6<=s?(i=5,p=[,,,,],l=s-3):(i=2,p=[,,],l=s):-1===r.indexOf("android")?(i=5,p=[,,,,],n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=s?l=s-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=s&&1===d||/vivaldi/i.test(r))||!n&&1===d)&&(i=2,p=[,,]),l=s)):(i=2,p=[,,],l=s),p[0]=i<<3,p[0]|=(14&s)>>1,p[1]|=(1&s)<<7,p[1]|=d<<3,5===i&&(p[1]|=(14&l)>>1,p[2]=(1&l)<<7,p[2]|=8,p[3]=0),{config:p,samplerate:o[s],channelCount:d,codec:"mp4a.40."+i,manifestCodec:n})}function y(e,t){return 255===e[t]&&240==(246&e[t+1])}function h(e,t){return!(1&e[t+1])?9:7}function b(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function v(e,t){return!!(t+1<e.length&&y(e,t))}function I(e,t){if(t+1<e.length&&y(e,t)){var a=h(e,t),n=a;t+5<e.length&&(n=b(e,t));var r=t+n;if(r===e.length||r+1<e.length&&y(e,r))return!0}return!1}function E(e,t,a,n,r){if(!e.samplerate){var o=m(t,a,n,r);e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,U.b.log("parsed codec:"+e.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)}}function S(e){return 92160000/e}function T(e,t,a,n,r){var o=e.length,i,s,l;return i=h(e,t),s=b(e,t),s-=i,0<s&&t+i+s<=o?(l=a+n*r,{headerLength:i,frameLength:s,stamp:l}):void 0}function A(e,t,a,n,r){var o=S(e.samplerate),i=T(t,a,n,r,o);if(i){var s=i.stamp,l=i.headerLength,d=i.frameLength,p={unit:t.subarray(a+l,a+l+d),pts:s,dts:s};return e.samples.push(p),e.len+=d,{sample:p,length:d+l}}}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var N=a(1),F=a(2),B=function(){function e(t,a){n(this,e),this.subtle=t,this.aesIV=a}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),G=function(){function e(t,a){i(this,e),this.subtle=t,this.key=a}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),j=function(){function e(){c(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),a=new Uint32Array(4),n=0;4>n;n++)a[n]=t.getUint32(4*n);return a},e.prototype.initTable=function(){var e=this.sBox,a=this.invSBox,n=this.subMix,r=n[0],o=n[1],s=n[2],l=n[3],p=this.invSubMix,u=p[0],c=p[1],f=p[2],g=p[3],m=new Uint32Array(256),d=0,y=0,h=0;for(h=0;256>h;h++)m[h]=128>h?h<<1:283^h<<1;for(h=0;256>h;h++){var b=y^y<<1^y<<2^y<<3^y<<4;b=99^(b>>>8^255&b),e[d]=b,a[b]=d;var v=m[d],I=m[v],E=m[I],S=257*m[b]^16843008*b;r[d]=S<<24|S>>>8,o[d]=S<<16|S>>>16,s[d]=S<<8|S>>>24,l[d]=S,S=16843009*E^65537*I^257*v^16843008*d,u[b]=S<<24|S>>>8,c[b]=S<<16|S>>>16,f[b]=S<<8|S>>>24,g[b]=S,d?(d=v^m[m[m[E^v]]],y^=m[m[y]]):d=y=1}},e.prototype.expandKey=function(e){for(var a=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<a.length&&n;)n=a[r]===this.key[r],r++;if(!n){this.key=a;var o=this.keySize=a.length;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size="+o);var i=this.ksRows=4*(o+6+1),s=void 0,l=void 0,d=this.keySchedule=new Uint32Array(i),p=this.invKeySchedule=new Uint32Array(i),u=this.sBox,c=this.rcon,f=this.invSubMix,g=f[0],m=f[1],y=f[2],h=f[3],b=void 0,v=void 0;for(s=0;s<i;s++){if(s<o){b=d[s]=a[s];continue}v=b,0==s%o?(v=v<<8|v>>>24,v=u[v>>>24]<<24|u[255&v>>>16]<<16|u[255&v>>>8]<<8|u[255&v],v^=c[0|s/o]<<24):6<o&&4==s%o&&(v=u[v>>>24]<<24|u[255&v>>>16]<<16|u[255&v>>>8]<<8|u[255&v]),d[s]=b=(d[s-o]^v)>>>0}for(l=0;l<i;l++)s=i-l,v=3&l?d[s]:d[s-4],p[l]=4>l||4>=s?v:g[u[v>>>24]]^m[u[255&v>>>16]]^y[u[255&v>>>8]]^h[u[255&v]],p[l]>>>=0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,a){for(var n=this.keySize+6,r=this.invKeySchedule,o=this.invSBox,s=this.invSubMix,l=s[0],d=s[1],p=s[2],u=s[3],c=this.uint8ArrayToUint32Array_(a),f=c[0],g=c[1],m=c[2],y=c[3],h=new Int32Array(e),b=new Int32Array(h.length),v=void 0,I=void 0,E=void 0,S=void 0,T=void 0,A=void 0,L=void 0,w=void 0,C=void 0,R=void 0,D=void 0,x=void 0,_=this.networkToHostOrderSwap,k,P;t<h.length;){for(C=_(h[t]),R=_(h[t+1]),D=_(h[t+2]),x=_(h[t+3]),T=C^r[0],A=x^r[1],L=D^r[2],w=R^r[3],k=4,P=1;P<n;P++)v=l[T>>>24]^d[255&A>>16]^p[255&L>>8]^u[255&w]^r[k],I=l[A>>>24]^d[255&L>>16]^p[255&w>>8]^u[255&T]^r[k+1],E=l[L>>>24]^d[255&w>>16]^p[255&T>>8]^u[255&A]^r[k+2],S=l[w>>>24]^d[255&T>>16]^p[255&A>>8]^u[255&L]^r[k+3],T=v,A=I,L=E,w=S,k+=4;v=o[T>>>24]<<24^o[255&A>>16]<<16^o[255&L>>8]<<8^o[255&w]^r[k],I=o[A>>>24]<<24^o[255&L>>16]<<16^o[255&w>>8]<<8^o[255&T]^r[k+1],E=o[L>>>24]<<24^o[255&w>>16]<<16^o[255&T>>8]<<8^o[255&A]^r[k+2],S=o[w>>>24]<<24^o[255&T>>16]<<16^o[255&A>>8]<<8^o[255&L]^r[k+3],k+=3,b[t]=_(v^f),b[t+1]=_(S^g),b[t+2]=_(E^m),b[t+3]=_(I^y),f=C,g=R,m=D,y=x,t+=4}return b.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),U=a(0),Z=function(){function e(t,a){g(this,e),this.observer=t,this.config=a,this.logEnabled=!0;try{var n=crypto?crypto:self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(t){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,a,n){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(U.b.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new j),o.expandKey(t),n(o.decrypt(e,0,a))}else{this.logEnabled&&(U.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var i=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new G(i,t)),this.fastAesKey.expandKey().then(function(o){var s=new B(i,a);s.decrypt(e,o).catch(function(o){r.onWebCryptoError(o,e,t,a,n)}).then(function(e){n(e)})}).catch(function(o){r.onWebCryptoError(o,e,t,a,n)})}},e.prototype.onWebCryptoError=function(e,t,a,n,r){this.config.enableSoftwareAES?(U.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,a,n,r)):(U.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:F.b.MEDIA_ERROR,details:F.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}(),Y=Z,z=a(3),W=function(){function e(t,a,n){L(this,e),this.observer=t,this.config=n,this.remuxer=a}return e.prototype.resetInitSegment=function(e,t,a,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=z.a.getID3Data(e,0)||[],a=t.length,n=e.length;a<n;a++)if(I(e,a))return U.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,a,n){for(var r=this._audioTrack,o=z.a.getID3Data(e,0)||[],i=z.a.getTimeStamp(o),s=i?90*i:9e4*t,l=0,d=s,p=e.length,u=o.length,c=[{pts:d,dts:d,data:o}];u<p-1;)if(v(e,u)&&u+5<p){E(r,this.observer,e,u,r.manifestCodec);var f=A(r,e,u,s,l);if(f)u+=f.length,d=f.sample.pts,l++;else{U.b.log("Unable to parse AAC frame");break}}else z.a.isHeader(e,u)?(o=z.a.getID3Data(e,u),c.push({pts:d,dts:d,data:o}),u+=o.length):u++;this.remuxer.remux(r,{samples:[]},{samples:c,inputTimeScale:9e4},{samples:[]},t,a,n)},e.prototype.destroy=function(){},e}(),H=p(2,32)-1,V=function(){function e(t,a){w(this,e),this.observer=t,this.remuxer=a}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,a,n,r){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t),i={};o.audio&&o.video?i.audiovideo={container:"video/mp4",codec:a+","+n,initSegment:r?t:null}:(o.audio&&(i.audio={container:"audio/mp4",codec:a,initSegment:r?t:null}),o.video&&(i.video={container:"video/mp4",codec:n,initSegment:r?t:null})),this.observer.trigger(N.a.FRAG_PARSING_INIT_SEGMENT,{tracks:i})}else a&&(this.audioCodec=a),n&&(this.videoCodec=n)},e.probe=function(t){if(8<=t.length){var a=e.bin2str(t.subarray(4,8));return 0<=["moof","ftyp","styp"].indexOf(a)}return!1},e.bin2str=function(e){return u.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var a=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return 0>a?4294967296+a:a},e.writeUint32=function(e,t,a){e.data&&(t+=e.start,e=e.data),e[t]=a>>24,e[t+1]=255&a>>16,e[t+2]=255&a>>8,e[t+3]=255&a},e.findBox=function(t,a){var n=[],r,o,s,l,d,p,u;if(t.data?(p=t.start,l=t.end,t=t.data):(p=0,l=t.byteLength),!a.length)return null;for(r=p;r<l;)o=e.readUint32(t,r),s=e.bin2str(t.subarray(r+4,r+8)),u=1<o?r+o:l,s===a[0]&&(1===a.length?n.push({data:t,start:r+8,end:u}):(d=e.findBox({data:t,start:r+8,end:u},a.slice(1)),d.length&&(n=n.concat(d)))),r=u;return n},e.parseInitSegment=function(t){var a=[],n=e.findBox(t,["moov","trak"]);return n.forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var r=n.data[n.start],o=0===r?12:20,i=e.readUint32(n,o),s=e.findBox(t,["mdia","mdhd"])[0];if(s){r=s.data[s.start],o=0===r?12:20;var l=e.readUint32(s,o),d=e.findBox(t,["mdia","hdlr"])[0];if(d){var p=e.bin2str(d.data.subarray(d.start+8,d.start+12)),u={soun:"audio",vide:"video"}[p];u&&(a[i]={timescale:l,type:u},a[u]={timescale:l,id:i})}}}}),a},e.getStartDTS=function(t,a){var n,r,o;return n=e.findBox(a,["moof","traf"]),r=[].concat.apply([],n.map(function(a){return e.findBox(a,["tfhd"]).map(function(n){var r,o,i;return r=e.readUint32(n,4),o=t[r].timescale||9e4,i=e.findBox(a,["tfdt"]).map(function(t){var a,n;return a=t.data[t.start],n=e.readUint32(t,4),1===a&&(n*=p(2,32),n+=e.readUint32(t,8)),n})[0],i/o})})),o=f.apply(null,r),isFinite(o)?o:0},e.offsetStartDTS=function(t,a,n){e.findBox(a,["moof","traf"]).map(function(a){return e.findBox(a,["tfhd"]).map(function(r){var i=e.readUint32(r,4),s=t[i].timescale||9e4;e.findBox(a,["tfdt"]).map(function(t){var a=t.data[t.start],r=e.readUint32(t,4);if(0===a)e.writeUint32(t,4,r-n*s);else{r*=p(2,32),r+=e.readUint32(t,8),r-=n*s,r=l(r,0);var i=o(r/(H+1)),d=o(r%(H+1));e.writeUint32(t,4,i),e.writeUint32(t,8,d)}})})})},e.prototype.append=function(t,a,n,r){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),o=this.initData);var i=this.initPTS,s;if(void 0===i){var l=e.getStartDTS(o,t);this.initPTS=i=l-a,this.observer.trigger(N.a.INIT_PTS_FOUND,{initPTS:i})}e.offsetStartDTS(o,t,i),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,r,t)},e.prototype.destroy=function(){},e}(),J={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,a,n,r){if(!(a+24>t.length)){var o=this.parseHeader(t,a);if(o&&a+o.frameLength<=t.length){var i=103680000/o.sampleRate,s=n+r*i,l={unit:t.subarray(a,a+o.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(l),e.len+=o.frameLength,{sample:l,length:o.frameLength}}}},parseHeader:function(e,t){var a=3&e[t+1]>>3,n=3&e[t+1]>>1,r=15&e[t+2]>>4,o=3&e[t+2]>>2,i=!!(2&e[t+2]);if(1!=a&&0!==r&&15!==r&&3!==o){var s=3===a?3-n:3===n?3:4,l=1e3*J.BitratesMap[14*s+r-1],d=3===a?0:2===a?1:2,p=J.SamplingRateMap[3*d+o],u=i?1:0,c=3==e[t+3]>>6?1:2,f=3===n?(3===a?12:6)*l/p+u<<2:0|(3===a?144:72)*l/p+u;return{sampleRate:p,channelCount:c,frameLength:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var a=this.parseHeader(e,t),n=4;a&&a.frameLength&&(n=a.frameLength);var r=t+n;if(r===e.length||r+1<e.length&&this.isHeaderPattern(e,r))return!0}return!1}},K=J,X=function(){function e(t){C(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,a=e.byteLength-t,n=new Uint8Array(4),r=f(4,t);if(0===r)throw new Error("no bytes available");n.set(e.subarray(a,a+r)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=f(this.bitsAvailable,e),a=this.word>>>32-t;return 32<e&&U.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),t=e-t,0<t&&this.bitsAvailable?a<<t|this.readBits(t):a},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t=8,a=8,n,r;for(n=0;n<e;n++)0!==a&&(r=this.readEG(),a=(t+r+256)%256),t=0===a?t:a},e.prototype.readSPS=function(){var e=0,t=0,a=0,n=0,r=this.readUByte.bind(this),o=this.readBits.bind(this),l=this.readUEG.bind(this),d=this.readBoolean.bind(this),p=this.skipBits.bind(this),u=this.skipEG.bind(this),c=this.skipUEG.bind(this),f=this.skipScalingList.bind(this),g,m,y,h,b,v,I,E,S;if(r(),g=r(),m=o(5),p(3),y=r(),c(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var T=l();if(3===T&&p(1),c(),c(),p(1),d())for(E=3===T?12:8,S=0;S<E;S++)d()&&(6>S?f(16):f(64))}c();var A=l();if(0===A)l();else if(1===A)for(p(1),u(),u(),h=l(),S=0;S<h;S++)u();c(),p(1),b=l(),v=l(),I=o(1),0===I&&p(1),p(1),d()&&(e=l(),t=l(),a=l(),n=l());var L=[1,1];if(d()&&d()){var w=r();switch(w){case 1:L=[1,1];break;case 2:L=[12,11];break;case 3:L=[10,11];break;case 4:L=[16,11];break;case 5:L=[40,33];break;case 6:L=[24,11];break;case 7:L=[20,11];break;case 8:L=[32,11];break;case 9:L=[80,33];break;case 10:L=[18,11];break;case 11:L=[15,11];break;case 12:L=[64,33];break;case 13:L=[160,99];break;case 14:L=[4,3];break;case 15:L=[3,2];break;case 16:L=[2,1];break;case 255:{L=[r()<<8|r(),r()<<8|r()];break}}}return{width:s(16*(b+1)-2*e-2*t),height:16*((2-I)*(v+1))-(I?2:4)*(a+n),pixelRatio:L}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),Q=X,q=function(){function e(t,a,n,r){R(this,e),this.decryptdata=n,this.discardEPB=r,this.decrypter=new Y(t,a)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,a,n){var r=e[t].unit,o=r.subarray(16,r.length-r.length%16),i=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(i,function(o){o=new Uint8Array(o),r.set(o,16),n||s.decryptAacSamples(e,t+1,a)})},e.prototype.decryptAacSamples=function(e,t,a){for(;;t++){if(t>=e.length)return void a();if(!(32>e[t].unit.length)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,a,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*o((e.length-48)/160)+16,a=new Int8Array(t),n=0,r=32;r<=e.length-16;r+=160,n+=16)a.set(e.subarray(r,r+16),n);return a},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var a=0,n=32;n<=e.length-16;n+=160,a+=16)e.set(t.subarray(a,a+16),n);return e},e.prototype.decryptAvcSample=function(e,t,a,n,r,o){var i=this.discardEPB(r.data),s=this.getAvcEncryptedData(i),l=this;this.decryptBuffer(s.buffer,function(s){r.data=l.getAvcDecryptedUnit(i,s),o||l.decryptAvcSamples(e,t,a+1,n)})},e.prototype.decryptAvcSamples=function(e,t,a,n){for(;;t++,a=0){if(t>=e.length)return void n();for(var r=e[t].units;;a++){if(a>=r.length)break;var o=r[a];if(!(48>=o.length||1!==o.type&&5!==o.type)){var i=this.decrypter.isSync();if(this.decryptAvcSample(e,t,a,n,o,i),!i)return}}}},e}(),$=function(){function e(t,a,n,r){D(this,e),this.observer=t,this.config=n,this.typeSupported=r,this.remuxer=a,this.sampleAes=null}return e.prototype.setDecryptData=function(e){this.sampleAes=null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?new q(this.observer,this.config,e,this.discardEPB):null},e.probe=function(e){return!!(564<=e.length&&71===e[0]&&71===e[188]&&71===e[376])},e.prototype.resetInitSegment=function(e,t,a,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:n,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=a,this._duration=n},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(e,t,a,n){var r=e.length,o=!1,i,s,l,d,p,u;this.contiguous=a;var c=this.pmtParsed,f=this._avcTrack,g=this._audioTrack,m=this._id3Track,y=f.id,h=g.id,b=m.id,v=this._pmtId,I=f.pesData,E=g.pesData,S=m.pesData,T=this._parsePAT,A=this._parsePMT,L=this._parsePES,w=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this);for(r-=r%188,i=0;i<r;i+=188)if(71===e[i]){if(s=!!(64&e[i+1]),l=((31&e[i+1])<<8)+e[i+2],d=(48&e[i+3])>>4,!(1<d))p=i+4;else if(p=i+5+e[i+4],p===i+188)continue;switch(l){case y:s&&(I&&(u=L(I))&&w(u,!1),I={data:[],size:0}),I&&(I.data.push(e.subarray(p,i+188)),I.size+=i+188-p);break;case h:s&&(E&&(u=L(E))&&(g.isAAC?C(u):R(u)),E={data:[],size:0}),E&&(E.data.push(e.subarray(p,i+188)),E.size+=i+188-p);break;case b:s&&(S&&(u=L(S))&&D(u),S={data:[],size:0}),S&&(S.data.push(e.subarray(p,i+188)),S.size+=i+188-p);break;case 0:s&&(p+=e[p]+1),v=this._pmtId=T(e,p);break;case v:s&&(p+=e[p]+1);var x=A(e,p,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);y=x.avc,0<y&&(f.id=y),h=x.audio,0<h&&(g.id=h,g.isAAC=x.isAAC),b=x.id3,0<b&&(m.id=b),o&&!c&&(U.b.log("reparse from beginning"),o=!1,i=-188),c=this.pmtParsed=!0;break;case 17:case 8191:break;default:o=!0;}}else this.observer.trigger(N.a.ERROR,{type:F.b.MEDIA_ERROR,details:F.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});I&&(u=L(I))?(w(u,!0),f.pesData=null):f.pesData=I,E&&(u=L(E))?(g.isAAC?C(u):R(u),g.pesData=null):(E&&E.size&&U.b.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=E),S&&(u=L(S))?(D(u),m.pesData=null):m.pesData=S,null==this.sampleAes?this.remuxer.remux(g,f,m,this._txtTrack,t,a,n):this.decryptAndRemux(g,f,m,this._txtTrack,t,a,n)},e.prototype.decryptAndRemux=function(e,t,a,n,r,o,i){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,a,n,r,o,i)})}else this.decryptAndRemuxAvc(e,t,a,n,r,o,i)},e.prototype.decryptAndRemuxAvc=function(e,t,a,n,r,o,i){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,a,n,r,o,i)})}else this.remuxer.remux(e,t,a,n,r,o,i)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,a,n){var r={audio:-1,avc:-1,id3:-1,isAAC:!0},o,i,s,l;for(o=(15&e[t+1])<<8|e[t+2],i=t+3+o-4,s=(15&e[t+10])<<8|e[t+11],t+=12+s;t<i;){switch(l=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){U.b.log("unkown stream type:"+e[t]);break}case 15:-1===r.audio&&(r.audio=l);break;case 21:-1===r.id3&&(r.id3=l);break;case 219:if(!n){U.b.log("unkown stream type:"+e[t]);break}case 27:-1===r.avc&&(r.avc=l);break;case 3:case 4:a?-1===r.audio&&(r.audio=l,r.isAAC=!1):U.b.log("MPEG audio found, not supported in this browser for now");break;case 36:U.b.warn("HEVC stream type found, not supported for now");break;default:U.b.log("unkown stream type:"+e[t]);}t+=((15&e[t+3])<<8|e[t+4])+5}return r},e.prototype._parsePES=function(e){var t=0,a=e.data,n,r,o,s,l,p,u,c,f;if(!e||0===e.size)return null;for(;19>a[0].length&&1<a.length;){var g=new Uint8Array(a[0].length+a[1].length);g.set(a[0]),g.set(a[1],a[0].length),a[0]=g,a.splice(1,1)}if(n=a[0],o=(n[0]<<16)+(n[1]<<8)+n[2],1===o){if(s=(n[4]<<8)+n[5],s&&s>e.size-6)return null;r=n[7],192&r&&(u=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,4294967295<u&&(u-=8589934592),64&r?(c=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,4294967295<c&&(c-=8589934592),5400000<u-c&&(U.b.warn(d((u-c)/9e4)+"s delta between PTS and DTS, align them"),u=c)):c=u),l=n[8],f=l+9,e.size-=f,p=new Uint8Array(e.size);for(var m=0,y=a.length;m<y;m++){n=a[m];var h=n.byteLength;if(f)if(f>h){f-=h;continue}else n=n.subarray(f),h-=f,f=0;p.set(n,t),t+=h}return s&&(s-=l+3),{data:p,pts:u,dts:c,len:s}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var a=t.samples,n=a.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,a.push(e)):t.dropped++}e.debug.length&&U.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var a=this,n=this._avcTrack,r=this._parseAVCNALu(e.data),o=!1,s=this.avcSample,l=!1,d=this.pushAccesUnit.bind(this),p=function(e,t,a,n){return{key:e,pts:t,dts:a,units:[],debug:n}},u,c,f;e.data=null,s&&r.length&&!n.audFound&&(d(s,n),s=this.avcSample=p(!1,e.pts,e.dts,"")),r.forEach(function(t){switch(t.type){case 1:c=!0,s||(s=a.avcSample=p(!0,e.pts,e.dts,"")),o&&(s.debug+="NDR "),s.frame=!0;var r=t.data;if(l&&4<r.length){var i=new Q(r).readSliceType();(2===i||4===i||7===i||9===i)&&(s.key=!0)}break;case 5:c=!0,s||(s=a.avcSample=p(!0,e.pts,e.dts,"")),o&&(s.debug+="IDR "),s.key=!0,s.frame=!0;break;case 6:c=!0,o&&s&&(s.debug+="SEI "),u=new Q(a.discardEPB(t.data)),u.readUByte();for(var g=0,m=0,y=!1,v=0;!y&&1<u.bytesAvailable;){g=0;do v=u.readUByte(),g+=v;while(255===v);m=0;do v=u.readUByte(),m+=v;while(255===v);if(4===g&&0!==u.bytesAvailable){y=!0;var I=u.readUByte();if(181===I){var E=u.readUShort();if(49===E){var S=u.readUInt();if(1195456820===S){var T=u.readUByte();if(3===T){var A=u.readUByte(),L=u.readUByte(),w=[A,L];for(f=0;f<(31&A);f++)w.push(u.readUByte()),w.push(u.readUByte()),w.push(u.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}}}}else if(m<u.bytesAvailable)for(f=0;f<m;f++)u.readUByte()}break;case 7:if(c=!0,l=!0,o&&s&&(s.debug+="SPS "),!n.sps){u=new Q(t.data);var C=u.readSPS();n.width=C.width,n.height=C.height,n.pixelRatio=C.pixelRatio,n.sps=[t.data],n.duration=a._duration;var R=t.data.subarray(1,4),D="avc1.";for(f=0;3>f;f++){var x=R[f].toString(16);2>x.length&&(x="0"+x),D+=x}n.codec=D}break;case 8:c=!0,o&&s&&(s.debug+="PPS "),n.pps||(n.pps=[t.data]);break;case 9:c=!1,n.audFound=!0,s&&d(s,n),s=a.avcSample=p(!1,e.pts,e.dts,"");break;case 12:c=!1;break;default:c=!1,s&&(s.debug+="unknown NAL "+t.type+" ");}if(s&&c){var _=s.units;_.push(t)}}),t&&s&&(d(s,n),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var a=e.length;if(!(0<a))e.push(t);else if(t.pts>=e[a-1].pts)e.push(t);else for(var n=a-1;0<=n;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t;if(!e||0===e.units.length){var a=this._avcTrack,n=a.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t=0,a=e.byteLength,n=this._avcTrack,r=n.naluState||0,o=r,s=[],l=-1,d,p,u,c,f;for(-1===r&&(l=0,f=31&e[0],r=0,t=1);t<a;){if(d=e[t++],!r){r=d?0:1;continue}if(1===r){r=d?0:2;continue}if(!d)r=3;else if(1===d){if(0<=l)u={data:e.subarray(l,t-r-1),type:f},s.push(u);else{var g=this._getLastNalUnit();if(g&&(o&&t<=4-o&&g.state&&(g.data=g.data.subarray(0,g.data.byteLength-o)),p=t-r-1,0<p)){var m=new Uint8Array(g.data.byteLength+p);m.set(g.data,0),m.set(e.subarray(0,p),g.data.byteLength),g.data=m}}t<a?(c=31&e[t],l=t,f=c,r=0):r=-1}else r=0}if(0<=l&&0<=r&&(u={data:e.subarray(l,a),type:f,state:r},s.push(u)),0===s.length){var y=this._getLastNalUnit();if(y){var h=new Uint8Array(y.data.byteLength+e.byteLength);h.set(y.data,0),h.set(e,y.data.byteLength),y.data=h}}return n.naluState=r,s},e.prototype.discardEPB=function(e){for(var t=e.byteLength,a=[],n=1,r,o;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(a.push(n+2),n+=2):n++;if(0===a.length)return e;r=t-a.length,o=new Uint8Array(r);var s=0;for(n=0;n<r;s++,n++)s===a[0]&&(s++,a.shift()),o[n]=e[s];return o},e.prototype._parseAACPES=function(e){var t=this._audioTrack,a=e.data,n=e.pts,o=this.aacOverFlow,i=this.aacLastPTS,s,l,p,u,c;if(o){var f=new Uint8Array(o.byteLength+a.byteLength);f.set(o,0),f.set(a,o.byteLength),a=f}for(p=0,c=a.length;p<c-1&&!v(a,p);p++);if(p){var g,m;if(p<c-1?(g="AAC PES did not start with ADTS header,offset:"+p,m=!1):(g="no ADTS header found in AAC PES",m=!0),U.b.warn("parsing error:"+g),this.observer.trigger(N.a.ERROR,{type:F.b.MEDIA_ERROR,details:F.a.FRAG_PARSING_ERROR,fatal:m,reason:g}),m)return}if(E(t,this.observer,a,p,this.audioCodec),l=0,s=S(t.samplerate),o&&i){var y=i+s;1<r(y-n)&&(U.b.log("AAC: align PTS for overlapping frames by "+d((y-n)/90)),n=y)}for(;p<c;)if(v(a,p)&&p+5<c){var h=A(t,a,p,n,l);if(h)p+=h.length,u=h.sample.pts,l++;else break}else p++;o=p<c?a.subarray(p,c):null,this.aacOverFlow=o,this.aacLastPTS=u},e.prototype._parseMPEGPES=function(e){for(var t=e.data,a=t.length,n=0,r=0,o=e.pts;r<a;)if(K.isHeader(t,r)){var i=K.appendFrame(this._audioTrack,t,r,o,n);if(i)r+=i.length,n++;else break}else r++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),ee=function(){function e(t,a,n){x(this,e),this.observer=t,this.config=n,this.remuxer=a}return e.prototype.resetInitSegment=function(e,t,a,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t=z.a.getID3Data(e,0),a,n;if(t&&void 0!==z.a.getTimeStamp(t))for(a=t.length,n=f(e.length-1,a+100);a<n;a++)if(K.probe(e,a))return U.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,a,n){for(var r=z.a.getID3Data(e,0),o=90*z.a.getTimeStamp(r),i=r.length,s=e.length,l=0,d=0,p=this._audioTrack,u=[{pts:o,dts:o,data:r}];i<s;)if(K.isHeader(e,i)){var c=K.appendFrame(p,e,i,o,l);if(c)i+=c.length,d=c.sample.pts,l++;else break}else z.a.isHeader(e,i)?(r=z.a.getID3Data(e,i),u.push({pts:d,dts:d,data:r}),i+=r.length):i++;this.remuxer.remux(p,{samples:[]},{samples:u,inputTimeScale:9e4},{samples:[]},t,a,n)},e.prototype.destroy=function(){},e}(),te=function(){function e(){_(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);}return null},e}(),ae=te,ne=p(2,32)-1,re=function(){function e(){k(this,e)}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(var t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var a=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:a,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var i=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,i,l,i,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),a=8,n=t.length,r=n,o;n--;)a+=t[n].byteLength;for(o=new Uint8Array(a),o[0]=255&a>>24,o[1]=255&a>>16,o[2]=255&a>>8,o[3]=255&a,o.set(e,4),(n=0,a=8);n<r;n++)o.set(t[n],a),a+=t[n].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,a){a*=t;var n=o(a/(ne+1)),r=o(a%(ne+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,255&t>>24,255&t>>16,255&t>>8,255&t,n>>24,255&n>>16,255&n>>8,255&n,r>>24,255&r>>16,255&r>>8,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,255&t>>16,255&t>>8,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,a,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,a))},e.moov=function(t){for(var a=t.length,n=[];a--;)n[a]=e.trak(t[a]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var a=t.length,n=[];a--;)n[a]=e.trex(t[a]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,a){a*=t;var n=o(a/(ne+1)),r=o(a%(ne+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,255&t>>24,255&t>>16,255&t>>8,255&t,n>>24,255&n>>16,255&n>>8,255&n,r>>24,255&r>>16,255&r>>8,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)},e.sdtp=function(t){var a=t.samples||[],n=new Uint8Array(4+a.length),r,o;for(o=0;o<a.length;o++)r=a[o].flags,n[o+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,n)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var a=[],n=[],r,o,s;for(r=0;r<t.sps.length;r++)o=t.sps[r],s=o.byteLength,a.push(255&s>>>8),a.push(255&s),a=a.concat(Array.prototype.slice.call(o));for(r=0;r<t.pps.length;r++)o=t.pps[r],s=o.byteLength,n.push(255&s>>>8),n.push(255&s),n=n.concat(Array.prototype.slice.call(o));var l=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(n))),d=t.width,p=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255&d>>8,255&d,255&p>>8,255&p,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,255&u>>16,255&u>>8,255&u,c>>24,255&c>>16,255&c>>8,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var a=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,255&a>>8,255&a,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var a=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,255&a>>8,255&a,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var a=t.id,n=t.duration*t.timescale,r=t.width,i=t.height,s=o(n/(ne+1)),l=o(n%(ne+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,255&a>>24,255&a>>16,255&a>>8,255&a,0,0,0,0,s>>24,255&s>>16,255&s>>8,255&s,l>>24,255&l>>16,255&l>>8,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,255&r>>8,255&r,0,0,255&i>>8,255&i,0,0]))},e.traf=function(t,a){var n=e.sdtp(t),r=t.id,i=o(a/(ne+1)),s=o(a%(ne+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,255&r>>16,255&r>>8,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,i>>24,255&i>>16,255&i>>8,255&i,s>>24,255&s>>16,255&s>>8,255&s])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var a=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,a>>24,255&a>>16,255&a>>8,255&a,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,a){var n=t.samples||[],r=n.length,o=12+16*r,s=new Uint8Array(o),l,d,p,u,c,f;for(a+=8+o,s.set([0,0,15,1,255&r>>>24,255&r>>>16,255&r>>>8,255&r,255&a>>>24,255&a>>>16,255&a>>>8,255&a],0),l=0;l<r;l++)d=n[l],p=d.duration,u=d.size,c=d.flags,f=d.cts,s.set([255&p>>>24,255&p>>>16,255&p>>>8,255&p,255&u>>>24,255&u>>>16,255&u>>>8,255&u,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,61440&c.degradPrio,15&c.degradPrio,255&f>>>24,255&f>>>16,255&f>>>8,255&f],12+16*l);return e.box(e.types.trun,s)},e.initSegment=function(t){e.types||e.init();var a=e.moov(t),n;return n=new Uint8Array(e.FTYP.byteLength+a.byteLength),n.set(e.FTYP),n.set(a,e.FTYP.byteLength),n},e}(),oe=re,ie=10000,se=function(){function e(t,a,n,r){P(this,e),this.observer=t,this.config=a,this.typeSupported=n;var o=navigator.userAgent;this.isSafari=r&&-1<r.indexOf("Apple")&&o&&!o.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,a,n,r,o,i){if(this.ISGenerated||this.generateIS(e,t,r),this.ISGenerated){var s=e.samples.length,d=t.samples.length,p=r,u=r;if(s&&d){var c=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;p+=l(0,c),u+=l(0,-c)}if(s){e.timescale||(U.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,r));var f=this.remuxAudio(e,p,o,i);if(d){var g;f&&(g=f.endPTS-f.startPTS),t.timescale||(U.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,r)),this.remuxVideo(t,u,o,g,i)}}else{var m;d&&(m=this.remuxVideo(t,u,o,i)),m&&e.codec&&this.remuxEmptyAudio(e,p,o,m)}}a.samples.length&&this.remuxID3(a,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(N.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,a){var n=this.observer,r=e.samples,o=t.samples,i=this.typeSupported,s="audio/mp4",l={},d=void 0===this._initPTS,p,u;if(d&&(p=u=1/0),e.config&&r.length&&(e.timescale=e.samplerate,U.b.log("audio sampling rate : "+e.samplerate),!e.isAAC&&(i.mpeg?(s="audio/mpeg",e.codec=""):i.mp3&&(e.codec="mp3")),l.audio={container:s,codec:e.codec,initSegment:!e.isAAC&&i.mpeg?new Uint8Array:oe.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(p=u=r[0].pts-e.inputTimeScale*a)),t.sps&&t.pps&&o.length){var c=t.inputTimeScale;t.timescale=c,l.video={container:"video/mp4",codec:t.codec,initSegment:oe.initSegment([t]),metadata:{width:t.width,height:t.height}},d&&(p=f(p,o[0].pts-c*a),u=f(u,o[0].dts-c*a),this.observer.trigger(N.a.INIT_PTS_FOUND,{initPTS:p}))}Object.keys(l).length?(n.trigger(N.a.FRAG_PARSING_INIT_SEGMENT,{tracks:l}),this.ISGenerated=!0,d&&(this._initPTS=p,this._initDTS=u)):n.trigger(N.a.ERROR,{type:F.b.MEDIA_ERROR,details:F.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,a,n,s){var p=8,u=e.timescale,c=e.samples,g=[],m=c.length,y=this._PTSNormalize,h=this._initDTS,b=this.nextAvcDts,v=this.isSafari,I,E,S,T,A,L,w,C;v&&(a|=c.length&&b&&(s&&.1>r(t-b/u)||r(c[0].pts-b-h)<u/5)),a||(b=t*u),c.forEach(function(e){e.pts=y(e.pts-h,b),e.dts=y(e.dts-h,b)}),c.sort(function(e,t){var a=e.dts-t.dts,n=e.pts-t.pts;return a?a:n?n:e.id-t.id});var R=c.reduce(function(e,t){return l(f(e,t.pts-t.dts),-18e3)},0);if(0>R){U.b.warn("PTS < DTS detected in video samples, shifting DTS by "+d(R/90)+" ms to overcome this issue");for(var D=0;D<c.length;D++)c[D].dts+=R}var x=c[0];A=l(x.dts,0),T=l(x.pts,0);var _=d((A-b)/90);a&&_&&(1<_?U.b.log("AVC:"+_+" ms hole between fragments detected,filling it"):-1>_&&U.b.log("AVC:"+-_+" ms overlapping between fragments detected"),A=b,c[0].dts=A,T=l(T-_,b),c[0].pts=T,U.b.log("Video/PTS/DTS adjusted: "+d(T/90)+"/"+d(A/90)+",delta:"+_+" ms")),L=A,x=c[c.length-1],C=l(x.dts,0),w=l(x.pts,0,C),v&&(I=d((C-A)/(c.length-1)));for(var k=0,P=0,O=0;O<m;O++){for(var M=c[O],B=M.units,G=B.length,Z=0,Y=0;Y<G;Y++)Z+=B[Y].data.length;P+=Z,k+=G,M.length=Z,M.dts=v?A+O*I:l(M.dts,A),M.pts=l(M.pts,M.dts)}var z=P+4*k+8;try{E=new Uint8Array(z)}catch(e){return void this.observer.trigger(N.a.ERROR,{type:F.b.MUX_ERROR,details:F.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z})}var W=new DataView(E.buffer);W.setUint32(0,z),E.set(oe.types.mdat,4);for(var H=0;H<m;H++){for(var V=c[H],J=V.units,K=0,X=void 0,Q=0,q=J.length;Q<q;Q++){var $=J[Q],ee=$.data,te=$.data.byteLength;W.setUint32(p,te),p+=4,E.set(ee,p),p+=te,K+=4+te}if(!v){if(H<m-1)I=c[H+1].dts-V.dts;else{var ae=this.config,ne=V.dts-c[0<H?H-1:H].dts;if(ae.stretchShortVideoTrack){var re=ae.maxBufferHole,ie=ae.maxSeekHole,se=o(f(re,ie)*u),le=(n?T+n*u:this.nextAudioPts)-V.pts;le>se?(I=le-ne,0>I&&(I=ne),U.b.log("It is approximately "+le/90+" ms to the next segment; using duration "+I/90+" ms for the last video frame.")):I=ne}else I=ne}X=d(V.pts-V.dts)}else X=l(0,I*d((V.pts-V.dts)/I));g.push({size:K,duration:I,cts:X,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:V.key?2:1,isNonSync:V.key?0:1}})}this.nextAvcDts=C+I;var de=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,g.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var pe=g[0].flags;pe.dependsOn=2,pe.isNonSync=0}e.samples=g,S=oe.moof(e.sequenceNumber++,A,e),e.samples=[];var ue={data1:S,data2:E,startPTS:T/u,endPTS:(w+I)/u,startDTS:A/u,endDTS:this.nextAvcDts/u,type:"video",nb:g.length,dropped:de};return this.observer.trigger(N.a.FRAG_PARSING_DATA,ue),ue},e.prototype.remuxAudio=function(e,t,a,n){var o=e.inputTimeScale,s=e.timescale,p=o/s,u=e.isAAC?1024:1152,c=u*p,f=this._PTSNormalize,g=this._initDTS,m=!e.isAAC&&this.typeSupported.mpeg,y=e.samples,h=[],b=this.nextAudioPts,v,I,E,S,T,A,L;if(a|=y.length&&b&&(n&&.1>r(t-b/o)||r(y[0].pts-b-g)<20*c),a||(b=t*o),y.forEach(function(e){e.pts=e.dts=f(e.pts-g,b)}),y.sort(function(e,t){return e.pts-t.pts}),n&&e.isAAC)for(var w=this.config.maxAudioFramesDrift,C=0,R=b;C<y.length;){var D=y[C],x=D.pts,_;_=x-R;var k=r(1e3*_/o);if(_<=-w*c)U.b.warn("Dropping 1 audio frame @ "+(R/o).toFixed(3)+"s due to "+d(k)+" ms overlap."),y.splice(C,1),e.len-=D.unit.length;else if(_>=w*c&&k<ie&&R){var P=d(_/c);U.b.warn("Injecting "+P+" audio frame @ "+(R/o).toFixed(3)+"s due to "+d(1e3*_/o)+" ms gap.");for(var O=0,M;O<P;O++)M=l(R,0),E=ae.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),E||(U.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),E=D.unit.subarray()),y.splice(C,0,{unit:E,pts:M,dts:M}),e.len+=E.length,R+=c,C++;D.pts=D.dts=R,R+=c,C++}else r(_)>.1*c,D.pts=D.dts=R,R+=c,C++}for(var B=0,G=y.length;B<G;B++){var Z=y[B],Y=Z.unit,z=Z.pts;if(void 0!==L)I.duration=d((z-L)/p);else{var W=d(1e3*(z-b)/o),H=0;if(a&&e.isAAC&&W){if(0<W&&W<ie)H=d((z-b)/c),U.b.log(W+" ms hole between AAC samples detected,filling it"),0<H&&(E=ae.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),!E&&(E=Y.subarray()),e.len+=H*E.length);else if(-12>W){U.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(b/o).toFixed(3)+"s/"+(z/o).toFixed(3)+"s/"+-W+"ms"),e.len-=Y.byteLength;continue}z=b}if(A=l(0,z),0<e.len){var V=m?e.len:e.len+8;v=m?0:8;try{S=new Uint8Array(V)}catch(e){return void this.observer.trigger(N.a.ERROR,{type:F.b.MUX_ERROR,details:F.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:V,reason:"fail allocating audio mdat "+V})}if(!m){var J=new DataView(S.buffer);J.setUint32(0,V),S.set(oe.types.mdat,4)}}else return;for(var K=0;K<H;K++)E=ae.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),E||(U.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),E=Y.subarray()),S.set(E,v),v+=E.byteLength,I={size:E.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},h.push(I)}S.set(Y,v);var X=Y.byteLength;v+=X,I={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},h.push(I),L=z}var Q=0,q=h.length;if(2<=q&&(Q=h[q-2].duration,I.duration=Q),q){this.nextAudioPts=b=L+p*Q,e.len=0,e.samples=h,T=m?new Uint8Array:oe.moof(e.sequenceNumber++,A/p,e),e.samples=[];var $=A/o,ee=b/o,te={data1:T,data2:S,startPTS:$,endPTS:ee,startDTS:$,endDTS:ee,type:"audio",nb:q};return this.observer.trigger(N.a.FRAG_PARSING_DATA,te),te}return null},e.prototype.remuxEmptyAudio=function(e,t,a,n){var r=e.inputTimeScale,o=e.samplerate?e.samplerate:r,l=this.nextAudioPts,d=(void 0===l?n.startDTS*r:l)+this._initDTS,p=n.endDTS*r+this._initDTS,u=1024*(r/o),c=s((p-d)/u),f=ae.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(U.b.warn("remux empty Audio"),!f)return void U.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var g=[],m=0,y;m<c;m++)y=d+m*u,g.push({unit:f,pts:y,dts:y}),e.len+=f.length;e.samples=g,this.remuxAudio(e,t,a)},e.prototype.remuxID3=function(e,t){var a=e.samples.length,n=e.inputTimeScale,r=this._initPTS,o=this._initDTS,i;if(a){for(var s=0;s<a;s++)i=e.samples[s],i.pts=(i.pts-r)/n,i.dts=(i.dts-o)/n;this.observer.trigger(N.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var a=e.samples.length,n=e.inputTimeScale,r=this._initPTS,o;if(a){for(var i=0;i<a;i++)o=e.samples[i],o.pts=(o.pts-r)/n;this.observer.trigger(N.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var a;if(void 0===t)return e;for(a=t<e?-8589934592:8589934592;4294967296<r(e-t);)e+=a;return e},e}(),le=se,de=function(){function e(t){O(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,a,n,r,o,i,s){var l=this.observer,d="";e&&(d+="audio"),t&&(d+="video"),l.trigger(N.a.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:d,nb:1,dropped:0}),l.trigger(N.a.FRAG_PARSED)},e}(),pe=function(){function e(t,a,n,r){M(this,e),this.observer=t,this.typeSupported=a,this.config=n,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,a,n,r,o,i,s,l,d,p,u){if(0<e.byteLength&&null!=t&&null!=t.key&&"AES-128"===t.method){var c=this.decrypter;null==c&&(c=this.decrypter=new Y(this.observer,this.config));var f=this,g;try{g=performance.now()}catch(e){g=Date.now()}c.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var c;try{c=performance.now()}catch(e){c=Date.now()}f.observer.trigger(N.a.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:c}}),f.pushDecrypted(new Uint8Array(e),t,new Uint8Array(a),n,r,o,i,s,l,d,p,u)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(a),n,r,o,i,s,l,d,p,u)},e.prototype.pushDecrypted=function(e,t,a,n,r,o,s,l,d,p,u,c){var f=this.demuxer;if(!f||s&&!this.probe(e)){for(var g=this.observer,m=this.typeSupported,y=this.config,h=[{demux:$,remux:le},{demux:W,remux:le},{demux:ee,remux:le},{demux:V,remux:de}],b=0,v=h.length;b<v;b++){var I=h[b],E=I.demux.probe;if(E(e)){var S=this.remuxer=new I.remux(g,y,m,this.vendor);f=new I.demux(g,S,y,m),this.probe=E;break}}if(!f)return void g.trigger(N.a.ERROR,{type:F.b.MEDIA_ERROR,details:F.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var T=this.remuxer;(s||l)&&(f.resetInitSegment(a,n,r,p),T.resetInitSegment()),s&&(f.resetTimeStamp(c),T.resetTimeStamp(c)),"function"==typeof f.setDecryptData&&f.setDecryptData(t),f.append(e,o,d,u)},e}(),ue=t.a=pe},function(e,t,a){"use strict";var s=Number.POSITIVE_INFINITY;function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){var a=Ve[t];return!!a&&!0===a[e.slice(0,4)]}function y(e){return MediaSource.isTypeSupported("video/mp4;codecs=\""+e+"\"")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t,a){var n=e[t],r=e[a],o=r.startPTS;isNaN(o)?a>t?r.start=n.start+n.duration:r.start=l(n.start-r.duration,0):a>t?(n.duration=o-n.start,0>n.duration&&je.b.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(r.duration=n.start-o,0>r.duration&&je.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function D(e,t,a,n,o,s){var d=a;if(!isNaN(t.startPTS)){var p=r(t.startPTS-a);t.deltaPTS=isNaN(t.deltaPTS)?p:l(p,t.deltaPTS),d=l(a,t.startPTS),a=f(a,t.startPTS),n=l(n,t.endPTS),o=f(o,t.startDTS),s=l(s,t.endDTS)}var u=a-t.start;t.start=t.startPTS=a,t.maxStartPTS=d,t.endPTS=n,t.startDTS=o,t.endDTS=s,t.duration=n-a;var c=t.sn;if(!e||c<e.startSN||c>e.endSN)return 0;var g,m,y;for(g=c-e.startSN,m=e.fragments,m[g]=t,y=g;0<y;y--)R(m,y,y-1);for(y=g;y<m.length-1;y++)R(m,y,y+1);return e.PTSKnown=!0,u}function x(e,t){var a=l(e.startSN,t.startSN)-t.startSN,n=f(e.endSN,t.endSN)-t.startSN,r=t.startSN-e.startSN,o=e.fragments,s=t.fragments,d=0,p;if(n<a)return void(t.PTSKnown=!1);for(var u=a;u<=n;u++){var c=o[r+u],g=s[u];g&&c&&(d=c.cc-g.cc,!isNaN(c.startPTS)&&(g.start=g.startPTS=c.startPTS,g.endPTS=c.endPTS,g.duration=c.duration,g.backtracked=c.backtracked,g.dropped=c.dropped,p=g))}if(d)for(je.b.log("discontinuity sliding from playlist, take drift into account"),u=0;u<s.length;u++)s[u].cc+=d;if(p)D(t,p,p.startPTS,p.endPTS,p.startDTS,p.endDTS);else if(0<=r&&r<o.length){var m=o[r].start;for(u=0;u<s.length;u++)s[u].start+=m}t.PTSKnown=e.PTSKnown}function _(e,t){for(var a=null,n=0,r;n<e.length;n+=1)if(r=e[n],r&&r.cc===t){a=r;break}return a}function k(e,t){return nt.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}function P(e,t,a){var n=!1;return t&&t.details&&a&&(a.endCC>a.startCC||e&&e.cc<a.startCC)&&(n=!0),n}function O(e,t){var a=e.fragments,n=t.fragments;if(!n.length||!a.length)return void je.b.log("No fragments to align");var r=_(a,n[0].cc);return r&&(!r||r.startPTS)?r:void je.b.log("No frag in previous level to align on")}function M(e,t){t.fragments.forEach(function(t){if(t){var a=t.start+e;t.start=t.startPTS=a,t.endPTS=a+t.duration}}),t.PTSKnown=!0}function N(e,t,a){if(P(e,t,a)){var n=O(t.details,a);n&&(je.b.log("Adjusting PTS using last level due to CC increase within current level"),M(n.start,a))}if(!1===a.PTSKnown&&t&&t.details){var r=t.details.programDateTime,o=a.programDateTime,i=(o-r)/1e3+t.details.fragments[0].start;isNaN(i)||(je.b.log("adjusting PTS using programDateTime delta, sliding:"+i.toFixed(3)),M(i,a))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function ce(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function fe(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Nt,this.regionList=[]}function ge(e){function t(e,t,a,n){return 3600*(0|e)+60*(0|t)+(0|a)+(0|n)/1e3}var a=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return a?a[3]?t(a[1],a[2],a[3].replace(":",""),a[4]):59<a[1]?t(a[1],a[2],0,a[4]):t(0,a[1],a[2],a[4]):null}function me(){this.values=Object.create(null)}function ye(e,t,a,n){var r=n?e.split(n):[e];for(var o in r)if("string"==typeof r[o]){var i=r[o].split(a);if(2===i.length){var s=i[0],l=i[1];t(s,l)}}}function he(e,t,a){function n(){var t=ge(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(e,t){var n=new me;ye(e,function(e,t){switch(e){case"region":for(var r=a.length-1;0<=r;r--)if(a[r].id===t){n.set(e,a[r].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),s=o[0];n.integer(e,s),n.percent(e,s)&&n.set("snapToLines",!1),n.alt(e,s,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",Bt,"end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",Bt,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",Bt,"end","left","right"]);}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var r=n.get("line","auto");"auto"===r&&-1===Ft.line&&(r=-1),t.line=r,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",Bt);var o=n.get("position","auto");"auto"===o&&50===Ft.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}function o(){e=e.replace(/^\s+/,"")}var i=e;if(o(),t.startTime=n(),o(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);e=e.substr(3),o(),t.endTime=n(),o(),r(e,t)}function be(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function ve(e,t,a,n){for(var o=window.VTTCue||window.TextTrackCue,i=0,s,d,p,u,g;i<n.rows.length;i++)if(s=n.rows[i],p=!0,u=0,g="",!s.isEmpty()){for(var m=0;m<s.chars.length;m++)s.chars[m].uchar.match(/\s/)&&p?u++:(g+=s.chars[m].uchar,p=!1);s.cueStartTime=t,t===a&&(a+=1e-4),d=new o(t,a,be(g.trim())),16<=u?u--:u++,d.line=navigator.userAgent.match(/Firefox\//)?i+1:7<i?i-2:i+1,d.align="left",d.position=l(0,f(100,100*(u/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(d)}}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ae(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}function Le(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function we(e,t,a,n){return f(t,n)-l(e,a)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function De(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function xe(e){for(var t=[],a=0;a<e.length;a++)"subtitles"===e[a].kind&&t.push(e[a]);return t}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var Me={};a.d(Me,"newCue",function(){return ve});var Ne=a(5),Fe=a.n(Ne),Be=a(1),Ge=a(2),je=a(0),Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze=function(){function e(t){c(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var a=arguments.length,n=Array(1<a?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===Ue(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){var a=function(e,t){var a="on"+e.replace("hls","");if("function"!=typeof this[a])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+a+")");return this[a].bind(this,t)};try{a.call(this,e,t).call()}catch(t){je.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(Be.a.ERROR,{type:Ge.b.OTHER_ERROR,details:Ge.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}(),Ye=Ze,ze=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,We=function(){var e=Number.MAX_SAFE_INTEGER;function t(e){for(var a in g(this,t),"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(a)&&(this[a]=e[a])}return t.prototype.decimalInteger=function(t){var a=parseInt(this[t],10);return a>e?1/0:a},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var a=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)a[n]=parseInt(t.slice(2*n,2*n+2),16);return a}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var a=parseInt(this[t],16);return a>e?1/0:a},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=/^(\d+)x(\d+)$/.exec(this[e]);return null===t?void 0:{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t={},a;for(ze.lastIndex=0;null!==(a=ze.exec(e));){var n=a[2];0===n.indexOf("\"")&&n.lastIndexOf("\"")===n.length-1&&(n=n.slice(1,-1)),t[a[1]]=n}return t},t}(),He=We,Ve={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},Je=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Ke=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,Xe=/#EXT-X-MEDIA:(.*)/g,Qe=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),qe=function(){function e(){v(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return Je(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Fe.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),$e=function(){function e(){v(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),a=12;16>a;a++)t[a]=255&e>>8*(15-a);return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var a=e;return e&&e.method&&e.uri&&!e.iv&&(a=new qe,a.method=e.method,a.baseuri=e.baseuri,a.reluri=e.reluri,a.iv=this.createInitializationVector(t)),a},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},Je(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Fe.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var a=this.lastByteRangeEndOffset;e[0]=a?a:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),et=function(e){function t(a){v(this,t);var n=h(this,e.call(this,a,Be.a.MANIFEST_LOADING,Be.a.LEVEL_LOADING,Be.a.AUDIO_TRACK_LOADING,Be.a.SUBTITLE_TRACK_LOADING));return n.loaders={},n}return b(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},Ye.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var a=this.loaders[t.type];if(a){var n=a.context;if(n&&n.url===e)return void je.b.trace("playlist request ongoing");je.b.warn("abort previous loader for type:"+t.type),a.abort()}var r=this.hls.config,o,i,s,l;"manifest"===t.type?(o=r.manifestLoadingMaxRetry,i=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout):(o=r.levelLoadingMaxRetry,i=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout,je.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),a=this.loaders[t.type]=t.loader="undefined"==typeof r.pLoader?new r.loader(r):new r.pLoader(r),t.url=e,t.responseType="";var d,p;d={timeout:i,maxRetry:o,retryDelay:s,maxRetryDelay:l},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},a.load(t,d,p)},t.prototype.resolve=function(e,t){return Fe.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){function a(e,t){["video","audio"].forEach(function(a){var n=e.filter(function(e){return m(e,a)});if(n.length){var r=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[a+"Codec"]=0<r.length?r[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}var n=[],r;for(Ke.lastIndex=0;null!=(r=Ke.exec(e));){var o={},i=o.attrs=new He(r[1]);o.url=this.resolve(r[2],t);var s=i.decimalResolution("RESOLUTION");s&&(o.width=s.width,o.height=s.height),o.bitrate=i.decimalInteger("AVERAGE-BANDWIDTH")||i.decimalInteger("BANDWIDTH"),o.name=i.NAME,a([].concat((i.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=this.avc1toavcoti(o.videoCodec)),n.push(o)}return n},t.prototype.parseMasterPlaylistMedia=function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=void 0,o=[],i=0;for(Xe.lastIndex=0;null!=(r=Xe.exec(e));){var s={},l=new He(r[1]);l.TYPE===a&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=a,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,!s.name&&(s.name=s.lang),n&&(s.audioCodec=n),s.id=i++,o.push(s))}return o},t.prototype.avc1toavcoti=function(e){var t=e.split("."),a;return 2<t.length?(a=t.shift()+".",a+=parseInt(t.shift()).toString(16),a+=("000"+parseInt(t.shift()).toString(16)).substr(-4)):a=e,a},t.prototype.parseLevelPlaylist=function(e,t,a,n){var r=0,o=0,s={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new qe,d=0,p=null,u=new $e,c,f;for(Qe.lastIndex=0;null!==(c=Qe.exec(e));){var g=c[1];if(g){u.duration=parseFloat(g);var m=(" "+c[2]).slice(1);u.title=m?m:null,u.tagList.push(m?["INF",g,m]:["INF",g])}else if(c[3]){if(!isNaN(u.duration)){var y=r++;u.type=n,u.start=o,u.levelkey=l,u.sn=y,u.level=a,u.cc=d,u.baseurl=t,u.relurl=(" "+c[3]).slice(1),s.fragments.push(u),p=u,o+=u.duration,u=new $e}}else if(c[4]){if(u.rawByteRange=(" "+c[4]).slice(1),p){var h=p.byteRangeEndOffset;h&&(u.lastByteRangeEndOffset=h)}}else if(c[5])u.rawProgramDateTime=(" "+c[5]).slice(1),u.tagList.push(["PROGRAM-DATE-TIME",u.rawProgramDateTime]),void 0===s.programDateTime&&(s.programDateTime=new Date(new Date(Date.parse(c[5]))-1e3*o));else{for(c=c[0].match(/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/),f=1;f<c.length&&void 0===c[f];f++);var b=(" "+c[f+1]).slice(1),v=(" "+c[f+2]).slice(1);switch(c[f]){case"#":u.tagList.push(v?[b,v]:[b]);break;case"PLAYLIST-TYPE":s.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":r=s.startSN=parseInt(b);break;case"TARGETDURATION":s.targetduration=parseFloat(b);break;case"VERSION":s.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":s.live=!1;break;case"DIS":d++,u.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(b);break;case"KEY":var I=new He(b),E=I.enumeratedString("METHOD"),S=I.URI,T=I.hexadecimalInteger("IV");E&&(l=new qe,S&&0<=["AES-128","SAMPLE-AES"].indexOf(E)&&(l.method=E,l.baseuri=t,l.reluri=S,l.key=null,l.iv=T));break;case"START":var A=new He(b),L=A.decimalFloatingPoint("TIME-OFFSET");isNaN(L)||(s.startTimeOffset=L);break;case"MAP":var w=new He(b);u.relurl=w.URI,u.rawByteRange=w.BYTERANGE,u.baseurl=t,u.level=a,u.type=n,u.sn="initSegment",s.initSegment=u,u=new $e;break;default:je.b.warn("line parsed but not handled: "+c);}}}return u=p,u&&!u.relurl&&(s.fragments.pop(),o-=u.duration),s.totalduration=o,s.averagetargetduration=o/s.fragments.length,s.endSN=r-1,s.startCC=s.fragments[0]?s.fragments[0].cc:0,s.endCC=d,s},t.prototype.loadsuccess=function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=e.data,o=e.url,i=a.type,s=a.id,l=a.level,d=this.hls;if(this.loaders[i]=void 0,(void 0===o||0===o.indexOf("data:"))&&(o=a.url),t.tload=performance.now(),0!==r.indexOf("#EXTM3U"))d.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no EXTM3U delimiter",networkDetails:n});else if(0<r.indexOf("#EXTINF:")){var p=isNaN(l)?isNaN(s)?0:s:l,u=this.parseLevelPlaylist(r,o,p,"audioTrack"===i?"audio":"subtitleTrack"===i?"subtitle":"main");u.tload=t.tload,"manifest"===i&&d.trigger(Be.a.MANIFEST_LOADED,{levels:[{url:o,details:u}],audioTracks:[],url:o,stats:t,networkDetails:n}),t.tparsed=performance.now(),u.targetduration?"audioTrack"!==i&&"subtitleTrack"!==i?d.trigger(Be.a.LEVEL_LOADED,{details:u,level:l||0,id:s||0,stats:t,networkDetails:n}):"audioTrack"===i?d.trigger(Be.a.AUDIO_TRACK_LOADED,{details:u,id:s,stats:t,networkDetails:n}):"subtitleTrack"===i&&d.trigger(Be.a.SUBTITLE_TRACK_LOADED,{details:u,id:s,stats:t,networkDetails:n}):d.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"invalid targetduration",networkDetails:n})}else{var c=this.parseMasterPlaylist(r,o);if(c.length){var f=this.parseMasterPlaylistMedia(r,o,"AUDIO",c[0].audioCodec),g=this.parseMasterPlaylistMedia(r,o,"SUBTITLES");if(f.length){var m=!1;f.forEach(function(e){e.url||(m=!0)}),!1==m&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(je.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main"}))}d.trigger(Be.a.MANIFEST_LOADED,{levels:c,audioTracks:f,subtitles:g,url:o,stats:t,networkDetails:n})}else d.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.MANIFEST_PARSING_ERROR,fatal:!0,url:o,reason:"no level found in manifest",networkDetails:n})}},t.prototype.loaderror=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader,r,o;switch(t.type){case"manifest":r=Ge.a.MANIFEST_LOAD_ERROR,o=!0;break;case"level":r=Ge.a.LEVEL_LOAD_ERROR,o=!1;break;case"audioTrack":r=Ge.a.AUDIO_TRACK_LOAD_ERROR,o=!1;}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:r,fatal:o,url:n.url,loader:n,response:e,context:t,networkDetails:a})},t.prototype.loadtimeout=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader,r,o;switch(t.type){case"manifest":r=Ge.a.MANIFEST_LOAD_TIMEOUT,o=!0;break;case"level":r=Ge.a.LEVEL_LOAD_TIMEOUT,o=!1;break;case"audioTrack":r=Ge.a.AUDIO_TRACK_LOAD_TIMEOUT,o=!1;}n&&(n.abort(),this.loaders[t.type]=void 0),this.hls.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:r,fatal:o,url:n.url,loader:n,context:t,networkDetails:a})},t}(Ye),tt=function(e){function t(a){I(this,t);var n=E(this,e.call(this,a,Be.a.FRAG_LOADING));return n.loaders={},n}return S(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var a=e[t];a&&a.destroy()}this.loaders={},Ye.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,a=t.type,n=this.loaders[a],r=this.hls.config;t.loaded=0,n&&(je.b.warn("abort previous fragment loader for type:"+a),n.abort()),n=this.loaders[a]=t.loader="undefined"==typeof r.fLoader?new r.loader(r):new r.fLoader(r);var o,i,s;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,d=t.byteRangeEndOffset;isNaN(l)||isNaN(d)||(o.rangeStart=l,o.rangeEnd=d),i={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,i,s)},t.prototype.loadsuccess=function(e,t,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,r=e.data,o=a.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(Be.a.FRAG_LOADED,{payload:r,frag:o,stats:t,networkDetails:n})},t.prototype.loaderror=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:a})},t.prototype.loadtimeout=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:a})},t.prototype.loadprogress=function(e,t){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,n=t.frag;n.loaded=e.loaded,this.hls.trigger(Be.a.FRAG_LOAD_PROGRESS,{frag:n,stats:e,networkDetails:a})},t}(Ye),at=function(e){function t(a){T(this,t);var n=A(this,e.call(this,a,Be.a.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return L(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},Ye.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,a=t.type,n=this.loaders[a],r=t.decryptdata,o=r.uri;if(o!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;n&&(je.b.warn("abort previous key loader for type:"+a),n.abort()),t.loader=this.loaders[a]=new i.loader(i),this.decrypturl=o,this.decryptkey=null;var s,l,d;s={url:o,frag:t,responseType:"arraybuffer"},l={timeout:i.fragLoadingTimeOut,maxRetry:i.fragLoadingMaxRetry,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,d)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(Be.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,a){var n=a.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(Be.a.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var a=t.frag,n=a.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.KEY_LOAD_ERROR,fatal:!1,frag:a,response:e})},t.prototype.loadtimeout=function(e,t){var a=t.frag,n=a.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Be.a.ERROR,{type:Ge.b.NETWORK_ERROR,details:Ge.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:a})},t}(Ye),nt={search:function(e,t){for(var a=0,n=e.length-1,r=null,o=null;a<=n;){r=0|(a+n)/2,o=e[r];var i=t(o);if(0<i)a=r+1;else if(0>i)n=r-1;else return o}return null}},rt={isBuffered:function(e,t){if(e)for(var a=e.buffered,n=0;n<a.length;n++)if(t>=a.start(n)&&t<=a.end(n))return!0;return!1},bufferInfo:function(e,t,a){if(e){var n=e.buffered,r=[],o;for(o=0;o<n.length;o++)r.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(r,t,a)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,a){var n=[],r,o,s,l,d;for(e.sort(function(e,t){var a=e.start-t.start;return a?a:t.end-e.end}),d=0;d<e.length;d++){var p=n.length;if(p){var u=n[p-1].end;e[d].start-u<a?e[d].end>u&&(n[p-1].end=e[d].end):n.push(e[d])}else n.push(e[d])}for(d=0,r=0,o=s=t;d<n.length;d++){var c=n[d].start,f=n[d].end;if(t+a>=c&&t<f)o=c,s=f,r=s-t;else if(t+a<c){l=c;break}}return{len:r,start:o,end:s,nextStart:l}}},ot=a(6),it=a(4),st=a.n(it),lt=a(8),dt=a.n(lt),pt=function(){function e(t,a){C(this,e),this.hls=t,this.id=a;var n=this.observer=new st.a,r=t.config;n.trigger=function(e){for(var t=arguments.length,a=Array(1<t?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];n.emit.apply(n,[e,e].concat(a))},n.off=function(e){for(var t=arguments.length,a=Array(1<t?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];n.removeListener.apply(n,[e].concat(a))};var o=function(e,a){a=a||{},a.frag=this.frag,a.id=this.id,t.trigger(e,a)}.bind(this);n.on(Be.a.FRAG_DECRYPTED,o),n.on(Be.a.FRAG_PARSING_INIT_SEGMENT,o),n.on(Be.a.FRAG_PARSING_DATA,o),n.on(Be.a.FRAG_PARSED,o),n.on(Be.a.ERROR,o),n.on(Be.a.FRAG_PARSING_METADATA,o),n.on(Be.a.FRAG_PARSING_USERDATA,o),n.on(Be.a.INIT_PTS_FOUND,o);var i={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported("audio/mp4; codecs=\"mp3\"")},s=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){je.b.log("demuxing in webworker");var l;try{l=this.w=dt()(9),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){t.trigger(Be.a.ERROR,{type:Ge.b.OTHER_ERROR,details:Ge.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:i,vendor:s,id:a,config:JSON.stringify(r)})}catch(e){je.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new ot.a(n,i,r,s),this.w=void 0}}else this.demuxer=new ot.a(n,i,r,s)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var a=this.observer;a&&(a.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,a,n,r,o,i,s){var l=this.w,d=isNaN(r.startDTS)?r.start:r.startDTS,p=r.decryptdata,u=this.frag,c=!(u&&r.cc===u.cc),f=!(u&&r.level===u.level),g=u&&r.sn===u.sn+1,m=!f&&g;if(c&&je.b.log(this.id+":discontinuity detected"),f&&je.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:e,decryptdata:p,initSegment:t,audioCodec:a,videoCodec:n,timeOffset:d,discontinuity:c,trackSwitch:f,contiguous:m,duration:o,accurateTimeOffset:i,defaultInitPTS:s},[e]);else{var y=this.demuxer;y&&y.push(e,p,t,a,n,d,c,f,m,o,i,s)}},e.prototype.onWorkerMessage=function(e){var t=e.data,a=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case Be.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,a.trigger(t.event,t.data);}},e}(),ut=pt,ct={toString:function(e){for(var t="",a=e.length,n=0;n<a;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}},ft=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),gt={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},mt=function(e){function t(a){F(this,t);var n=B(this,e.call(this,a,Be.a.MEDIA_ATTACHED,Be.a.MEDIA_DETACHING,Be.a.MANIFEST_LOADING,Be.a.MANIFEST_PARSED,Be.a.LEVEL_LOADED,Be.a.KEY_LOADED,Be.a.FRAG_LOADED,Be.a.FRAG_LOAD_EMERGENCY_ABORTED,Be.a.FRAG_PARSING_INIT_SEGMENT,Be.a.FRAG_PARSING_DATA,Be.a.FRAG_PARSED,Be.a.ERROR,Be.a.AUDIO_TRACK_SWITCHING,Be.a.AUDIO_TRACK_SWITCHED,Be.a.BUFFER_CREATED,Be.a.BUFFER_APPENDED,Be.a.BUFFER_FLUSHED));return n.config=a.config,n.audioCodecSwap=!1,n.ticks=0,n._state=gt.STOPPED,n.ontick=n.tick.bind(n),n}return G(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Ye.prototype.destroy.call(this),this.state=gt.STOPPED},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,a=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=a.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=a.nextLoadLevel=n,this.loadedmetadata=!1}0<t&&-1===e&&(je.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=gt.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=gt.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=gt.STOPPED,this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case gt.ERROR:break;case gt.BUFFER_FLUSHING:this.fragLoadError=0;break;case gt.IDLE:this._doTickIdle();break;case gt.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=gt.IDLE);break;case gt.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),a=this.retryDate;(!a||t>=a||this.media&&this.media.seeking)&&(je.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=gt.IDLE);break;case gt.ERROR:case gt.STOPPED:case gt.FRAG_LOADING:case gt.PARSING:case gt.PARSED:case gt.ENDED:break;default:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,a=this.media;if(void 0!==this.levelLastLoaded&&(a||!this.startFragRequested&&t.startFragPrefetch)){var n=this.loadedmetadata?a.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,o=this.levels[r];if(o){var i=o.bitrate,s;s=i?l(8*t.maxBufferSize/i,t.maxBufferLength):t.maxBufferLength,s=f(s,t.maxMaxBufferLength);var d=rt.bufferInfo(this.mediaBuffer?this.mediaBuffer:a,n,t.maxBufferHole),p=d.len;if(!(p>=s)){je.b.trace("buffer length of "+p.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var u=o.details;if("undefined"==typeof u||u.live&&this.levelLastLoaded!==r)return void(this.state=gt.WAITING_LEVEL);var c=this.fragPrevious;if(!u.live&&c&&!c.backtracked&&c.sn===u.endSN&&!d.nextStart){var g=f(a.duration,c.start+c.duration);if(g-l(d.end,c.start)<=l(.2,c.duration)){var m={};return this.altAudio&&(m.type="video"),this.hls.trigger(Be.a.BUFFER_EOS,m),void(this.state=gt.ENDED)}}this._fetchPayloadOrEos(n,d,u)}}}},t.prototype._fetchPayloadOrEos=function(e,t,a){var n=this.fragPrevious,r=this.level,o=a.fragments,i=o.length;if(0!==i){var s=o[0].start,l=o[i-1].start+o[i-1].duration,d=t.end,p;if(a.initSegment&&!a.initSegment.data)p=a.initSegment;else if(a.live){var u=this.config.initialLiveManifestSize;if(i<u)return void je.b.warn("Can not start playback of a level, reason: not enough fragments "+i+" < "+u);if(p=this._ensureFragmentAtLivePoint(a,d,s,l,n,o,i),null===p)return}else d<s&&(p=o[0]);return p||(p=this._findFragment(s,n,i,o,d,l,a)),void(p&&this._loadFragmentOrKey(p,r,a,e,d))}},t.prototype._ensureFragmentAtLivePoint=function(e,t,a,n,r,o,i){var s=this.hls.config,p=this.media,u=void 0,c=void 0===s.liveMaxLatencyDuration?s.liveMaxLatencyDurationCount*e.targetduration:s.liveMaxLatencyDuration;if(t<l(a-s.maxFragLookUpTolerance,n-c)){var g=this.liveSyncPosition=this.computeLivePosition(a,e);je.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+g.toFixed(3)),t=g,p&&p.readyState&&p.duration>g&&(p.currentTime=g),this.nextLoadPosition=g}if(e.PTSKnown&&t>n&&p&&p.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r){var m=r.sn+1;if(m>=e.startSN&&m<=e.endSN){var y=o[m-e.startSN];r.cc===y.cc&&(u=y,je.b.log("live playlist, switching playlist, load frag with next SN: "+u.sn))}u||(u=nt.search(o,function(e){return r.cc-e.cc}),u&&je.b.log("live playlist, switching playlist, load frag with same CC: "+u.sn))}u||(u=o[f(i-1,d(i/2))],je.b.log("live playlist, switching playlist, unknown, load middle frag : "+u.sn))}return u},t.prototype._findFragment=function(e,t,a,n,r,o,i){var s=this.hls.config,l=void 0,d=void 0,p=s.maxFragLookUpTolerance,u=t?n[t.sn-n[0].sn+1]:void 0,c=function(e){var t=f(p,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(r<o?(r>o-p&&(p=0),d=u&&!c(u)?u:nt.search(n,c)):d=n[a-1],d){l=d;var g=l.sn-i.startSN,m=t&&l.level===t.level,y=n[g-1],h=n[g+1];if(t&&l.sn===t.sn)if(!m||l.backtracked)l.backtracked&&(h&&h.backtracked?(je.b.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+h.sn),l=h):(je.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,y?(y.loadCounter&&y.loadCounter--,l=y,l.backtracked=!0):g&&(l=null)));else if(l.sn<i.endSN){var b=t.deltaPTS;b&&b>s.maxBufferHole&&t.dropped&&g?(l=y,je.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=h,je.b.log("SN just loaded, load next one: "+l.sn))}else l=null}return l},t.prototype._loadFragmentOrKey=function(e,t,a,n,o){var i=this.hls,s=i.config;if(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key)je.b.log("Loading key for "+e.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t),this.state=gt.KEY_LOADING,i.trigger(Be.a.KEY_LOADING,{frag:e});else{if(je.b.log("Loading "+e.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+o.toFixed(3)),void 0===this.fragLoadIdx?this.fragLoadIdx=0:this.fragLoadIdx++,e.loadCounter){e.loadCounter++;var l=s.fragLoadingLoopThreshold;if(e.loadCounter>l&&r(this.fragLoadIdx-e.loadIdx)<l)return void i.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=i.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),i.trigger(Be.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new ut(i,"main")),void(this.state=gt.FRAG_LOADING)}},t.prototype.getBufferedFrag=function(e){return nt.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e=this.media,t,a;if(e&&e.readyState&&!1===e.seeking&&(a=e.currentTime,a>e.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=a),rt.isBuffered(e,a)?t=this.getBufferedFrag(a):rt.isBuffered(e,a+.1)&&(t=this.getBufferedFrag(a+.1)),t)){var n=t;if(n!==this.fragPlaying){this.hls.trigger(Be.a.FRAG_CHANGED,{frag:n});var r=n.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(Be.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=n}}},t.prototype.immediateLevelSwitch=function(){if(je.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var a=this.fragCurrent;a&&a.loader&&a.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,rt.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),!this.previouslyPaused&&e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,a,n;if(void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),a=this.getBufferedFrag(e.currentTime),a&&1<a.startPTS&&this.flushMainBuffer(0,a.startPTS-1),!e.paused){var r=this.hls.nextLoadLevel,o=this.levels[r],i=this.fragLastKbps;t=i&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*i)+1:0}else t=0;if(n=this.getBufferedFrag(e.currentTime+t),n&&(n=this.followingBufferedFrag(n),n)){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=gt.BUFFER_FLUSHING;var a={startOffset:e,endOffset:t};this.altAudio&&(a.type="video"),this.hls.trigger(Be.a.BUFFER_FLUSHING,a)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var a=this.config;this.levels&&a.autoStartLoad&&this.hls.startLoad(a.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(je.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,a=this.config;isNaN(t)||je.b.log("media seeking to "+t.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:e,r=rt.bufferInfo(n,t,this.config.maxBufferHole);if(this.state===gt.FRAG_LOADING){var o=this.fragCurrent;if(0===r.len&&o){var i=a.maxFragLookUpTolerance,s=o.start-i,l=o.start+o.duration+i;t<s||t>l?(o.loader&&(je.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=gt.IDLE):je.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===gt.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=gt.IDLE);e&&(this.lastCurrentTime=t),this.state!==gt.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*a.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||je.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){je.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){je.b.log("trigger BUFFER_RESET"),this.hls.trigger(Be.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t=!1,a=!1,n;e.levels.forEach(function(e){n=e.audioCodec,n&&(-1!==n.indexOf("mp4a.40.2")&&(t=!0),-1!==n.indexOf("mp4a.40.5")&&(a=!0))}),this.audioCodecSwitch=t&&a,this.audioCodecSwitch&&je.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,a=e.level,n=this.levels[this.levelLastLoaded],r=this.levels[a],o=t.totalduration,i=0;if(je.b.log("level "+a+" loaded ["+t.startSN+","+t.endSN+"],duration:"+o),t.live){var s=r.details;s&&0<t.fragments.length?(x(s,t),i=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(i,s),t.PTSKnown&&!isNaN(i)?je.b.log("live playlist sliding:"+i.toFixed(3)):(je.b.log("live playlist - outdated PTS, unknown sliding"),N(this.fragPrevious,n,t))):(je.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,N(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=a,this.hls.trigger(Be.a.LEVEL_UPDATED,{details:t,level:a}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;isNaN(l)?t.live?(this.startPosition=this.computeLivePosition(i,t),je.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(0>l&&(je.b.log("negative start time offset "+l+", count from end of last fragment"),l=i+o+l),je.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===gt.WAITING_LEVEL&&(this.state=gt.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===gt.KEY_LOADING&&(this.state=gt.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,a=e.frag;if(this.state===gt.FRAG_LOADING&&t&&"main"===a.type&&a.level===t.level&&a.sn===t.sn){var n=e.stats,r=this.levels[t.level],o=r.details;if(je.b.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,!0===a.bitrateTest&&this.hls.nextLoadLevel)this.state=gt.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(Be.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=gt.IDLE,n.tparsed=n.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(Be.a.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=gt.PARSING;var i=o.totalduration,s=t.level,l=t.sn,d=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(je.b.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(-1===d.indexOf("mp4a.40.5")?d="mp4a.40.5":d="mp4a.40.2")),this.pendingBuffering=!0,this.appended=!1,je.b.log("Parsing "+l+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+t.cc);var p=this.demuxer;p||(p=this.demuxer=new ut(this.hls,"main"));var u=this.media,c=u&&u.seeking,f=!c&&(o.PTSKnown||!o.live),g=o.initSegment?o.initSegment.data:[];p.push(e.payload,g,d,r.videoCodec,t,i,f,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,a=e.frag;if(t&&"main"===e.id&&a.sn===t.sn&&a.level===t.level&&this.state===gt.PARSING){var n=e.tracks,r,o;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio,o){var i=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();i&&this.audioCodecSwap&&(je.b.log("swapping playlist audio codec"),i=-1===i.indexOf("mp4a.40.5")?"mp4a.40.5":"mp4a.40.2"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(i="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(i="mp4a.40.2",je.b.log("Android: force audio codec to "+i)),o.levelCodec=i,o.id=e.id}for(r in o=n.video,o&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(Be.a.BUFFER_CODECS,n),n){o=n[r],je.b.log("main track:"+r+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var l=o.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Be.a.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,a=this.fragCurrent,n=e.frag;if(a&&"main"===e.id&&n.sn===a.sn&&n.level===a.level&&!("audio"===e.type&&this.altAudio)&&this.state===gt.PARSING){var r=this.levels[this.level],o=a;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+a.duration,e.endDTS=e.startDTS+a.duration),je.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped){if(!o.backtracked)return je.b.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=gt.IDLE,this.fragPrevious=o,void this.tick();je.b.warn("Already backtracked on this fragment, appending with the gap")}else o.backtracked=!1;var i=D(r.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(Be.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:i,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(a){a&&a.length&&t.state===gt.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(Be.a.BUFFER_APPENDING,{type:e.type,data:a,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,a=e.frag;t&&"main"===e.id&&a.sn===t.sn&&a.level===t.level&&this.state===gt.PARSING&&(this.stats.tparsed=performance.now(),this.state=gt.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,a=e.id;if(!t){if(this.mediaBuffer!==this.media){je.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(je.b.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=gt.IDLE}var r=this.hls;r.trigger(Be.a.BUFFER_FLUSHING,{startOffset:0,endOffset:s,type:"audio"}),r.trigger(Be.a.AUDIO_TRACK_SWITCHED,{id:a}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,a=!!this.hls.audioTracks[t].url;if(a){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(je.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=a,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,a=!1,n,r;for(var o in t){var i=t[o];"main"===i.id?(r=o,n=i,"video"===o&&(this.videoBuffer=t[o].buffer)):a=!0}a&&n?(je.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;(t===gt.PARSING||t===gt.PARSED)&&(this.pendingBuffering=0<e.pending,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(this.state===gt.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;je.b.log("main buffered : "+ct.toString(t.buffered));var a=this._bufferedFrags.filter(function(e){return rt.isBuffered(t,(e.startPTS+e.endPTS)/2)});a.push(e),this._bufferedFrags=a.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=d(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(Be.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=gt.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!(t&&"main"!==t.type)){var a=!!this.media&&rt.isBuffered(this.media,this.media.currentTime)&&rt.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case Ge.a.FRAG_LOAD_ERROR:case Ge.a.FRAG_LOAD_TIMEOUT:case Ge.a.KEY_LOAD_ERROR:case Ge.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=f(p(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,je.b.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=gt.FRAG_LOADING_WAITING_RETRY}else je.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=gt.ERROR;break;case Ge.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(a?(this._reduceMaxBufferLength(t.duration),this.state=gt.IDLE):(!t.autoLevel||0===t.level)&&(e.fatal=!0,this.state=gt.ERROR));break;case Ge.a.LEVEL_LOAD_ERROR:case Ge.a.LEVEL_LOAD_TIMEOUT:this.state!==gt.ERROR&&(e.fatal?(this.state=gt.ERROR,je.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):!e.levelRetry&&this.state===gt.WAITING_LEVEL&&(this.state=gt.IDLE));break;case Ge.a.BUFFER_FULL_ERROR:"main"===e.parent&&(this.state===gt.PARSING||this.state===gt.PARSED)&&(a?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=gt.IDLE):(je.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)));break;default:}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,je.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*t.fragLoadingLoopThreshold))},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var a=e.currentTime,n=this.mediaBuffer?this.mediaBuffer:e,o=n.buffered;if(!this.loadedmetadata&&o.length){this.loadedmetadata=!0;var i=e.seeking?a:this.startPosition,s=rt.isBuffered(n,i),l=o.start(0),p=!s&&r(i-l)<t.maxSeekHole;(a!==i||p)&&(je.b.log("target start position:"+i),p&&(i=l,je.b.log("target start position not buffered, seek to buffered.start(0) "+i)),je.b.log("adjust currentTime from "+a+" to "+i),e.currentTime=i)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var u=rt.bufferInfo(e,a,0),c=!(e.paused||e.ended||0===e.buffered.length),f=.5,g=a!==this.lastCurrentTime;if(g)this.stallReported&&(je.b.warn("playback not stuck anymore @"+a+", after "+d(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(c){var m=performance.now(),y=this.hls;if(!this.stalled)this.stalled=m,this.stallReported=!1;else{var h=m-this.stalled,b=u.len,v=this.nudgeRetry||0;if(b<=f&&h>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,je.b.warn("playback stalling in low buffer @"+a),y.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:b}));var I=u.nextStart,E=I-a;if(I&&E<t.maxSeekHole&&0<E){this.nudgeRetry=++v;var S=v*t.nudgeOffset;je.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+I+" + nudge "+S),e.currentTime=I+S,this.stalled=void 0,y.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:I+S-a})}}else if(b>f&&h>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,je.b.warn("playback stalling in high buffer @"+a),y.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:b})),this.stalled=void 0,this.nudgeRetry=++v,v<t.nudgeMaxRetry){var T=e.currentTime,A=T+v*t.nudgeOffset;je.b.log("adjust currentTime from "+T+" to "+A),e.currentTime=A,y.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else je.b.error("still stuck in high buffer @"+a+" after "+t.nudgeMaxRetry+", raise fatal error"),y.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_STALLED_ERROR,fatal:!0})}}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=gt.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return rt.isBuffered(e,(t.startPTS+t.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=gt.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var a=void 0===this.config.liveSyncDuration?this.config.liveSyncDurationCount*t.targetduration:this.config.liveSyncDuration;return e+l(0,t.totalduration-a)},ft(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,je.b.log("main stream:"+t+"->"+e),this.hls.trigger(Be.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(Ye),yt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),ht=function(e){function t(a){j(this,t);var n=U(this,e.call(this,a,Be.a.MANIFEST_LOADED,Be.a.LEVEL_LOADED,Be.a.FRAG_LOADED,Be.a.ERROR));return n._manualLevel=-1,n.timer=null,n}return Z(t,e),t.prototype.destroy=function(){this.cleanTimer(),this._manualLevel=-1},t.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t=[],a={},n=null,r=!1,o=!1,s=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),l;if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,r=r||!!e.videoCodec,o=o||!!e.audioCodec||!!(e.attrs&&e.attrs.AUDIO),!0===s&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),n=a[e.bitrate],void 0===n?(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,t.push(e)):n.url.push(e.url)}),!0===r&&!0===o&&(t=t.filter(function(e){var t=e.videoCodec;return!!t})),t=t.filter(function(e){var t=e.audioCodec,a=e.videoCodec;return(!t||y(t))&&(!a||y(a))}),0<t.length){l=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var d=0;d<t.length;d++)if(t[d].bitrate===l){this._firstLevel=d,je.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+l);break}this.hls.trigger(Be.a.MANIFEST_PARSED,{levels:t,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:r,altAudio:0<e.audioTracks.length})}else this.hls.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,a=this.hls;if(0<=e&&e<t.length){if(this.cleanTimer(),this._level!==e){je.b.log("switching to level "+e),this._level=e;var n=t[e];n.level=e,a.trigger(Be.a.LEVEL_SWITCH,n),a.trigger(Be.a.LEVEL_SWITCHING,n)}var r=t[e],o=r.details;if(!o||!0===o.live){var i=r.urlId;a.trigger(Be.a.LEVEL_LOADING,{url:r.url[i],level:e,id:i})}}else a.trigger(Be.a.ERROR,{type:Ge.b.OTHER_ERROR,details:Ge.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){var t=this;if(!0===e.fatal)return void(e.type===Ge.b.NETWORK_ERROR&&this.cleanTimer());var a=e.details,n=!1,r=!1,o=void 0,i=void 0,s=this.hls,d=s.config,p=s.media;if(a===Ge.a.FRAG_LOAD_ERROR||a===Ge.a.FRAG_LOAD_TIMEOUT||a===Ge.a.FRAG_LOOP_LOADING_ERROR||a===Ge.a.KEY_LOAD_ERROR||a===Ge.a.KEY_LOAD_TIMEOUT?(o=e.frag.level,r=!0):a===Ge.a.LEVEL_LOAD_ERROR||a===Ge.a.LEVEL_LOAD_TIMEOUT?(o=e.context.level,n=!0):a===Ge.a.REMUX_ALLOC_ERROR?o=e.level:void 0,void 0!==o){i=this._levels[o],i.loadError++,i.fragmentError=r;var u=i.url.length;if(1<u&&i.loadError<u)i.urlId=(i.urlId+1)%u,i.details=void 0,je.b.warn("level controller,"+a+" for level "+o+": switching to redundant stream id "+i.urlId);else if(-1===this._manualLevel&&0!==o)je.b.warn("level controller,"+a+": switch-down for next fragment"),this.hls.nextAutoLevel=l(0,o-1);else if(i&&i.details&&i.details.live)je.b.warn("level controller,"+a+" on live stream, discard"),!0===n&&(this._level=void 0);else if(!0===n){var c=!!p&&rt.isBuffered(p,p.currentTime)&&rt.isBuffered(p,p.currentTime+.5);!0===c?(je.b.warn("level controller,"+a+", but media buffered, retry in "+d.levelLoadingRetryDelay+"ms"),this.timer=setTimeout(function(){return t.tick()},d.levelLoadingRetryDelay),e.levelRetry=!0):(je.b.error("cannot recover "+a+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0)}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var a=this._levels[t.level];void 0!==a&&(a.fragmentError=!1,a.loadError=0)}},t.prototype.onLevelLoaded=function(e){var t=this,a=e.level;if(a===this._level){var n=this._levels[a];!1===n.fragmentError&&(n.loadError=0);var r=e.details;if(r.live){var o=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),i=n.details;i&&r.endSN===i.endSN&&(o/=2,je.b.log("same live playlist, reload twice faster")),o-=performance.now()-e.stats.trequest,o=l(1e3,d(o)),je.b.log("live playlist, reload in "+o+" ms"),this.timer=setTimeout(function(){return t.tick()},o)}else this.cleanTimer()}},t.prototype.tick=function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var a=t.urlId;this.hls.trigger(Be.a.LEVEL_LOADING,{url:t.url[a],level:e,id:a})}}},yt(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level!==e||void 0===t[e].details)&&this.setLevelInternal(e)}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0===e?this._firstLevel:e}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1===this._manualLevel?this.hls.nextAutoLevel:this._manualLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(Ye),bt=a(3),vt=function(e){function t(a){Y(this,t);var n=z(this,e.call(this,a,Be.a.MEDIA_ATTACHED,Be.a.MEDIA_DETACHING,Be.a.FRAG_PARSING_METADATA));return n.id3Track=void 0,n.media=void 0,n}return W(t,e),t.prototype.destroy=function(){Ye.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,!this.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,a=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0,o;r<a.length;r++)if(o=bt.a.getID3Frames(a[r].data),o){var s=a[r].pts,l=r<a.length-1?a[r+1].pts:t.endPTS;s===l&&(l+=1e-4);for(var d=0,p;d<o.length;d++)if(p=o[d],!bt.a.isTimeStampFrame(p)){var u=new n(s,l,"");u.value=p,this.id3Track.addCue(u)}}},t}(Ye),It=function(){function e(t){var a=Math.exp;H(this,e),this.alpha_=t?a(n(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var a=p(this.alpha_,e);this.estimate_=t*(1-a)+a*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-p(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),Et=It,St=function(){function e(t,a,n,r){V(this,e),this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Et(a),this.fast_=new Et(n)}return e.prototype.sample=function(e,t){e=l(e,this.minDelayMs_);var a=8e3*t/e,n=e/1e3;this.fast_.sample(n,a),this.slow_.sample(n,a)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?f(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),Tt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),At=function(e){function t(a){J(this,t);var n=K(this,e.call(this,a,Be.a.FRAG_LOADING,Be.a.FRAG_LOADED,Be.a.FRAG_BUFFERED,Be.a.ERROR));return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=a,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return X(t,e),t.prototype.destroy=function(){this.clearTimer(),Ye.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var a=this.hls,n=e.frag.level,r=a.levels[n].details.live,o=a.config,i,s;r?(i=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(i=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new St(a,s,i,o.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,a=this.fragCurrent,n=a.loader,o=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return je.b.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var i=n.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&a.autoLevel&&a.level){var s=performance.now()-i.trequest,p=r(t.playbackRate);if(s>500*a.duration/p){var u=e.levels,c=l(1,i.bw?i.bw/8:1e3*i.loaded/s),f=u[a.level],g=f.realBitrate?l(f.realBitrate,f.bitrate):f.bitrate,m=i.total?i.total:l(i.loaded,d(a.duration*g/8)),y=t.currentTime,h=(m-i.loaded)/c,b=(rt.bufferInfo(t,y,e.config.maxBufferHole).end-y)/p;if(b<2*a.duration/p&&h>b){var v,I;for(I=a.level-1;I>o;I--){var E=u[I].realBitrate?l(u[I].realBitrate,u[I].bitrate):u[I].bitrate;if(v=a.duration*E/(8*.8*c),v<b)break}v<h&&(je.b.warn("loading too slow, abort fragment loading and switch to level "+I+":fragLoadedDelay["+I+"]<fragLoadedDelay["+(a.level-1)+"];bufferStarvationDelay:"+v.toFixed(1)+"<"+h.toFixed(1)+":"+b.toFixed(1)),e.nextLoadLevel=I,this._bwEstimator.sample(s,i.loaded),n.abort(),this.clearTimer(),e.trigger(Be.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:a,stats:i}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var a=this.hls.levels[t.level],n=(a.loaded?a.loaded.bytes:0)+e.stats.loaded,r=(a.loaded?a.loaded.duration:0)+e.frag.duration;a.loaded={bytes:n,duration:r},a.realBitrate=d(8*n/r)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,a=e.frag;if(!0!==t.aborted&&1===a.loadCounter&&"main"===a.type&&!isNaN(a.sn)&&(!a.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;je.b.log("latency/loading/parsing/append/kbps:"+d(t.tfirst-t.trequest)+"/"+d(t.tload-t.tfirst)+"/"+d(t.tparsed-t.tload)+"/"+d(t.tbuffered-t.tparsed)+"/"+d(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),this.bitrateTestDelay=a.bitrateTest?n/1e3:0}},t.prototype.onError=function(e){switch(e.details){case Ge.a.FRAG_LOAD_ERROR:case Ge.a.FRAG_LOAD_TIMEOUT:this.clearTimer();break;default:}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,a,n,r,o,s,p,u){for(var c=r;c>=n;c--){var f=u[c],g=f.details,m=g?g.totalduration/g.fragments.length:t,y=!!g&&g.live,h=void 0;h=c<=e?s*a:p*a;var b=u[c].realBitrate?l(u[c].realBitrate,u[c].bitrate):u[c].bitrate,v=b*m/h;if(je.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+d(h)+"/"+b+"/"+m+"/"+o+"/"+v),h>b&&(!v||y&&!this.bitrateTestDelay||v<o))return c}return-1},Tt(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var a=this._nextABRAutoLevel;return-1!==e&&(a=f(e,a)),a},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,a=e.levels,n=e.config,o=e.minAutoLevel,i=e.media,s=this.lastLoadedFragLevel,p=this.fragCurrent?this.fragCurrent.duration:0,u=i?i.currentTime:0,c=i&&0!==i.playbackRate?r(i.playbackRate):1,g=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,m=(rt.bufferInfo(i,u,n.maxBufferHole).end-u)/c,y=this._findBestLevel(s,p,g,o,t,m,n.abrBandWidthFactor,n.abrBandWidthUpFactor,a);if(0<=y)return y;je.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h=p?f(p,n.maxStarvationDelay):n.maxStarvationDelay,b=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===m){var I=this.bitrateTestDelay;if(I){var E=p?f(p,n.maxLoadingDelay):n.maxLoadingDelay;h=E-I,je.b.trace("bitrate test took "+d(1e3*I)+"ms, set first fragment max fetchDuration to "+d(1e3*h)+" ms"),b=v=1}}return y=this._findBestLevel(s,p,g,o,t,m+h,b,v,a),l(y,0)}}]),t}(Ye),Lt=function(e){function t(a){Q(this,t);var n=q(this,e.call(this,a,Be.a.MEDIA_ATTACHING,Be.a.MEDIA_DETACHING,Be.a.MANIFEST_PARSED,Be.a.BUFFER_RESET,Be.a.BUFFER_APPENDING,Be.a.BUFFER_CODECS,Be.a.BUFFER_EOS,Be.a.BUFFER_FLUSHING,Be.a.LEVEL_PTS_UPDATED,Be.a.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return $(t,e),t.prototype.destroy=function(){Ye.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,a=this.tracks.audio;if("audio"===t&&a&&"audio/mpeg"===a.container){var n=this.sourceBuffer.audio,o=r(n.timestampOffset-e.start);if(.1<o){var i=n.updating;try{n.abort()}catch(e){i=!0,je.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(je.b.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,a=e.video||e.levels.length&&e.audio,n=0;e.altAudio&&(t||a)&&(n=(t?1:0)+(a?1:0),je.b.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var a=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),a.addEventListener("sourceopen",this.onmso),a.addEventListener("sourceended",this.onmse),a.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(a)}},t.prototype.onMediaDetaching=function(){je.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){je.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(Be.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){je.b.log("media source opened"),this.hls.trigger(Be.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){je.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){je.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;je.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,a=this.segments.reduce(function(e,a){return a.parent===t?e+1:e},0);this.hls.trigger(Be.a.BUFFER_APPENDED,{parent:t,pending:a}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){je.b.error("sourceBuffer error:",e),this.hls.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var a=e[t];try{this.mediaSource.removeSourceBuffer(a),a.removeEventListener("updateend",this.onsbue),a.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var a=this.mediaSource;a&&"open"===a.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,a=this.mediaSource;for(var n in e)if(!t[n]){var r=e[n],o=r.levelCodec||r.codec,i=r.container+";codecs="+o;je.b.log("creating sourceBuffer("+i+")");try{var s=t[n]=a.addSourceBuffer(i);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:r.container},r.buffer=s}catch(e){je.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:i})}}this.hls.trigger(Be.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){je.b.error("sourceBuffer error:",e.event),this.hls.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,a=e.type;for(var n in t)(!a||n===a)&&(t[n].ended||(t[n].ended=!0,je.b.log(n+" sourceBuffer now EOS")));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var a in e){var n=e[a];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}je.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(t){je.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;0===t.fragments.length||(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e=this.media,t=this.mediaSource,a=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&a&&0!==e.readyState&&"open"===t.readyState){for(var r in a)if(a[r].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var o=e.duration;(n>this._msDuration&&n>o||o===1/0||isNaN(o))&&(je.b.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(this.flushBuffer(e.start,e.end,e.type))this.flushRange.shift(),this.flushBufferCounter=0;else return void(this._needsFlush=!0)}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,a=this.sourceBuffer;try{for(var n in a)t+=a[n].buffered.length}catch(e){je.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(Be.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,a=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void je.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(a&&a.length){var n=a.shift();try{var r=n.type,o=t[r];o?o.updating?a.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){je.b.error("error while trying to append buffer:"+t.message),a.unshift(n);var i={type:Ge.b.MEDIA_ERROR,parent:n.parent};if(22!==t.code){if(this.appendError?this.appendError++:this.appendError=1,i.details=Ge.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return je.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),a=[],i.fatal=!0,void e.trigger(Be.a.ERROR,i);i.fatal=!1,e.trigger(Be.a.ERROR,i)}else return this.segments=[],i.details=Ge.a.BUFFER_FULL_ERROR,i.fatal=!1,void e.trigger(Be.a.ERROR,i)}}}},t.prototype.flushBuffer=function(e,t,a){var n=this.sourceBuffer,r,o,d,p,u,c;if(Object.keys(n).length){if(je.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var g in n)if(!(a&&g!==a))if(r=n[g],r.ended=!1,!r.updating)try{for(o=0;o<r.buffered.length;o++)if(d=r.buffered.start(o),p=r.buffered.end(o),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===s?(u=e,c=t):(u=l(d,e),c=f(p,t)),.5<f(c,p)-u)return this.flushBufferCounter++,je.b.log("flush "+g+" ["+u+","+c+"], of ["+d+","+p+"], pos:"+this.media.currentTime),r.remove(u,c),!1}catch(t){je.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}else return je.b.warn("cannot flush, sb updating in progress"),!1;}else je.b.warn("abort flushing too many retries");je.b.log("buffer flushed")}return!0},t}(Ye),wt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Ct=function(e){function t(a){return ee(this,t),te(this,e.call(this,a,Be.a.FPS_DROP_LEVEL_CAPPING,Be.a.MEDIA_ATTACHING,Be.a.MANIFEST_PARSED))}return ae(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=s,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=s,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var a=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,r){return t.isLevelAllowed(r,a.restrictedLevels)&&r<=e});return t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,a){if(!e||e&&!e.length)return-1;for(var n=function(e,t){return!t||e.width!==t.width||e.height!==t.height},r=e.length-1,o=0,s;o<e.length;o+=1)if(s=e[o],(s.width>=t||s.height>=a)&&n(s,e[o+1])){r=o;break}return r},wt(t,[{key:"mediaWidth",get:function(){var e=void 0,a=this.media;return a&&(e=a.width||a.clientWidth||a.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,a=this.media;return a&&(e=a.height||a.clientHeight||a.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(t){}return e}}]),t}(Ye),Rt=function(e){function t(a){return ne(this,t),re(this,e.call(this,a,Be.a.MEDIA_ATTACHING))}return oe(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var a=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof a.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},t.prototype.checkFPS=function(e,t,a){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,o=a-this.lastDroppedFrames,i=t-this.lastDecodedFrames,s=this.hls;if(s.trigger(Be.a.FPS_DROP,{currentDropped:o,currentDecoded:i,totalDroppedFrames:a}),0<1e3*o/r&&o>s.config.fpsDroppedMonitoringThreshold*i){var l=s.currentLevel;je.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),0<l&&(-1===s.autoLevelCapping||s.autoLevelCapping>=l)&&(--l,s.trigger(Be.a.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:s.currentLevel}),s.autoLevelCapping=l,s.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=a,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(Ye),Dt=function(){function e(t){ie(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,a){this.context=e,this.config=t,this.callbacks=a,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var t=this.context,a;a=this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(a,t.url)}catch(n){a.open("GET",t.url,!0),r(a,t.url)}a.readyState||a.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:a.status,text:n.message},t,a)}t.rangeEnd&&a.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),a.onreadystatechange=this.readystatechange.bind(this),a.onprogress=this.loadprogress.bind(this),a.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),a.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,a=t.readyState,n=this.stats,r=this.context,o=this.config;if(!n.aborted&&2<=a)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=l(performance.now(),n.trequest)),4===a){var i=t.status;if(200<=i&&300>i){n.tload=l(n.tfirst,performance.now());var s,d;"arraybuffer"===r.responseType?(s=t.response,d=s.byteLength):(s=t.responseText,d=s.length),n.loaded=n.total=d;var p={url:t.responseURL,data:s};this.callbacks.onSuccess(p,n,r,t)}else n.retry>=o.maxRetry||400<=i&&499>i?(je.b.error(i+" while loading "+r.url),this.callbacks.onError({code:i,text:t.statusText},r,t)):(je.b.warn(i+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=f(2*this.retryDelay,o.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)},e.prototype.loadtimeout=function(){je.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,a=this.stats;a.loaded=e.loaded,e.lengthComputable&&(a.total=e.total);var n=this.callbacks.onProgress;n&&n(a,this.context,null,t)},e}(),xt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_t=function(e){function t(a){se(this,t);var n=le(this,e.call(this,a,Be.a.MANIFEST_LOADING,Be.a.MANIFEST_LOADED,Be.a.AUDIO_TRACK_LOADED,Be.a.ERROR));return n.ticks=0,n.ontick=n.tick.bind(n),n}return de(t,e),t.prototype.destroy=function(){this.cleanTimer(),Ye.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===Ge.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,a=e.audioTracks||[],n=!1;this.tracks=a,this.hls.trigger(Be.a.AUDIO_TRACKS_UPDATED,{audioTracks:a});var r=0;a.forEach(function(e){return e.default&&!n?(t.audioTrack=r,void(n=!0)):void r++}),!1===n&&a.length&&(je.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(je.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(0<=e&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,je.b.log("switching to audioTrack "+e);var t=this.tracks[e],a=this.hls,n=t.type,r=t.url,o={id:e,type:n,url:r};a.trigger(Be.a.AUDIO_TRACK_SWITCH,o),a.trigger(Be.a.AUDIO_TRACK_SWITCHING,o);var i=t.details;r&&(void 0===i||!0===i.live)&&(je.b.log("(re)loading playlist for audioTrack "+e),a.trigger(Be.a.AUDIO_TRACK_LOADING,{url:r,id:e}))}},t.prototype.updateTrack=function(e){if(0<=e&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,je.b.log("updating audioTrack "+e);var t=this.tracks[e],a=t.url,n=t.details;a&&(void 0===n||!0===n.live)&&(je.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(Be.a.AUDIO_TRACK_LOADING,{url:a,id:e}))}},xt(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){(this.trackId!==e||void 0===this.tracks[e].details)&&this.setAudioTrackInternal(e)}}]),t}(Ye),kt=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Pt={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},Ot=function(e){function t(a){pe(this,t);var n=ue(this,e.call(this,a,Be.a.MEDIA_ATTACHED,Be.a.MEDIA_DETACHING,Be.a.AUDIO_TRACKS_UPDATED,Be.a.AUDIO_TRACK_SWITCHING,Be.a.AUDIO_TRACK_LOADED,Be.a.KEY_LOADED,Be.a.FRAG_LOADED,Be.a.FRAG_PARSING_INIT_SEGMENT,Be.a.FRAG_PARSING_DATA,Be.a.FRAG_PARSED,Be.a.ERROR,Be.a.BUFFER_CREATED,Be.a.BUFFER_APPENDED,Be.a.BUFFER_FLUSHED,Be.a.INIT_PTS_FOUND));return n.config=a.config,n.audioCodecSwap=!1,n.ticks=0,n._state=Pt.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return ce(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Ye.prototype.destroy.call(this),this.state=Pt.STOPPED},t.prototype.onInitPtsFound=function(e){var t=e.id,a=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[a]=n,this.videoTrackCC=a,je.b.log("InitPTS for cc:"+a+" found from video track:"+n),this.state===Pt.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,0<t&&-1===e?(je.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Pt.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=Pt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=Pt.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Pt.STOPPED},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e=this.hls,t=e.config,a,n,o;switch(this.state){case Pt.ERROR:case Pt.PAUSED:case Pt.BUFFER_FLUSHING:break;case Pt.STARTING:this.state=Pt.WAITING_TRACK,this.loadedmetadata=!1;break;case Pt.IDLE:var i=this.tracks;if(!i)break;if(!this.media&&(this.startFragRequested||!t.startFragPrefetch))break;if(this.loadedmetadata)a=this.media.currentTime;else if(a=this.nextLoadPosition,void 0===a)break;var s=this.mediaBuffer?this.mediaBuffer:this.media,d=this.videoBuffer?this.videoBuffer:this.media,p=rt.bufferInfo(s,a,t.maxBufferHole),u=rt.bufferInfo(d,a,t.maxBufferHole),c=p.len,g=p.end,m=this.fragPrevious,y=l(t.maxBufferLength,u.len),h=this.audioSwitch,b=this.trackId;if((c<y||h)&&b<i.length){if(o=i[b].details,"undefined"==typeof o){this.state=Pt.WAITING_TRACK;break}if(!h&&!o.live&&m&&m.sn===o.endSN&&(!this.media.seeking||this.media.duration-g<m.duration/2)){this.hls.trigger(Be.a.BUFFER_EOS,{type:"audio"}),this.state=Pt.ENDED;break}var v=o.fragments,I=v.length,E=v[0].start,S=v[I-1].start+v[I-1].duration,T;if(h)if(o.live&&!o.PTSKnown)je.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),g=0;else if(g=a,o.PTSKnown&&a<E)if(p.end>E||p.nextStart)je.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=E+.05;else return;if(o.initSegment&&!o.initSegment.data)T=o.initSegment;else if(!(g<=E)){var A=void 0,L=t.maxFragLookUpTolerance,w=m?v[m.sn-v[0].sn+1]:void 0,C=function(e){var t=f(L,e.duration);return e.start+e.duration-t<=g?1:e.start-t>g&&e.start?-1:0};g<S?(g>S-L&&(L=0),A=w&&!C(w)?w:nt.search(v,C)):A=v[I-1],A&&(T=A,E=A.start,m&&T.level===m.level&&T.sn===m.sn&&(T.sn<o.endSN?(T=v[T.sn+1-o.startSN],je.b.log("SN just loaded, load next one: "+T.sn)):T=null))}else if(T=v[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=k(v,this.videoTrackCC)),o.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var R=p.nextStart?p.nextStart:E;return je.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(R+.05)),void(this.media.currentTime=R+.05)}if(T)if(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key)je.b.log("Loading key for "+T.sn+" of ["+o.startSN+" ,"+o.endSN+"],track "+b),this.state=Pt.KEY_LOADING,e.trigger(Be.a.KEY_LOADING,{frag:T});else{if(je.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+o.startSN+" ,"+o.endSN+"],track "+b+", currentTime:"+a+",bufferEnd:"+g.toFixed(3)),void 0===this.fragLoadIdx?this.fragLoadIdx=0:this.fragLoadIdx++,T.loadCounter){T.loadCounter++;var D=t.fragLoadingLoopThreshold;if(T.loadCounter>D&&r(this.fragLoadIdx-T.loadIdx)<D)return void e.trigger(Be.a.ERROR,{type:Ge.b.MEDIA_ERROR,details:Ge.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:T})}else T.loadCounter=1;T.loadIdx=this.fragLoadIdx,this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),e.trigger(Be.a.FRAG_LOADING,{frag:T}),this.state=Pt.FRAG_LOADING}}break;case Pt.WAITING_TRACK:n=this.tracks[this.trackId],n&&n.details&&(this.state=Pt.IDLE);break;case Pt.FRAG_LOADING_WAITING_RETRY:var x=performance.now(),_=this.retryDate;s=this.media;var P=s&&s.seeking;(!_||x>=_||P)&&(je.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Pt.IDLE);break;case Pt.WAITING_INIT_PTS:var O=this.videoTrackCC;if(void 0===this.initPTS[O])break;var M=this.waitingFragment;if(M){var N=M.frag.cc;O===N?(this.state=Pt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null):(n=this.tracks[this.trackId],n.details&&n.details.live&&(je.b.warn("Waiting fragment CC ("+N+") does not match video track CC ("+O+")"),this.waitingFragment=null,this.state=Pt.IDLE))}else this.state=Pt.IDLE;break;case Pt.STOPPED:case Pt.FRAG_LOADING:case Pt.PARSING:case Pt.PARSED:case Pt.ENDED:break;default:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var a=this.config;this.tracks&&a.autoStartLoad&&this.startLoad(a.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(je.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===Pt.ENDED&&(this.state=Pt.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){je.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=Pt.PAUSED,this.waitingFragment=null,t?!this.timer&&(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=Pt.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,a=e.id,n=this.tracks[a],r=t.totalduration,o=0;if(je.b.log("track "+a+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var i=n.details;i&&0<t.fragments.length?(x(i,t),o=t.fragments[0].start,t.PTSKnown?je.b.log("live audio playlist sliding:"+o.toFixed(3)):je.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,je.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(je.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===Pt.WAITING_TRACK&&(this.state=Pt.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Pt.KEY_LOADING&&(this.state=Pt.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,a=e.frag;if(this.state===Pt.FRAG_LOADING&&t&&"audio"===a.type&&a.level===t.level&&a.sn===t.sn){var n=this.tracks[this.trackId],r=n.details,o=r.totalduration,i=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",p=this.stats=e.stats;if("initSegment"===s)this.state=Pt.IDLE,p.tparsed=p.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(Be.a.FRAG_BUFFERED,{stats:p,frag:t,id:"audio"}),this.tick();else{this.state=Pt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new ut(this.hls,"audio"));var u=this.initPTS[l],c=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==u){this.pendingBuffering=!0,je.b.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+i);this.demuxer.push(e.payload,c,d,null,t,o,!1,u)}else je.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+i),this.waitingFragment=e,this.state=Pt.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,a=e.frag;if(t&&"audio"===e.id&&a.sn===t.sn&&a.level===t.level&&this.state===Pt.PARSING){var n=e.tracks,r;if(n.video&&delete n.video,r=n.audio,r){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(Be.a.BUFFER_CODECS,n),je.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;if(o){var i={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[i]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Be.a.BUFFER_APPENDING,i))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,a=this.fragCurrent,n=e.frag;if(a&&"audio"===e.id&&"audio"===e.type&&n.sn===a.sn&&n.level===a.level&&this.state===Pt.PARSING){var r=this.trackId,o=this.tracks[r],i=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+a.duration,e.endDTS=e.startDTS+a.duration),je.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),D(o.details,a,e.startPTS,e.endPTS);var l=this.audioSwitch,d=this.media,p=!1;if(l&&d)if(d.readyState){var u=d.currentTime;je.b.log("switching audio track : currentTime:"+u),u>=e.startPTS&&(je.b.log("switching audio track : flushing all audio"),this.state=Pt.BUFFER_FLUSHING,i.trigger(Be.a.BUFFER_FLUSHING,{startOffset:0,endOffset:s,type:"audio"}),p=!0,this.audioSwitch=!1,i.trigger(Be.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,i.trigger(Be.a.AUDIO_TRACK_SWITCHED,{id:r});var c=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&c.push({type:e.type,data:t,parent:"audio",content:"data"})}),!p&&c.length&&(c.forEach(function(e){t.state===Pt.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(Be.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,a=e.frag;t&&"audio"===e.id&&a.sn===t.sn&&a.level===t.level&&this.state===Pt.PARSING&&(this.stats.tparsed=performance.now(),this.state=Pt.PARSED,this._checkAppendedParsed())},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;(t===Pt.PARSING||t===Pt.PARSED)&&(this.pendingBuffering=0<e.pending,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(this.state===Pt.PARSED&&(!this.appended||!this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,a=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),a.trigger(Be.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;je.b.log("audio buffered : "+ct.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,a.trigger(Be.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Pt.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!(t&&"audio"!==t.type))switch(e.details){case Ge.a.FRAG_LOAD_ERROR:case Ge.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var a=this.fragLoadError;a?a++:a=1;var n=this.config;if(a<=n.fragLoadingMaxRetry){this.fragLoadError=a,t.loadCounter=0;var r=f(p(2,a-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);je.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=Pt.FRAG_LOADING_WAITING_RETRY}else je.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Pt.ERROR}break;case Ge.a.FRAG_LOOP_LOADING_ERROR:case Ge.a.AUDIO_TRACK_LOAD_ERROR:case Ge.a.AUDIO_TRACK_LOAD_TIMEOUT:case Ge.a.KEY_LOAD_ERROR:case Ge.a.KEY_LOAD_TIMEOUT:this.state!==Pt.ERROR&&(this.state=e.fatal?Pt.ERROR:Pt.IDLE,je.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case Ge.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Pt.PARSING||this.state===Pt.PARSED)){var o=this.mediaBuffer,i=this.media.currentTime,l=o&&rt.isBuffered(o,i)&&rt.isBuffered(o,i+.5);if(l){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,je.b.warn("audio:reduce max buffer length to "+d.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*d.fragLoadingLoopThreshold),this.state=Pt.IDLE}else je.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Pt.BUFFER_FLUSHING,this.hls.trigger(Be.a.BUFFER_FLUSHING,{startOffset:0,endOffset:s,type:"audio"})}break;default:}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(je.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(Be.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=Pt.PARSED):(this.state=Pt.IDLE,this.fragPrevious=null,this.tick())},kt(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,je.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(Ye),Mt=function(){function e(e){if("string"!=typeof e)return!1;var t=r[e.toLowerCase()];return!!t&&e.toLowerCase()}function t(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return!!t&&e.toLowerCase()}function a(e){for(var t=1,a;t<arguments.length;t++)for(var n in a=arguments[t],a)e[n]=a[n];return e}function n(n,r,o){var i=this,s=function(){return"undefined"==typeof navigator?void 0:/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};s?i=document.createElement("custom"):l.enumerable=!0,i.hasBeenReset=!1;var d="",p=!1,u=n,c=r,f=o,g=null,m="",y=!0,h="auto",b="start",v=50,I="middle",E=50,S="middle";if(Object.defineProperty(i,"id",a({},l,{get:function(){return d},set:function(e){d=""+e}})),Object.defineProperty(i,"pauseOnExit",a({},l,{get:function(){return p},set:function(e){p=!!e}})),Object.defineProperty(i,"startTime",a({},l,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",a({},l,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",a({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",a({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",a({},l,{get:function(){return m},set:function(t){var a=e(t);if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",a({},l,{get:function(){return y},set:function(e){y=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",a({},l,{get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",a({},l,{get:function(){return b},set:function(e){var a=t(e);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");b=a,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",a({},l,{get:function(){return v},set:function(e){if(0>e||100<e)throw new Error("Position must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",a({},l,{get:function(){return I},set:function(e){var a=t(e);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");I=a,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",a({},l,{get:function(){return E},set:function(e){if(0>e||100<e)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",a({},l,{get:function(){return S},set:function(e){var a=t(e);if(!a)throw new SyntaxError("An invalid or illegal string was specified.");S=a,this.hasBeenReset=!0}})),i.displayState=void 0,s)return i}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},n}(),Nt=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};me.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,a){return a?this.has(e)?this.values[e]:t[a]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var a=0;a<r.length;++a)if(t===r[a]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var a;return!!((a=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),0<=t&&100>=t))&&(this.set(e,t),!0)}};var Ft=new Mt(0,0,0),Bt="middle"===Ft.align?"middle":"center";fe.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=be(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var a=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),a}function a(e){ye(e,function(e,t){"Region"===e?console.log("parse region",t):void 0},/:/)}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;r=t();var o=r.match(/^()?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var i=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(i?i=!1:r=t(),n.state){case"HEADER":/:/.test(r)?a(r):!r&&(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new Mt(0,0,""),n.state="CUE",-1===r.indexOf("-->")){n.cue.id=r;continue}case"CUE":try{he(r,n.cue,n.regionList)}catch(t){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("-->");if(!r||s&&(i=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue;}}}catch(t){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return e.onflush&&e.onflush(),this}};var Gt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},jt=function(e){var t=e;return Gt.hasOwnProperty(e)&&(t=Gt[e]),u(t)},Ut=15,Zt=100,Yt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},zt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Wt={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ht={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Vt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Jt={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var a=this.verboseFilter[e];this.verboseLevel>=a&&console.log(this.time+" ["+e+"] "+t)}},Kt=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].toString(16));return t},Xt=function(){function e(t,a,n,r,o){Ie(this,e),this.foreground=t||"white",this.underline=a||!1,this.italics=n||!1,this.background=r||"black",this.flash=o||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],a=0,n;a<t.length;a++)n=t[a],e.hasOwnProperty(n)&&(this[n]=e[n])},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),Qt=function(){function e(t,a,n,r,o,i){Ie(this,e),this.uchar=t||" ",this.penState=new Xt(a,n,r,o,i)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),qt=function(){function e(){Ie(this,e),this.chars=[];for(var t=0;t<Zt;t++)this.chars.push(new Qt);this.pos=0,this.currPenState=new Xt}return e.prototype.equals=function(e){for(var t=!0,a=0;a<Zt;a++)if(!this.chars[a].equals(e.chars[a])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Zt;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Zt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),0>this.pos?(Jt.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Zt&&(Jt.log("ERROR","Too large cursor position "+this.pos),this.pos=Zt)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var a=this.pos+1;a<t+1;a++)this.chars[a].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){144<=e&&this.backSpace();var t=jt(e);return this.pos>=Zt?void Jt.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):void(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<Zt;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,a=0,n;a<Zt;a++)n=this.chars[a].uchar," "!==n&&(t=!1),e.push(n);return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)},e}(),$t=function(){function e(){Ie(this,e),this.rows=[];for(var t=0;t<Ut;t++)this.rows.push(new qt);this.currRow=Ut-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<Ut;e++)this.rows[e].clear();this.currRow=Ut-1},e.prototype.equals=function(e){for(var t=!0,a=0;a<Ut;a++)if(!this.rows[a].equals(e.rows[a])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<Ut;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<Ut;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){var e=this.rows[this.currRow];e.backSpace()},e.prototype.clearToEndOfRow=function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},e.prototype.insertChar=function(e){var t=this.rows[this.currRow];t.insertChar(e)},e.prototype.setPen=function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},e.prototype.moveCursor=function(e){var t=this.rows[this.currRow];t.moveCursor(e)},e.prototype.setCursor=function(e){Jt.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},e.prototype.setPAC=function(e){Jt.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var a=0;a<Ut;a++)this.rows[a].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var o=r.rows[n].cueStartTime;if(o&&o<Jt.time)for(var s=0;s<this.nrRollUpRows;s++)this.rows[t-this.nrRollUpRows+s+1].copy(r.rows[n+s])}}this.currRow=t;var d=this.rows[this.currRow];if(null!==e.indent){var p=e.indent,u=l(p-1,0);d.setCursor(e.indent),e.color=d.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){Jt.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void Jt.log("DEBUG","roll_up but nrRollUpRows not set yet");Jt.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),Jt.log("INFO","Rolling up")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],a="",n=-1,r=0,o;r<Ut;r++)o=this.rows[r].getTextString(),o&&(n=r+1,e?t.push("Row "+n+": '"+o+"'"):t.push(o.trim()));return 0<t.length&&(e?a="["+t.join(" | ")+"]":a=t.join("\n")),a},e.prototype.getTextAndFormat=function(){return this.rows},e}(),ea=function(){function e(t,a){Ie(this,e),this.chNr=t,this.outputFilter=a,this.mode=null,this.verbose=0,this.displayedMemory=new $t,this.nonDisplayedMemory=new $t,this.lastOutputScreen=new $t,this.currRollUpRow=this.displayedMemory.rows[Ut-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Ut-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e===this.mode||(this.mode=e,Jt.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var a=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Jt.log("INFO",a+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(Jt.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){Jt.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){Jt.log("INFO","BS - BackSpace"),"MODE_TEXT"===this.mode||(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){Jt.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){Jt.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){Jt.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){Jt.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){Jt.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){Jt.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){Jt.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},e.prototype.ccCR=function(){Jt.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},e.prototype.ccENM=function(){Jt.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(Jt.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,Jt.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},e.prototype.ccTO=function(e){Jt.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1,underline:1==e%2,italics:46<=e};if(!t.italics){var a=o(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][a]}else t.foreground="white";Jt.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=Jt.time;null===e||this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?!this.displayedMemory.equals(this.lastOutputScreen)&&(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&!this.displayedMemory.isEmpty()&&(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e)},e}(),ta=function(){function e(t,a,n){Ie(this,e),this.field=t||1,this.outputs=[a,n],this.channels=[new ea(1,a),new ea(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n=!1,r,o,s;this.lastTime=e,Jt.setTime(e);for(var l=0;l<t.length;l+=2){if(o=127&t[l],s=127&t[l+1],0===o&&0===s){this.dataCounters.padding+=2;continue}else Jt.log("DATA","["+Kt([t[l],t[l+1]])+"] -> ("+Kt([o,s])+")");if(r=this.parseCmd(o,s),r||(r=this.parseMidrow(o,s)),r||(r=this.parsePAC(o,s)),r||(r=this.parseBackgroundAttributes(o,s)),!r&&(n=this.parseChars(o,s),n))if(this.currChNr&&0<=this.currChNr){var d=this.channels[this.currChNr-1];d.insertChars(n)}else Jt.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,Jt.log("WARNING","Couldn't parse cleaned data "+Kt([o,s])+" orig: "+Kt([t[l],t[l+1]])))}},e.prototype.parseCmd=function(e,t){var a=null;if(!((20===e||28===e)&&32<=t&&47>=t||(23===e||31===e)&&33<=t&&35>=t))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Jt.log("DEBUG","Repeated command ("+Kt([e,t])+") is dropped"),!0;a=20===e||23===e?1:2;var n=this.channels[a-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47==t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=a,!0},e.prototype.parseMidrow=function(e,t){var a=null;if((17===e||25===e)&&32<=t&&47>=t){if(a=17===e?1:2,a!==this.currChNr)return Jt.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[a-1];return n.ccMIDROW(t),Jt.log("DEBUG","MIDROW ("+Kt([e,t])+")"),!0}return!1},e.prototype.parsePAC=function(e,t){var a=null,n=null;if(!((17<=e&&23>=e||25<=e&&31>=e)&&64<=t&&127>=t||(16===e||24===e)&&64<=t&&95>=t))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;a=23>=e?1:2,n=64<=t&&95>=t?1===a?Yt[e]:Wt[e]:1===a?zt[e]:Ht[e];var r=this.interpretPAC(n,t),o=this.channels[a-1];return o.setPAC(r),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=a,!0},e.prototype.interpretPAC=function(e,t){var a=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return a=95<t?t-96:t-64,n.underline=1==(1&a),13>=a?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][o(a/2)]:15>=a?(n.italics=!0,n.color="white"):n.indent=4*o((a-16)/2),n},e.prototype.parseChars=function(e,t){var a=null,n=null,r=null;if(25<=e?(a=2,r=e-8):(a=1,r=e),17<=r&&19>=r){var o=t;o=17===r?t+80:18===r?t+112:t+144,Jt.log("INFO","Special char '"+jt(o)+"' in channel "+a),n=[o]}else 32<=e&&127>=e&&(n=0===t?[e]:[e,t]);if(n){var i=Kt(n);Jt.log("DEBUG","Char codes =  "+i.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},e.prototype.parseBackgroundAttributes=function(e,t){var a,n,r,i;return!!((16===e||24===e)&&32<=t&&47>=t||(23===e||31===e)&&45<=t&&47>=t)&&(a={},16===e||24===e?(n=o((t-32)/2),a.background=Vt[n],1==t%2&&(a.background+="_semi")):45===t?a.background="transparent":(a.foreground="black",47==t&&(a.underline=!0)),r=24>e?1:2,i=this.channels[r-1],i.setBkgData(a),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),aa=function(e,t,a){return e.substr(a||0,t.length)===t},na=function(e){var t=parseInt(e.substr(-3)),a=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),r=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(a)||isNaN(n)||isNaN(r)?-1:(t+=1e3*a,t+=60000*n,t+=3600000*r,t)},ra=function e(t){for(var e=5381,a=t.length;a;)e=33*e^t.charCodeAt(--a);return(e>>>0).toString()},oa=function(e,t,a){var n=e[t],r=e[n.prevCC];if(!r||!r.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;r&&r.new;)e.ccOffset+=n.start-r.start,n.new=!1,n=r,r=e[n.prevCC];e.presentationOffset=a},ia={parse:function(e,t,a,n,r,o){var i=u.apply(null,new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",l=0,d=0,p=0,c=[],f=void 0,g=!0,m=new fe;m.oncue=function(e){var t=a[n],r=a.ccOffset;t&&t.new&&(d===void 0?oa(a,n,p):r=a.ccOffset=t.start),p&&(r=p+a.ccOffset-a.presentationOffset),e.startTime+=r-d,e.endTime+=r-d,e.id=ra(e.startTime)+ra(e.endTime)+ra(e.text),e.text=decodeURIComponent(escape(e.text)),0<e.endTime&&c.push(e)},m.onparsingerror=function(t){f=t},m.onflush=function(){return f&&o?void o(f):void r(c)},i.forEach(function(a){if(g){if(aa(a,"X-TIMESTAMP-MAP=")){g=!1,a.substr(16).split(",").forEach(function(e){aa(e,"LOCAL:")?s=e.substr(6):aa(e,"MPEGTS:")&&(l=parseInt(e.substr(7)))});try{t=0>t?t+8589934592:t,l-=t,d=na(s)/1e3,p=l/9e4,-1===d&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+a))}catch(t){f=new Error("Malformed X-TIMESTAMP-MAP: "+a)}return}""===a&&(g=!1)}m.parse(a+"\n")}),m.flush()}},sa=function(e){function t(a){Ee(this,t);var n=Se(this,e.call(this,a,Be.a.MEDIA_ATTACHING,Be.a.MEDIA_DETACHING,Be.a.FRAG_PARSING_USERDATA,Be.a.MANIFEST_LOADING,Be.a.MANIFEST_LOADED,Be.a.FRAG_LOADED,Be.a.LEVEL_SWITCHING,Be.a.INIT_PTS_FOUND));if(n.hls=a,n.config=a.config,n.enabled=!0,n.Cues=a.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=void 0,n.cueRanges=[],n.config.enableCEA708Captions){var r=n,o=function(t,a){var n=null;try{n=new window.Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,a.dispatchEvent(n)},i={newCue:function(e,t,a){if(!r.textTrack1){var n=r.getExistingTrack("1");if(!n){var i=r.createTextTrack("captions",r.config.captionsTextTrack1Label,r.config.captionsTextTrack1LanguageCode);i&&(i.textTrack1=!0,r.textTrack1=i)}else r.textTrack1=n,Ae(r.textTrack1),o(r.textTrack1,r.media)}r.addCues("textTrack1",e,t,a)}},s={newCue:function(e,t,a){if(!r.textTrack2){var n=r.getExistingTrack("2");if(!n){var i=r.createTextTrack("captions",r.config.captionsTextTrack2Label,r.config.captionsTextTrack1LanguageCode);i&&(i.textTrack2=!0,r.textTrack2=i)}else r.textTrack2=n,Ae(r.textTrack2),o(r.textTrack2,r.media)}r.addCues("textTrack2",e,t,a)}};n.cea608Parser=new ta(0,i,s)}return n}return Te(t,e),t.prototype.addCues=function(e,t,a,n){for(var r=this.cueRanges,o=!1,s=r.length;s--;){var d=r[s],p=we(d[0],d[1],t,a);if(0<=p&&(d[0]=f(d[0],t),d[1]=l(d[1],a),o=!0,.5<p/(a-t)))return}o||r.push([t,a]),this.Cues.newCue(this[e],t,a,n)},t.prototype.onInitPtsFound=function(e){var t=this;"undefined"==typeof this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var a=0;a<t.textTracks.length;a++){var n=t.textTracks[a];if(!0===n["textTrack"+e])return n}return null},t.prototype.createTextTrack=function(e,t,a){var n=this.media;if(n)return n.addTextTrack(e,t,a)},t.prototype.destroy=function(){Ye.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media},t.prototype.onMediaDetaching=function(){Ae(this.textTrack1),Ae(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var a=0;a<t.length;a++)Ae(t[a])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var a=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var r;if(n<a.length){var o=a[n];Le(o,e)&&(r=o)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),r.mode=e.default?"showing":"hidden",t.textTracks.push(r)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,a=e.payload;if("main"===t.type){var n=t.sn;if(n!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=n}else if("subtitle"===t.type)if(a.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(e);var o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var i=this.textTracks,s=this.hls;ia.parse(a,this.initPTS,o,t.cc,function(e){var a=i[t.trackId];e.forEach(function(e){if(!a.cues.getCueById(e.id))try{a.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,a.addCue(t)}}),s.trigger(Be.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(a){je.b.log("Failed to parse VTT cue: "+a),s.trigger(Be.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(Be.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0,a;t<e.samples.length;t++)a=this.extractCea608Data(e.samples[t].bytes),this.cea608Parser.addData(e.samples[t].pts,a)},t.prototype.extractCea608Data=function(e){for(var t=31&e[0],a=2,n=[],r=0,o,i,s,l,d;r<t;r++)(o=e[a++],i=127&e[a++],s=127&e[a++],l=0!=(4&o),d=3&o,0!==i||0!==s)&&l&&0===d&&(n.push(i),n.push(s));return n},t}(Ye),la=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),da=function(e){function t(a){Ce(this,t);var n=Re(this,e.call(this,a,Be.a.MEDIA_ATTACHED,Be.a.MEDIA_DETACHING,Be.a.MANIFEST_LOADING,Be.a.MANIFEST_LOADED,Be.a.SUBTITLE_TRACK_LOADED));return n.tracks=[],n.trackId=-1,n.media=void 0,n}return De(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=xe(this.media.textTracks),a=0;a<t.length;a++)"showing"===t[a].mode&&(e=a);this.subtitleTrack=e}},t.prototype.destroy=function(){Ye.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,a=e.subtitles||[],n=!1;this.tracks=a,this.trackId=-1,this.hls.trigger(Be.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:a}),a.forEach(function(e){e.default&&(t.subtitleTrack=e.id,n=!0)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var a=t.details;(void 0===a||!0===a.live)&&(je.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(Be.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(je.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(0<=e&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,je.b.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(Be.a.SUBTITLE_TRACK_SWITCH,{id:e});var a=t.details;(void 0===a||!0===a.live)&&(je.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(Be.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},la(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(Ye),pa=function(e){function t(a){_e(this,t);var n=ke(this,e.call(this,a,Be.a.ERROR,Be.a.SUBTITLE_TRACKS_UPDATED,Be.a.SUBTITLE_TRACK_SWITCH,Be.a.SUBTITLE_TRACK_LOADED,Be.a.SUBTITLE_FRAG_PROCESSED));return n.config=a.config,n.vttFragSNsProcessed={},n.vttFragQueues=void 0,n.currentlyProcessing=null,n.currentTrackId=-1,n}return Pe(t,e),t.prototype.destroy=function(){Ye.prototype.destroy.call(this)},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(Be.a.FRAG_LOADING,{frag:e})}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;je.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(e){var t=this.vttFragSNsProcessed[e.id],a=this.vttFragQueues[e.id],n=this.currentlyProcessing?this.currentlyProcessing.sn:-1,r=function(e){return-1<t.indexOf(e.sn)},o=function(e){return a.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){r(t)||t.sn===n||o(t)||(t.trackId=e.id,a.push(t))}),this.nextFrag()},t}(Ye),ua={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:60000000,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Dt,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:At,bufferController:Lt,capLevelController:Ct,fpsController:Rt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};ua.subtitleStreamController=pa,ua.subtitleTrackController=da,ua.timelineController=sa,ua.cueHandler=Me,ua.enableCEA708Captions=!0,ua.enableWebVTT=!0,ua.captionsTextTrack1Label="English",ua.captionsTextTrack1LanguageCode="en",ua.captionsTextTrack2Label="Spanish",ua.captionsTextTrack2LanguageCode="es",ua.audioStreamController=Ot,ua.audioTrackController=_t;var ca=function(){function e(e,t){for(var a=0,n;a<t.length;a++)n=t[a],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),fa=function(){function e(){var t=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Oe(this,e);var n=e.DefaultConfig;if((a.liveSyncDurationCount||a.liveMaxLatencyDurationCount)&&(a.liveSyncDuration||a.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in a||(a[r]=n[r]);if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error("Illegal hls.js config: \"liveMaxLatencyDurationCount\" must be gt \"liveSyncDurationCount\"");if(void 0!==a.liveMaxLatencyDuration&&(a.liveMaxLatencyDuration<=a.liveSyncDuration||void 0===a.liveSyncDuration))throw new Error("Illegal hls.js config: \"liveMaxLatencyDuration\" must be gt \"liveSyncDuration\"");Object(je.a)(a.debug),this.config=a,this._autoLevelCapping=-1;var o=this.observer=new st.a;o.trigger=function(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];o.emit.apply(o,[e,e].concat(a))},o.off=function(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];o.removeListener.apply(o,[e].concat(a))},this.on=o.on.bind(o),this.off=o.off.bind(o),this.trigger=o.trigger.bind(o);var i=this.abrController=new a.abrController(this),s=new a.bufferController(this),l=new a.capLevelController(this),d=new a.fpsController(this),p=new et(this),u=new tt(this),c=new at(this),f=new vt(this),g=this.levelController=new ht(this),m=this.streamController=new mt(this),y=[g,m],h=a.audioStreamController;h&&y.push(new h(this)),this.networkControllers=y;var b=[p,u,c,i,s,l,d,f];if(h=a.audioTrackController,h){var v=new h(this);this.audioTrackController=v,b.push(v)}if(h=a.subtitleTrackController,h){var I=new h(this);this.subtitleTrackController=I,b.push(I)}[a.subtitleStreamController,a.timelineController].forEach(function(e){e&&b.push(new e(t))}),this.coreComponents=b}return e.isSupported=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,a=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported("video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\""),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return a&&n},ca(e,null,[{key:"version",get:function(){return"0.8.4"}},{key:"Events",get:function(){return Be.a}},{key:"ErrorTypes",get:function(){return Ge.b}},{key:"ErrorDetails",get:function(){return Ge.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:ua},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){je.b.log("destroy"),this.trigger(Be.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){je.b.log("attachMedia"),this.media=e,this.trigger(Be.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){je.b.log("detachMedia"),this.trigger(Be.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=Fe.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),je.b.log("loadSource:"+e),this.url=e,this.trigger(Be.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1;je.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){je.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){je.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){je.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},ca(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){je.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){je.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){je.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return l(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){je.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){je.b.log("set startLevel:"+e);var t=this;-1!==e&&(e=l(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){je.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,a=e.config.minAutoBitrate,n=t?t.length:0,r=0,o;r<n;r++)if(o=t[r].realBitrate?l(t[r].realBitrate,t[r].bitrate):t[r].bitrate,o>a)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,a=e.autoLevelCapping,n=void 0;return n=-1===a&&t&&t.length?t.length-1:a,n}},{key:"nextAutoLevel",get:function(){var e=this;return f(l(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=l(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}(),ga=t["default"]=fa},function(e,t,a){function n(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var a={};t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var n=t(t.s=ENTRY_MODULE);return n.default||n}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){var t=[],a=e.toString(),n=a.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!n)return t;for(var o=n[1],i=new RegExp("(\\\\n|\\W)"+r(o)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g"),s;s=i.exec(a);)t.push(s[3]);return t}function i(e,t){for(var a=[t],n=[],r={};a.length;){var i=a.pop();if(!r[i]&&e[i]){r[i]=!0,n.push(i);var s=o(e[i]);a=a.concat(s)}}return n}e.exports=function(e,t){t=t||{};var r=a.m,o=t.all?Object.keys(r):i(r,e),s="("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.map(function(e){return""+JSON.stringify(e)+": "+r[e].toString()}).join(",")+"})(self);",l=new window.Blob([s],{type:"text/javascript"});if(t.bare)return l;var d=window.URL||window.webkitURL||window.mozURL||window.msURL,p=d.createObjectURL(l),u=new window.Worker(p);return u.objectURL=p,u}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),r=a(1),o=a(0),i=a(4),s=a.n(i);t["default"]=function(e){var t=new s.a;t.trigger=function(e){for(var a=arguments.length,n=Array(1<a?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var a=arguments.length,n=Array(1<a?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var a=function(t,a){e.postMessage({event:t,data:a})};e.addEventListener("message",function(r){var i=r.data;switch(i.cmd){case"init":var s=JSON.parse(i.config);e.demuxer=new n.a(t,i.typeSupported,s,i.vendor);try{Object(o.a)(!0===s.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}a("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS);break;default:}}),t.on(r.a.FRAG_DECRYPTED,a),t.on(r.a.FRAG_PARSING_INIT_SEGMENT,a),t.on(r.a.FRAG_PARSED,a),t.on(r.a.ERROR,a),t.on(r.a.FRAG_PARSING_METADATA,a),t.on(r.a.FRAG_PARSING_USERDATA,a),t.on(r.a.INIT_PTS_FOUND,a),t.on(r.a.FRAG_PARSING_DATA,function(t,a){var n=[],r={event:t,data:a};a.data1&&(r.data1=a.data1.buffer,n.push(a.data1.buffer),delete a.data1),a.data2&&(r.data2=a.data2.buffer,n.push(a.data2.buffer),delete a.data2),e.postMessage(r,n)})}}])["default"]})},{}],7:[function(e,t,a){var n=Math.LN2,r=Math.log,o=Math.abs,s=Math.floor,l=Math.pow;/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(t,a,n,r,o){var p=8*o-r-1,u=(1<<p)-1,c=u>>1,f=-7,g=n?o-1:0,y=n?-1:1,d=t[a+g],h,b;for(g+=y,h=d&(1<<-f)-1,d>>=-f,f+=p;0<f;h=256*h+t[a+g],g+=y,f-=8);for(b=h&(1<<-f)-1,h>>=-f,f+=r;0<f;b=256*b+t[a+g],g+=y,f-=8);if(0===h)h=1-c;else{if(h===u)return b?NaN:(d?-1:1)*(1/0);b+=l(2,r),h-=c}return(d?-1:1)*b*l(2,h-r)},a.write=function(t,a,p,u,f,g){var y=8*g-f-1,h=(1<<y)-1,b=h>>1,v=23===f?l(2,-24)-l(2,-77):0,I=u?0:g-1,E=u?1:-1,d=0>a||0===a&&0>1/a?1:0,S,T,A;for(a=o(a),isNaN(a)||a===1/0?(T=isNaN(a)?1:0,S=h):(S=s(r(a)/n),1>a*(A=l(2,-S))&&(S--,A*=2),a+=1<=S+b?v/A:v*l(2,1-b),2<=a*A&&(S++,A/=2),S+b>=h?(T=0,S=h):1<=S+b?(T=(a*A-1)*l(2,f),S+=b):(T=a*l(2,b-1)*l(2,f),S=0));8<=f;t[p+I]=255&T,I+=E,T/=256,f-=8);for(S=S<<f|T,y+=f;0<y;t[p+I]=255&S,I+=E,S/=256,y-=8);t[p+I-E]|=128*d}},{}],8:[function(e,t){var a=e("./lib/encoding.js");t.exports={TextEncoder:a.TextEncoder,TextDecoder:a.TextDecoder}},{"./lib/encoding.js":9}],9:[function(e,t){var a=String.fromCharCode;(function(e){'use strict';function n(e,t,a){return t<=e&&e<=a}function r(e,t){return-1!==e.indexOf(t)}function o(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){for(var t=e+"",a=t.length,n=0,r=[];n<a;){var o=t.charCodeAt(n);if(55296>o||57343<o)r.push(o);else if(56320<=o&&57343>=o)r.push(65533);else if(55296<=o&&56319>=o)if(n===a-1)r.push(65533);else{var s=t.charCodeAt(n+1);if(56320<=s&&57343>=s){r.push(65536+((1023&o)<<10)+(1023&s)),n+=1}else r.push(65533)}n+=1}return r}function s(e){for(var t="",n=0,r;n<e.length;++n)r=e[n],65535>=r?t+=a(r):(r-=65536,t+=a((r>>10)+55296,(1023&r)+56320));return t}function l(e){return 0<=e&&127>=e}function d(e){this.tokens=[].slice.call(e),this.tokens.reverse()}function p(e,t){if(e)throw TypeError("Decoder error");return t||65533}function u(e){throw TypeError("The code point "+e+" could not be encoded.")}function c(e){return e=(e+"").trim().toLowerCase(),Object.prototype.hasOwnProperty.call(V,e)?V[e]:null}function f(e,t){return t?t[e]||null:null}function g(e,t){var a=t.indexOf(e);return-1===a?null:a}function m(t){if(!("encoding-indexes"in e))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return e["encoding-indexes"][t]}function y(e){if(39419<e&&189e3>e||1237575<e)return null;if(7457===e)return 59335;var t=0,a=0,n=m("gb18030-ranges"),r;for(r=0;r<n.length;++r){var o=n[r];if(o[0]<=e)t=o[0],a=o[1];else break}return a+e-t}function h(e){if(59335===e)return 7457;var t=0,a=0,n=m("gb18030-ranges"),r;for(r=0;r<n.length;++r){var o=n[r];if(o[1]<=e)t=o[1],a=o[0];else break}return a+e-t}function b(e){X=X||m("jis0208").map(function(e,t){return n(t,8272,8835)?null:e});var t=X;return t.indexOf(e)}function v(e){Q=Q||m("big5").map(function(e,t){return t<5024?null:e});var t=Q;return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):g(e,t)}function I(e,t){if(!(this instanceof I))throw TypeError("Called as a function. Did you forget 'new'?");e=e===void 0?"utf-8":e+"",t=o(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var a=c(e);if(null===a||"replacement"===a.name)throw RangeError("Unknown encoding: "+e);if(!K[a.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var n=this;return n._encoding=a,!!t.fatal&&(n._error_mode="fatal"),!!t.ignoreBOM&&(n._ignoreBOM=!0),Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase(),this.fatal="fatal"===n._error_mode,this.ignoreBOM=n._ignoreBOM),n}function E(t,a){if(!(this instanceof E))throw TypeError("Called as a function. Did you forget 'new'?");a=o(a),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=!a.fatal?"replacement":"fatal";var n=this;if(!!a.NONSTANDARD_allowLegacyEncoding){t=t===void 0?"utf-8":t+"";var r=c(t);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!J[r.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");n._encoding=r}else n._encoding=c("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase()),n}function S(e){var t=e.fatal,a=0,r=0,o=0,i=128,s=191;this.handler=function(e,l){if(-1===l&&0!==o)return o=0,p(t);if(-1===l)return-1;if(0===o){if(n(l,0,127))return l;if(n(l,194,223))o=1,a=31&l;else if(n(l,224,239))224===l&&(i=160),237===l&&(s=159),o=2,a=15&l;else if(n(l,240,244))240===l&&(i=144),244===l&&(s=143),o=3,a=7&l;else return p(t);return null}if(!n(l,i,s))return a=o=r=0,i=128,s=191,e.prepend(l),p(t);if(i=128,s=191,a=a<<6|63&l,r+=1,r!==o)return null;var d=a;return a=o=r=0,d}}function T(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(z(t))return t;var a,r;n(t,128,2047)?(a=1,r=192):n(t,2048,65535)?(a=2,r=224):n(t,65536,1114111)&&(a=3,r=240);for(var o=[(t>>6*a)+r];0<a;){var i=t>>6*(a-1);o.push(128|63&i),a-=1}return o}}function A(e,t){var a=t.fatal;this.handler=function(t,n){if(n===-1)return-1;if(l(n))return n;var r=e[n-128];return null===r?p(a):r}}function L(e,t){t.fatal;this.handler=function(t,a){if(-1===a)return-1;if(z(a))return a;var n=g(a,e);return null===n&&u(a),n+128}}function w(e){var t=e.fatal,a=0,r=0,o=0;this.handler=function(e,i){if(i===-1&&0===a&&0===r&&0===o)return-1;i===-1&&(0!==a||0!==r||0!==o)&&(a=0,r=0,o=0,p(t));var s;if(0!==o){s=null,n(i,48,57)&&(s=y(10*(126*(10*(a-129)+r-48)+o-129)+i-48));var d=[r,o,i];return a=0,r=0,o=0,null===s?(e.prepend(d),p(t)):s}if(0!==r)return n(i,129,254)?(o=i,null):(e.prepend([r,i]),a=0,r=0,p(t));if(0!==a){if(n(i,48,57))return r=i,null;var u=a,c=null;a=0;var g=127>i?64:65;return(n(i,64,126)||n(i,128,254))&&(c=190*(u-129)+(i-g)),s=null===c?null:f(c,m("gb18030")),null===s&&l(i)&&e.prepend(i),null===s?p(t):s}return l(i)?i:128===i?8364:n(i,129,254)?(a=i,null):p(t)}}function C(e,t){e.fatal;this.handler=function(e,a){if(a===-1)return-1;if(z(a))return a;if(58853===a)return u(a);if(t&&8364===a)return 128;var n=g(a,m("gb18030"));if(null!==n){var r=Y(n/190)+129,o=n%190,i=63>o?64:65;return[r,o+i]}if(t)return u(a);n=h(a);var s=Y(n/10/126/10);n-=10*(126*(10*s));var l=Y(n/10/126);n-=126*(10*l);var d=Y(n/10),p=n-10*d;return[s+129,l+48,d+129,p+48]}}function R(e){var t=e.fatal,a=0;this.handler=function(e,r){if(-1===r&&0!==a)return a=0,p(t);if(-1===r&&0===a)return-1;if(0!==a){var o=a,i=null;a=0;var s=127>r?64:98;switch((n(r,64,126)||n(r,161,254))&&(i=157*(o-129)+(r-s)),i){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780];}var d=null===i?null:f(i,m("big5"));return null===d&&l(r)&&e.prepend(r),null===d?p(t):d}return l(r)?r:n(r,129,254)?(a=r,null):p(t)}}function D(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(z(t))return t;var a=v(t);if(null===a)return u(t);var n=Y(a/157)+129;if(161>n)return u(t);var r=a%157,o=63>r?64:98;return[n,r+o]}}function x(e){var t=e.fatal,a=!1,r=0;this.handler=function(e,o){if(-1===o&&0!==r)return r=0,p(t);if(-1===o&&0===r)return-1;if(142===r&&n(o,161,223))return r=0,65216+o;if(143===r&&n(o,161,254))return a=!0,r=o,null;if(0!==r){var i=r;r=0;var s=null;return n(i,161,254)&&n(o,161,254)&&(s=f(94*(i-161)+(o-161),m(a?"jis0212":"jis0208"))),a=!1,n(o,161,254)||e.prepend(o),null===s?p(t):s}return l(o)?o:142===o||143===o||n(o,161,254)?(r=o,null):p(t)}}function _(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(z(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var a=g(t,m("jis0208"));if(null===a)return u(t);var r=Y(a/94)+161;return[r,a%94+161]}}function k(e){var t=e.fatal,a={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},r=a.ASCII,o=a.ASCII,i=0,s=!1;this.handler=function(e,l){switch(r){default:case a.ASCII:return 27===l?(r=a.EscapeStart,null):n(l,0,127)&&14!==l&&15!==l&&27!==l?(s=!1,l):-1===l?-1:(s=!1,p(t));case a.Roman:return 27===l?(r=a.EscapeStart,null):92===l?(s=!1,165):126===l?(s=!1,8254):n(l,0,127)&&14!==l&&15!==l&&27!==l&&92!==l&&126!==l?(s=!1,l):-1===l?-1:(s=!1,p(t));case a.Katakana:return 27===l?(r=a.EscapeStart,null):n(l,33,95)?(s=!1,65344+l):-1===l?-1:(s=!1,p(t));case a.LeadByte:return 27===l?(r=a.EscapeStart,null):n(l,33,126)?(s=!1,i=l,r=a.TrailByte,null):-1===l?-1:(s=!1,p(t));case a.TrailByte:if(27===l)return r=a.EscapeStart,p(t);if(n(l,33,126)){r=a.LeadByte;var d=94*(i-33)+l-33,u=f(d,m("jis0208"));return null===u?p(t):u}return-1===l?(r=a.LeadByte,e.prepend(l),p(t)):(r=a.LeadByte,p(t));case a.EscapeStart:return 36===l||40===l?(i=l,r=a.Escape,null):(e.prepend(l),s=!1,r=o,p(t));case a.Escape:var c=i;i=0;var g=null;if(40===c&&66===l&&(g=a.ASCII),40===c&&74===l&&(g=a.Roman),40===c&&73===l&&(g=a.Katakana),36===c&&(64===l||66===l)&&(g=a.LeadByte),null!==g){r=r=g;var y=s;return s=!0,y?p(t):null}return e.prepend([c,l]),s=!1,r=o,p(t);}}}function P(e){var t=e.fatal,a={ASCII:0,Roman:1,jis0208:2},n=a.ASCII;this.handler=function(e,t){if(-1===t&&n!==a.ASCII)return e.prepend(t),n=a.ASCII,[27,40,66];if(-1===t&&n===a.ASCII)return-1;if((n===a.ASCII||n===a.Roman)&&(14===t||15===t||27===t))return u(65533);if(n===a.ASCII&&z(t))return t;if(n===a.Roman&&(z(t)&&92!==t&&126!==t||165==t||8254==t)){if(z(t))return t;if(165===t)return 92;if(8254===t)return 126}if(z(t)&&n!==a.ASCII)return e.prepend(t),n=a.ASCII,[27,40,66];if((165===t||8254===t)&&n!==a.Roman)return e.prepend(t),n=a.Roman,[27,40,74];8722===t&&(t=65293);var r=g(t,m("jis0208"));if(null===r)return u(t);if(n!==a.jis0208)return e.prepend(t),n=a.jis0208,[27,36,66];var o=Y(r/94)+33;return[o,r%94+33]}}function O(e){var t=e.fatal,a=0;this.handler=function(e,r){if(-1===r&&0!==a)return a=0,p(t);if(-1===r&&0===a)return-1;if(0!==a){var o=a,i=null;a=0;var s=127>r?64:65,d=160>o?129:193;if((n(r,64,126)||n(r,128,252))&&(i=188*(o-d)+r-s),n(i,8836,10715))return 48508+i;var u=null===i?null:f(i,m("jis0208"));return null===u&&l(r)&&e.prepend(r),null===u?p(t):u}return l(r)||128===r?r:n(r,161,223)?65216+r:n(r,129,159)||n(r,224,252)?(a=r,null):p(t)}}function M(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(z(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var a=b(t);if(null===a)return u(t);var r=Y(a/188),o=31>r?129:193,i=a%188,s=63>i?64:65;return[r+o,i+s]}}function N(e){var t=e.fatal,a=0;this.handler=function(e,r){if(-1===r&&0!==a)return a=0,p(t);if(-1===r&&0===a)return-1;if(0!==a){var o=a,i=null;a=0,n(r,65,254)&&(i=190*(o-129)+(r-65));var s=null===i?null:f(i,m("euc-kr"));return null===i&&l(r)&&e.prepend(r),null===s?p(t):s}return l(r)?r:n(r,129,254)?(a=r,null):p(t)}}function F(e){e.fatal;this.handler=function(e,t){if(t===-1)return-1;if(z(t))return t;var a=g(t,m("euc-kr"));if(null===a)return u(t);var n=Y(a/190)+129;return[n,a%190+65]}}function B(e,t){var a=e>>8,n=255&e;return t?[a,n]:[n,a]}function G(e,t){var a=t.fatal,r=null,o=null;this.handler=function(t,i){if(-1===i&&(null!==r||null!==o))return p(a);if(-1===i&&null===r&&null===o)return-1;if(null===r)return r=i,null;var s;if(s=e?(r<<8)+i:(i<<8)+r,r=null,null!==o){var l=o;return(o=null,n(s,56320,57343))?65536+1024*(l-55296)+(s-56320):(t.prepend(B(s,e)),p(a))}return n(s,55296,56319)?(o=s,null):n(s,56320,57343)?p(a):s}}function j(e,t){t.fatal;this.handler=function(t,a){if(a===-1)return-1;if(n(a,0,65535))return B(a,e);var r=B((a-65536>>10)+55296,e),o=B((1023&a-65536)+56320,e);return r.concat(o)}}function U(e){e.fatal;this.handler=function(e,t){return-1===t?-1:l(t)?t:63360+t-128}}function Z(e){e.fatal;this.handler=function(e,t){return-1===t?-1:z(t)?t:n(t,63360,63487)?t-63360+128:u(t)}}var Y=Math.floor,z=l,W=-1;d.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():W},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};(function(){}).prototype={handler:function(){}},function(){}.prototype={handler:function(){}};var H=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],V={};H.forEach(function(e){e.encodings.forEach(function(e){e.labels.forEach(function(t){V[t]=e})})});var J={},K={},X,Q;Object.defineProperty&&(Object.defineProperty(I.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(I.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(I.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),I.prototype.decode=function(e,t){var a;a="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=o(t),this._do_not_flush||(this._decoder=K[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=!!t.stream;for(var n=new d(a),i=[],l,p;(p=n.read(),p!==W)&&!(l=this._decoder.handler(n,p),-1===l);)null!==l&&(Array.isArray(l)?i.push.apply(i,l):i.push(l));if(!this._do_not_flush){do{if(l=this._decoder.handler(n,n.read()),-1===l)break;if(null===l)continue;Array.isArray(l)?i.push.apply(i,l):i.push(l)}while(!n.endOfStream());this._decoder=null}return function(e){return!r(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(0<e.length&&65279===e[0]?(this._BOMseen=!0,e.shift()):0<e.length&&(this._BOMseen=!0)),s(e)}.call(this,i)},Object.defineProperty&&Object.defineProperty(E.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),E.prototype.encode=function(e,t){e=e===void 0?"":e+"",t=o(t),this._do_not_flush||(this._encoder=J[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=!!t.stream;for(var a=new d(i(e)),n=[],r,s;(s=a.read(),s!==W)&&!(r=this._encoder.handler(a,s),-1===r);)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._do_not_flush){for(;r=this._encoder.handler(a,a.read()),-1!==r;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)},J["UTF-8"]=function(e){return new T(e)},K["UTF-8"]=function(e){return new S(e)},function(){"encoding-indexes"in e&&H.forEach(function(e){"Legacy single-byte encodings"!==e.heading||e.encodings.forEach(function(e){var t=e.name,a=m(t.toLowerCase());K[t]=function(e){return new A(a,e)},J[t]=function(e){return new L(a,e)}})})}(),K.GBK=function(e){return new w(e)},J.GBK=function(e){return new C(e,!0)},J.gb18030=function(e){return new C(e)},K.gb18030=function(e){return new w(e)},J.Big5=function(e){return new D(e)},K.Big5=function(e){return new R(e)},J["EUC-JP"]=function(e){return new _(e)},K["EUC-JP"]=function(e){return new x(e)},J["ISO-2022-JP"]=function(e){return new P(e)},K["ISO-2022-JP"]=function(e){return new k(e)},J.Shift_JIS=function(e){return new M(e)},K.Shift_JIS=function(e){return new O(e)},J["EUC-KR"]=function(e){return new F(e)},K["EUC-KR"]=function(e){return new N(e)},J["UTF-16BE"]=function(e){return new j(!0,e)},K["UTF-16BE"]=function(e){return new G(!0,e)},J["UTF-16LE"]=function(e){return new j(!1,e)},K["UTF-16LE"]=function(e){return new G(!1,e)},J["x-user-defined"]=function(e){return new Z(e)},K["x-user-defined"]=function(e){return new U(e)},e.TextEncoder||(e.TextEncoder=E),e.TextDecoder||(e.TextDecoder=I),"undefined"!=typeof t&&t.exports&&(t.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})})(this||{})},{}]},{},[1]);